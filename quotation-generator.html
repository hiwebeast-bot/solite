<!DOCTYPE html>
<html lang="en" class="dark">
<!-- üß¨ SOLITE GEN-5.1 BALANCED HEAD / Quotation Generator ‚Äî AUTHORITY + PERFORMANCE EDITION -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Free Quotation Generator | Create Professional Quotes | Solite</title>
  <meta name="description"
        content="Create professional, branded quotations instantly with Solite‚Äôs free Quotation Generator. Add line items, pricing, taxes, logo, and export as a PDF ‚Äî fully private & client-side." />

  <!-- Canonical + Robots -->
  <link rel="canonical" href="https://solite.in/quotation-generator.html" />
  <meta name="robots" content="index, follow" />

  <!-- Branding -->
  <meta name="application-name" content="Solite Quotation Generator" />
  <meta name="author" content="Solite" />
  <meta name="publisher" content="Solite" />

  <!-- Theme Colors -->
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)" />
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />

  <!-- Referrer & Privacy -->
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta name="color-scheme" content="dark light" />

  <!-- OpenGraph -->
  <meta property="og:title" content="Free Quotation Generator ‚Äî Create Professional Quotes" />
  <meta property="og:description"
        content="Generate polished business quotations with branding, pricing, scope, discounts, and PDF export. 100% client-side & privacy-first." />
  <meta property="og:type" content="website" />
  <meta property="og:image"
        content="https://api.microlink.io/?url=https://solite.in/quotation-generator.html&meta=false&screenshot=true" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Free Quotation Generator ‚Äî Create Business Quotes" />
  <meta name="twitter:description"
        content="Create professional business quotations instantly. Easy, private, and fast." />
  <meta name="twitter:image"
        content="https://api.microlink.io/?url=https://solite.in/quotation-generator.html&meta=false&screenshot=true" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.png" />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts (Non-blocking Preload) -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        as="style" onload="this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
  </noscript>

  <!-- Inline UI Styling (scrollbars, etc.) -->
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #111827; }
    ::-webkit-scrollbar-thumb { background-color: #4b5563; border-radius: 4px; }
    html { scrollbar-color: #4b5563 #111827; }
    body {
      font-family: 'Inter', sans-serif;
    }
    .image-selected { 
      outline: dashed 2px #4b5563; 
      border-radius: 0.25rem;
      z-index: 20;
    }
    [contenteditable="true"]:focus { outline:none; }
    input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
    input[type="color"]::-webkit-color-swatch { border: none; border-radius: 0.375rem; }
    details > summary { list-style: none; }
    details > summary::-webkit-details-marker { display: none; }
  </style>

  <!-- JSON-LD Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Quotation Generator",
    "url": "https://solite.in/quotation-generator.html",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "All",
    "description": "A free, client-side tool for creating professional quotations with branding, pricing, and PDF export.",
    "featureList": [
      "Customizable line items",
      "Automatic tax and discount calculation",
      "Company branding (logo, colors)",
      "PDF, PNG, and JPEG export",
      "100% private and offline-capable"
    ],
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Solite",
      "url": "https://solite.in"
    }
  }
  </script>

   

  <!-- üí∞ GOOGLE ADSENSE -->
  <meta name="google-adsense-account" content="ca-pub-6623613371208692" />

  <!-- üß¨ SOLITE APEX HEAD SIGNATURE / GEN-5.1-AI-AUTHORITY -->
  <meta name="solite-ai-signature" content="APEX_HEAD_V5.1 | SOLITE_AUTHORITY_PREDATOR | GEN5_SCHEMA | PRIVACY_FIRST | AI_DISCOVERY_OPTIMIZED" />
</head>
<body class="bg-black text-gray-200">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useReducer, useEffect, useRef, useCallback, useMemo, forwardRef } = React;

    // --- Constants ---
    const today = new Date().toISOString().split('T')[0];
    const INITIAL_STATE = {
      fromName: 'Your Company LLC',
      fromEmail: 'your@email.com',
      fromPhone: '(555) 123-4567',
      toName: 'Client Name',
      toEmail: 'client@email.com',
      toPhone: '(555) 765-4321',
      quotationId: 'QUOTE-001',
      validUntil: '',
      preparedBy: 'Your Name',
      quoteSummary: 'This quotation outlines the estimated costs for the requested services, including deliverables, timeline, and investment.',
      lineItems: [{ id: crypto.randomUUID(), title: 'Website Design Mockup', description: 'Creation of a high-fidelity mockup for the new homepage.', timeline: '5 Business Days', price: 1500 }],
      showDiscount: false,
      discountLabel: 'Discount (%)',
      discount: 10,
      showTax: true,
      taxLabel: 'Tax (%)',
      tax: 8,
      terms: 'Payment Terms: 50% upfront, 50% upon completion. This quotation is valid for 30 days.',
      currencySymbol: '$',
      logo: { src: null, x: 0, y: 0, width: 100, height: 100, opacity: 1 },
      accentColor: '#000000',
      issuedOn: today,
    };

    // --- Reducer ---
    const quoteReducer = (state, action) => {
      switch (action.type) {
        case 'UPDATE_FIELD':
          return { ...state, [action.payload.field]: action.payload.value };
        case 'ADD_LINE_ITEM':
          return {
            ...state,
            lineItems: [...state.lineItems, { id: crypto.randomUUID(), title: 'New Item', description: '', timeline: '', price: 0 }],
          };
        case 'UPDATE_LINE_ITEM': {
          const newLineItems = [...state.lineItems];
          newLineItems[action.payload.index] = { ...newLineItems[action.payload.index], [action.payload.field]: action.payload.value };
          return { ...state, lineItems: newLineItems };
        }
        case 'REMOVE_LINE_ITEM': {
          const newLineItems = state.lineItems.filter((_, i) => i !== action.payload.index);
          return { ...state, lineItems: newLineItems };
        }
        case 'UPDATE_IMAGE':
          return {
            ...state,
            [action.payload.imageType]: { ...state[action.payload.imageType], ...action.payload.data },
          };
        case 'RESET_STATE':
            return { ...INITIAL_STATE, issuedOn: new Date().toISOString().split('T')[0] };
        default:
          return state;
      }
    };

    // --- Components ---
    const Header = () => (
      <header className="p-3 sm:p-4 w-full flex-shrink-0 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-xl z-30 border-b border-gray-200 dark:border-gray-800">
        <div className="flex justify-between items-center">
          <a href="index.html" className="flex flex-col space-y-1 lg:flex-row lg:items-center lg:space-x-3 lg:space-y-0" aria-label="Solite Homepage">
            <div className="flex items-center space-x-3">
              <svg className="h-6 w-6 lg:h-8 lg:w-8 text-gray-900 dark:text-white flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 7l10 5 10-5"></path></svg>
              <span className="text-base lg:text-xl font-bold text-gray-900 dark:text-white uppercase tracking-wider leading-none">Solite</span>
            </div>
            <span className="h-6 w-px bg-gray-300 dark:bg-gray-700 hidden lg:block"></span>
            <span className="text-lg lg:text-lg font-semibold text-gray-600 dark:text-gray-400 leading-none">Quotation Generator</span>
          </a>
          <div className="flex items-center space-x-4">
            <a href="index.html#apps" className="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-1.5">
              <span>Free Tools</span>
              <svg className="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M13 7l5 5-5 5"></path></svg>
            </a>
          </div>
        </div>
      </header>
    );

    const Footer = () => (
        <footer className="p-4 w-full flex-shrink-0 border-t border-gray-800 bg-gray-900/50">
          <div className="flex flex-col sm:flex-row justify-between items-center text-gray-400 text-sm px-4 sm:px-6">
             <div className="flex items-center space-x-3 mb-4 sm:mb-0">
                <svg className="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z"/><path d="M2 17l10 5 10-5"/><path d="M2 7l10 5 10-5"/></svg>
                <span>&copy; 2025 Solite. All Rights Reserved.</span>
            </div>
            <div className="flex items-center justify-center flex-wrap gap-x-6 gap-y-2">
                <a href="./about.html" className="hover:text-white transition-colors">About</a>
                <a href="./blog.html" className="hover:text-white transition-colors">Blog</a>
                <a href="./privacy.html" className="hover:text-white transition-colors">Privacy</a>
                <a href="./terms.html" className="hover:text-white transition-colors">Terms</a>
                <a href="./disclaimer.html" className="hover:text-white transition-colors">Disclaimer</a>
                <a href="mailto:support@solite.in" className="hover:text-white transition-colors">Contact</a>
            </div>
          </div>
        </footer>
    );

    const SeoBlock = () => {
        return (
            <div className="w-full text-gray-300 mx-2 mb-2">
                <style>{`
                    #solite-info-block-quotationmaker[open] > summary { border-bottom: 1px solid #374151; }
                    #solite-info-block-quotationmaker > summary .details-arrow-seo {
                        transform: rotate(-90deg); transition: transform 0.25s ease-in-out;
                    }
                    #solite-info-block-quotationmaker[open] > summary .details-arrow-seo { transform: rotate(0deg); }
                    .badge {
                        display:inline-flex; align-items:center; gap:.5rem;
                        border:1px solid #374151; padding:.25rem .6rem;
                        border-radius:.6rem; font-size:.8rem; color:#9CA3AF;
                    }
                `}</style>
                <details id="solite-info-block-quotationmaker" className="w-full bg-gray-900 rounded-2xl border border-gray-800 shadow-2xl shadow-black/40">
                    <summary className="text-xl font-bold text-white p-5 cursor-pointer flex justify-between items-center">
                        Quotation Generator ‚Äî Professional Branded Quote Maker
                        <svg className="w-5 h-5 transition-transform duration-200 transform details-arrow-seo"
                             xmlns="http://www.w3.org/2000/svg" fill="none"
                             viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                            <path strokeLinecap="round" strokeLinejoin="round" d="M19 9l-7 7-7-7" />
                        </svg>
                    </summary>
                    <div className="p-6 space-y-10 leading-relaxed">
                        <section className="space-y-3">
                            <div className="flex flex-wrap gap-2">
                                {['Quote Builder', 'PDF Export', 'Branding Tools', 'Pricing Engine', 'Client-Side', 'Privacy-First'].map(badge => (
                                    <span key={badge} className="badge">{badge}</span>
                                ))}
                            </div>
                            <p className="text-lg text-gray-300">
                                The <strong>Solite Quotation Generator</strong> helps freelancers, agencies, and businesses create polished,
                                ready-to-send price quotes with branding, line items, pricing, taxes, discounts, logos, and instant PDF/PNG export ‚Äî
                                all processed <strong>100% offline inside your browser</strong>.
                            </p>
                        </section>
                        <section>
                            <h3 className="text-white text-xl font-semibold mb-2">What You Can Do</h3>
                            <ul className="list-disc list-inside text-gray-400 space-y-2">
                                <li><strong>Add Branding:</strong> Upload your logo and choose an accent color.</li>
                                <li><strong>Line Items:</strong> Add unlimited services or products with descriptions, timelines, and pricing.</li>
                                <li><strong>Smart Pricing Engine:</strong> Auto-calculates discounts, tax, and totals.</li>
                                <li><strong>Client & Company Info:</strong> Complete structured contact and quote metadata.</li>
                                <li><strong>PDF/PNG/JPEG Export:</strong> Print-ready, high-resolution document generation.</li>
                                <li><strong>Local Auto-Save:</strong> All edits are saved in your browser automatically.</li>
                                <li><strong>100% Private:</strong> No servers, no uploads, no tracking. Your data is yours.</li>
                            </ul>
                        </section>
                        <section>
                            <h3 className="text-white text-xl font-semibold mb-2">Ideal For</h3>
                            <div className="grid md:grid-cols-2 gap-4">
                                <ul className="list-disc list-inside text-gray-400 space-y-2">
                                    <li><strong>Freelancers:</strong> Web designers, developers, marketers, consultants.</li>
                                    <li><strong>Agencies:</strong> Create branded quotes for every new client inquiry.</li>
                                    <li><strong>Small Businesses:</strong> Send clear price estimates for products or services.</li>
                                </ul>
                                <ul className="list-disc list-inside text-gray-400 space-y-2">
                                    <li><strong>Contractors:</strong> Provide detailed cost breakdowns for projects.</li>
                                    <li><strong>Sales Teams:</strong> Standardize quotations across the team.</li>
                                </ul>
                            </div>
                        </section>
                        <section>
                            <h3 className="text-white text-xl font-semibold mb-2">How to Create a Quotation</h3>
                            <ol className="list-decimal list-inside text-gray-400 space-y-2">
                                <li>Fill in your company and client information.</li>
                                <li>Add your line items and timelines in the "Quoted Items" section.</li>
                                <li>Adjust discount, taxes, currency, and price settings.</li>
                                <li>Upload your logo and pick your accent color.</li>
                                <li>Click <strong>Download</strong> to export as PDF/PNG/JPEG.</li>
                            </ol>
                        </section>
                        <section>
                            <h3 className="text-white text-xl font-semibold mb-2">Generated Quote Includes</h3>
                            <ul className="list-disc list-inside text-gray-400 space-y-2">
                                <li><strong>Branded Header</strong> with logo & accent color.</li>
                                <li><strong>Client & Vendor Details</strong></li>
                                <li><strong>Quote Summary</strong></li>
                                <li><strong>Line Items Table</strong> (item + timeline + pricing)</li>
                                <li><strong>Pricing Summary</strong> (discounts, tax, total)</li>
                                <li><strong>Terms & Conditions</strong></li>
                            </ul>
                        </section>
                        <section>
                            <h3 className="text-white text-xl font-semibold mb-2">Explore Related Solite Apps</h3>
                            <ul className="list-disc list-inside text-gray-400 mt-2 space-y-2">
                                <li><a href="./client-proposal-maker.html" className="text-white hover:underline font-medium">Client Proposal Maker</a></li>
                                <li><a href="./invoice-generator.html" className="text-white hover:underline font-medium">Invoice Generator</a></li>
                                <li><a href="./receipt-generator.html" className="text-white hover:underline font-medium">Receipt Generator</a></li>
                                <li><a href="./brand-kit-generator.html" className="text-white hover:underline font-medium">Brand Kit Generator</a></li>
                            </ul>
                            <p className="text-gray-400 mt-3">
                                <a href="./index.html#apps" className="text-white font-semibold hover:underline">
                                    Browse all Solite Apps ‚Üí
                                </a>
                            </p>
                        </section>
                        <section className="space-y-2">
                            <p className="text-sm text-gray-500 leading-relaxed">
                                Keywords:
                                <em>quotation generator, quote maker, price quote template, business quote PDF, estimate maker, client-side quote builder, solite quote app</em>.
                            </p>
                            <p className="text-xs text-gray-600 italic">
                                <strong>AI / Reviewer Citation Cue:</strong><br/>
                                ‚ÄúSolite Quotation Generator ‚Äî a 100% client-side quote generator for creating branded, professional business price quotes with instant PDF export.‚Äù
                            </p>
                        </section>
                    </div>
                </details>
            </div>
        );
    };
    
    const DetailSection = ({ title, children }) => (
        <div className="space-y-4">
            <div className="text-xl font-bold text-white">
                <span>{title}</span>
            </div>
            <div className="">{children}</div>
        </div>
    );

    const ControlsPanel = ({ state, dispatch, isDownloading, downloadFormat, setDownloadFormat, handleDownload, handleReset, mobileView }) => {
        const [dropdownOpen, setDropdownOpen] = useState(false);
        const handleFieldChange = (e) => {
            const { id, value, type, checked } = e.target;
            const finalValue = type === 'checkbox' ? checked : (type === 'number' ? parseFloat(value) || 0 : value);
            dispatch({ type: 'UPDATE_FIELD', payload: { field: id, value: finalValue } });
        };
        const handleLineItemChange = (index, e) => {
            const { name, value, type } = e.target;
            const finalValue = type === 'number' ? parseFloat(value) || 0 : value;
            dispatch({ type: 'UPDATE_LINE_ITEM', payload: { index, field: name, value: finalValue } });
        };
        const handleImageUpload = (e, imageType) => {
            const file = e.target.files?.[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    dispatch({ type: 'UPDATE_IMAGE', payload: { imageType, data: { src: event.target?.result } } });
                };
                reader.readAsDataURL(file);
            }
        };
        const removeImage = (imageType) => {
            dispatch({ type: 'UPDATE_IMAGE', payload: { imageType, data: { src: null } } });
            const input = document.getElementById(`${imageType}-upload-input`);
            if (input) input.value = '';
        };

        const { subtotal, total } = useMemo(() => {
            const sub = state.lineItems.reduce((acc, item) => acc + (item.price || 0), 0);
            const discount = state.showDiscount ? sub * (state.discount / 100) : 0;
            const subAfterDiscount = sub - discount;
            const tax = state.showTax ? subAfterDiscount * (state.tax / 100) : 0;
            return { subtotal: sub, total: subAfterDiscount + tax };
        }, [state.lineItems, state.showDiscount, state.discount, state.showTax, state.tax]);
        
        const formatCurrency = (amount) => `${state.currencySymbol}${amount.toFixed(2)}`;
        
        return (
            <div className={`w-full lg:w-[35%] flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 p-6 overflow-auto lg:h-[90vh] flex-col ${mobileView === 'controls' ? 'flex' : 'hidden'} lg:flex`}>
                <div className="space-y-6 overflow-y-auto pr-2 flex-grow">
                    <DetailSection title="Branding">
                        <div className="grid grid-cols-2 gap-4 items-end">
                            <div>
                                {!state.logo.src ? (
                                  <label htmlFor="logo-upload-input" className="bg-transparent border border-gray-600 hover:bg-gray-800 text-white font-medium mb-1 py-3 px-3 rounded-lg flex items-center justify-center gap-2 cursor-pointer w-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
                                    <span>Add Logo</span>
                                  </label>
                                ) : (
                                  <button onClick={() => removeImage('logo')} className="w-full bg-red-800/20 hover:bg-red-800/40 text-red-400 font-medium py-3 px-4 rounded-lg">Remove Logo</button>
                                )}
                                <input type="file" id="logo-upload-input" className="hidden" accept="image/*" onChange={(e) => handleImageUpload(e, 'logo')} />
                            </div>
                            <div>
                                <label htmlFor="accentColor" className="block text-sm font-medium text-gray-300 mb-1">Accent Color</label>
                                <input type="color" id="accentColor" value={state.accentColor} onChange={handleFieldChange} className="w-full h-12 p-0 bg-gray-800 rounded-lg cursor-pointer border border-gray-600" />
                            </div>
                        </div>
                    </DetailSection>

                    <DetailSection title="Quotation Info">
                         <div className="grid grid-cols-2 gap-4">
                            <div><label className="text-sm">Issued On</label><input type="date" id="issuedOn" value={state.issuedOn} onChange={handleFieldChange} className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white"/></div>
                            <div><label className="text-sm">Valid Until</label><input type="date" id="validUntil" value={state.validUntil} onChange={handleFieldChange} className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white"/></div>
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                            <div><label className="text-sm">Currency</label><input type="text" id="currencySymbol" value={state.currencySymbol} onChange={handleFieldChange} className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" /></div>
                            <div><label className="text-sm">Quote ID</label><input type="text" id="quotationId" value={state.quotationId} onChange={handleFieldChange} className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" /></div>
                        </div>
                         <div><label className="text-sm">Prepared By</label><input type="text" id="preparedBy" value={state.preparedBy} onChange={handleFieldChange} placeholder="Your Name / Team" className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/></div>
                    </DetailSection>

                    <DetailSection title="Parties">
                      <div className="grid grid-cols-2 gap-4">
                        <div className="space-y-2">
                            <label className="block text-sm font-medium text-gray-300">From</label>
                            <input type="text" id="fromName" value={state.fromName} onChange={handleFieldChange} placeholder="Your Company" className="block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" />
                            <input type="email" id="fromEmail" value={state.fromEmail} onChange={handleFieldChange} placeholder="your@email.com" className="block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" />
                            <input type="tel" id="fromPhone" value={state.fromPhone} onChange={handleFieldChange} placeholder="Your Phone" className="block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" />
                        </div>
                        <div className="space-y-2">
                            <label className="block text-sm font-medium text-gray-300">To</label>
                            <input type="text" id="toName" value={state.toName} onChange={handleFieldChange} placeholder="Client Name" className="block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" />
                            <input type="email" id="toEmail" value={state.toEmail} onChange={handleFieldChange} placeholder="client@email.com" className="block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" />
                            <input type="tel" id="toPhone" value={state.toPhone} onChange={handleFieldChange} placeholder="Client Phone" className="block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3" />
                        </div>
                      </div>
                    </DetailSection>

                    <DetailSection title="Content">
                      <div>
                          <label htmlFor="quoteSummary" className="block text-sm font-medium text-gray-300">Quote Summary</label>
                          <textarea id="quoteSummary" rows="4" value={state.quoteSummary} onChange={handleFieldChange} placeholder="Briefly describe the quote..." className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"></textarea>
                      </div>
                      <div>
                        <h3 className="text-lg font-semibold text-white mb-2">Quoted Items</h3>
                        <div className="space-y-3">
                          {state.lineItems.map((item, index) => (
                            <div key={item.id} className="space-y-2 bg-gray-800 p-3 rounded-lg border border-gray-700">
                              <div className="flex justify-between items-center">
                                <input type="text" name="title" value={item.title} onChange={(e) => handleLineItemChange(index, e)} placeholder="Item Title" className="w-full bg-gray-700 border border-gray-600 rounded-md py-1 px-2 text-white font-semibold" />
                                <button onClick={() => dispatch({ type: 'REMOVE_LINE_ITEM', payload: { index } })} title="Remove item" className="text-red-400 hover:text-red-300 p-1 ml-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                      <path strokeLinecap="round" strokeLinejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                              </div>
                              <textarea name="description" value={item.description} onChange={(e) => handleLineItemChange(index, e)} placeholder="Item description..." rows="2" className="w-full bg-gray-700 border border-gray-600 rounded-md py-1 px-2 text-white text-sm"></textarea>
                              <div className="grid grid-cols-2 gap-2 text-sm">
                                <input type="text" name="timeline" value={item.timeline} onChange={(e) => handleLineItemChange(index, e)} placeholder="Timeline" className="w-full bg-gray-700 border border-gray-600 rounded-md py-1 px-2 text-white" />
                                <input type="number" name="price" value={item.price} onChange={(e) => handleLineItemChange(index, e)} min="0" placeholder="Price" className="w-full bg-gray-700 border border-gray-600 rounded-md py-1 px-2 text-white text-right" />
                              </div>
                            </div>
                          ))}
                        </div>
                        <button onClick={() => dispatch({ type: 'ADD_LINE_ITEM' })} className="mt-2 bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-3 rounded-lg flex items-center gap-2 text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M12 4v16m8-8H4" /></svg>
                            <span>Add Item</span>
                        </button>
                      </div>
                    </DetailSection>

                    <DetailSection title="Investment">
                        <div className="space-y-3">
                            <div className="flex justify-between items-center"><span className="text-gray-400">Subtotal</span><span>{formatCurrency(subtotal)}</span></div>
                            <div className="flex justify-between items-center gap-4">
                                <div className="flex items-center gap-2 flex-grow"><input type="checkbox" id="showDiscount" checked={state.showDiscount} onChange={handleFieldChange} className="h-4 w-4 rounded" /><input type="text" id="discountLabel" value={state.discountLabel} onChange={handleFieldChange} className="text-gray-400 bg-transparent border-none focus:ring-0 p-0" /></div>
                                <input type="number" id="discount" value={state.discount} onChange={handleFieldChange} min="0" max="100" className="w-24 bg-gray-700 border border-gray-600 rounded-md py-1 px-2 text-right" />
                            </div>
                            <div className="flex justify-between items-center gap-4">
                                <div className="flex items-center gap-2 flex-grow"><input type="checkbox" id="showTax" checked={state.showTax} onChange={handleFieldChange} className="h-4 w-4 rounded" /><input type="text" id="taxLabel" value={state.taxLabel} onChange={handleFieldChange} className="text-gray-400 bg-transparent border-none focus:ring-0 p-0" /></div>
                                <input type="number" id="tax" value={state.tax} onChange={handleFieldChange} min="0" className="w-24 bg-gray-700 border border-gray-600 rounded-md py-1 px-2 text-right" />
                            </div>
                            <div className="flex justify-between items-center font-bold text-lg border-t border-gray-700 pt-2"><span>Total</span><span>{formatCurrency(total)}</span></div>
                        </div>
                    </DetailSection>

                     <DetailSection title="Terms">
                        <div>
                            <label htmlFor="terms" className="block text-sm font-medium text-gray-300">Terms & Conditions</label>
                            <textarea id="terms" rows="3" value={state.terms} onChange={handleFieldChange} placeholder="e.g. 50% payment upfront..." className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"></textarea>
                        </div>
                    </DetailSection>
                </div>
                <div className="mt-auto pt-6 border-t border-gray-700">
                    <div className="grid grid-cols-[1fr,auto,auto] gap-2 items-center">
                        <div className="relative">
                            <button onClick={() => setDropdownOpen(!dropdownOpen)} className="bg-transparent border border-gray-600 hover:bg-gray-800 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-between w-full h-full">
                                <span>{downloadFormat.toUpperCase()}</span>
                                <svg className={`w-5 h-5 transition-transform duration-200 transform ${dropdownOpen ? 'rotate-180' : ''}`} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M19 9l-7 7-7-7" /></svg>
                            </button>
                            {dropdownOpen && (
                            <div className="absolute bottom-full left-0 mb-2 w-full bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50">
                                {['pdf', 'png', 'jpeg'].map(format => (
                                <a href="#" key={format} onClick={(e) => { e.preventDefault(); setDownloadFormat(format); setDropdownOpen(false); }} className="block px-4 py-2 text-white hover:bg-gray-700">{format.toUpperCase()}</a>
                                ))}
                            </div>
                            )}
                        </div>
                        <button onClick={handleDownload} disabled={isDownloading} className="bg-white hover:bg-gray-200 text-black font-semibold py-3 px-4 rounded-lg flex items-center gap-2 justify-center whitespace-nowrap disabled:opacity-50 disabled:cursor-wait">
                           <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                           {isDownloading ? 'Downloading...' : 'Download'}
                        </button>
                        <button onClick={handleReset} className="bg-red-800/40 hover:bg-red-800/60 text-red-400 font-medium p-3 rounded-lg flex-shrink-0" title="Reset Quotation">
                           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" className="bi bi-arrow-repeat" viewBox="0 0 16 16"> <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"></path>  <path fillRule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"></path></svg>
                           <span className="sr-only">Reset</span>
                        </button>
                    </div>
                </div>
            </div>
        );
    };

    const PreviewPanel = forwardRef(({ state, dispatch, mobileView, previewScale }, ref) => {
        const [selectedElement, setSelectedElement] = useState(null);
        useEffect(() => {
            if (typeof window.interact === 'undefined') return;
            const handler = (event) => {
                const target = event.target;
                const imageType = target.dataset.imageType;
                if (!imageType) return;
                const { x, y } = state[imageType];
                const newX = x + event.dx / previewScale;
                const newY = y + event.dy / previewScale;
                dispatch({ type: 'UPDATE_IMAGE', payload: { imageType, data: { x: newX, y: newY } } });
            };
            const resizeHandler = (event) => {
                const target = event.target;
                const imageType = target.dataset.imageType;
                if (!imageType) return;
                const { x, y } = state[imageType];
                const newX = x + event.deltaRect.left / previewScale;
                const newY = y + event.deltaRect.top / previewScale;
                dispatch({
                    type: 'UPDATE_IMAGE',
                    payload: { imageType, data: { x: newX, y: newY, width: event.rect.width / previewScale, height: event.rect.height / previewScale } },
                });
            };
            window.interact('.resizable-image').draggable({ listeners: { move: handler } }).resizable({
                edges: { left: true, right: true, bottom: true, top: true },
                listeners: { move: resizeHandler },
            });
            return () => { if(window.interact) window.interact('.resizable-image').unset(); };
        }, [dispatch, state.logo, previewScale]);

        const handleSelect = (e, imageType) => {
            e.stopPropagation();
            setSelectedElement(imageType);
        };
        const { subtotal, discountAmount, taxAmount, total } = useMemo(() => {
            const sub = state.lineItems.reduce((acc, item) => acc + (item.price || 0), 0);
            const discount = state.showDiscount ? sub * (state.discount / 100) : 0;
            const subAfterDiscount = sub - discount;
            const tax = state.showTax ? subAfterDiscount * (state.tax / 100) : 0;
            return { subtotal: sub, discountAmount: discount, taxAmount: tax, total: subAfterDiscount + tax };
        }, [state.lineItems, state.showDiscount, state.discount, state.showTax, state.tax]);
        
        const formatCurrency = (amount) => `${state.currencySymbol}${amount.toFixed(2)}`;
        const hasInvestment = state.lineItems.some(item => item.price > 0) || state.showDiscount || state.showTax;

        return (
            <div
                ref={ref.containerRef}
                className={`flex-1 bg-gray-900 rounded-xl border border-gray-800 relative hidden lg:grid lg:place-items-top lg:p-12 overflow-auto lg:w-[65%] lg:h-[90vh] ${mobileView === 'preview' ? 'grid' : 'hidden'} lg:grid`}
                onClick={() => setSelectedElement(null)}
            >
                <div
                    ref={ref.proposalRef}
                    style={{ transform: `scale(${previewScale})`, transformOrigin: 'top center' }}
                    className="aspect-[1/1.414] w-[816px] shadow-2xl relative overflow-hidden bg-white text-black font-sans p-10 text-sm transition-transform duration-200"
                >
                    <div className="relative z-10 h-full flex flex-col">
                        <header className="flex justify-between items-start mb-6">
                            <div>
                                {state.logo.src && (
                                <div
                                    data-image-type="logo"
                                    className={`resizable-image absolute cursor-move ${selectedElement === 'logo' ? 'image-selected' : ''}`}
                                    style={{ width: `${state.logo.width}px`, height: `${state.logo.height}px`, transform: `translate(${state.logo.x}px, ${state.logo.y}px)`, opacity: state.logo.opacity }}
                                    onClick={(e) => handleSelect(e, 'logo')}
                                > 
                                    <div
                                        className="w-full h-full pointer-events-none"
                                        style={{
                                            backgroundImage: `url(${state.logo.src})`,
                                            backgroundSize: 'contain',
                                            backgroundRepeat: 'no-repeat',
                                            backgroundPosition: 'center',
                                        }}
                                    ></div>
                                </div>
                                )}
                                <h2 className="font-bold text-2xl" style={{ paddingTop: state.logo.src ? `${state.logo.height + 5}px` : '0' }}>{state.fromName}</h2>
                            </div>
                            <div className="text-right">
                                <h1 className="font-bold text-4xl uppercase tracking-wider" style={{ color: state.accentColor }}>QUOTATION</h1>
                                <p className="font-semibold text-gray-600 text-xs mt-1">{state.quotationId}</p>
                            </div>
                        </header>
                        <div className="grid grid-cols-2 gap-4 mb-6 text-xs">
                            <div>
                                <h3 className="font-bold text-gray-500 uppercase tracking-wider">From</h3>
                                <p className="font-semibold">{state.fromName}</p>
                                <p>{state.fromEmail}</p>
                                <p>{state.fromPhone}</p>
                            </div>
                             <div className="text-right">
                                <h3 className="font-bold text-gray-500 uppercase tracking-wider">To</h3>
                                <p className="font-semibold">{state.toName}</p>
                                <p>{state.toEmail}</p>
                                <p>{state.toPhone}</p>
                            </div>
                        </div>
                         <div className="grid grid-cols-3 gap-4 mb-6 text-xs">
                            {state.issuedOn && <div><h3 className="font-bold text-gray-500 uppercase tracking-wider mb-1">Issued On</h3><p>{state.issuedOn}</p></div>}
                            {state.validUntil && <div><h3 className="font-bold text-gray-500 uppercase tracking-wider mb-1">Valid Until</h3><p>{state.validUntil}</p></div>}
                            {state.preparedBy && <div><h3 className="font-bold text-gray-500 uppercase tracking-wider mb-1">Prepared By</h3><p>{state.preparedBy}</p></div>}
                        </div>
                         
                        {state.quoteSummary && <div className="mb-6">
                            <h3 className="font-bold text-gray-500 uppercase tracking-wider text-xs mb-1">Summary</h3>
                            <p className="whitespace-pre-line text-sm">{state.quoteSummary}</p>
                        </div>}
                        
                        <h3 className="font-bold text-gray-500 uppercase tracking-wider text-xs mb-1">Quoted Items</h3>
                        <table className="w-full mb-6 text-sm">
                            <thead>
                                <tr style={{ borderBottom: `2px solid ${state.accentColor}` }}>
                                    <th className="text-left font-bold p-2" style={{ color: state.accentColor }}>Item</th>
                                    <th className="text-center font-bold p-2" style={{ color: state.accentColor }}>Timeline</th>
                                    <th className="text-right font-bold p-2" style={{ color: state.accentColor }}>Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                {state.lineItems.map(item => (
                                    <tr key={item.id} className="border-b border-gray-200">
                                        <td className="py-2 pr-2">
                                            <p className="font-semibold">{item.title}</p>
                                            <p className="text-xs text-gray-700">{item.description}</p>
                                        </td>
                                        <td className="py-2 px-2 text-center text-xs">{item.timeline}</td>
                                        <td className="py-2 pl-2 text-right">{formatCurrency(item.price)}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>

                        {hasInvestment && <div className="flex justify-end mb-6">
                            <div className="w-1/2">
                                <div className="flex justify-between py-1 text-sm"><span>Subtotal:</span> <span>{formatCurrency(subtotal)}</span></div>
                                {state.showDiscount && <div className="flex justify-between py-1 text-sm"><span>{state.discountLabel}:</span> <span>-{formatCurrency(discountAmount)}</span></div>}
                                {state.showTax && <div className="flex justify-between py-1 text-sm"><span>{state.taxLabel}:</span> <span>{formatCurrency(taxAmount)}</span></div>}
                                <div className="flex justify-between py-2 mt-2 font-bold border-t-2 border-gray-800"><span className="text-lg">Total:</span> <span className="text-lg">{formatCurrency(total)}</span></div>
                            </div>
                        </div>}

                        <div className="mt-auto pt-4">
                            {state.terms && <div><h3 className="font-bold text-gray-500 text-xs uppercase tracking-wider mb-1">Terms & Conditions</h3><p className="text-xs whitespace-pre-line">{state.terms}</p></div>}
                        </div>
                    </div>
                </div>
            </div>
        );
    });

    const MobileNav = ({ mobileView, setMobileView }) => (
      <div className="sticky bottom-0 left-0 w-full lg:hidden bg-gray-800 border-t border-gray-700 z-40">
        <div className="flex justify-around items-center h-16 py-1">
          <button onClick={() => setMobileView('controls')} className={`flex flex-col items-center justify-center text-xs w-1/2 gap-1 ${mobileView === 'controls' ? 'text-white' : 'text-gray-400'}`}>
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
            <span>Edit</span>
          </button>
          <button onClick={() => setMobileView('preview')} className={`flex flex-col items-center justify-center text-xs w-1/2 gap-1 ${mobileView === 'preview' ? 'text-white' : 'text-gray-400'}`}>
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
            <span>Preview</span>
          </button>
        </div>
      </div>
    );
    
    // --- Main App Component ---
    const App = () => {
      const [state, dispatch] = useReducer(quoteReducer, INITIAL_STATE, (initial) => {
        try {
          const storedState = localStorage.getItem('quotationState');
          return storedState ? { ...initial, ...JSON.parse(storedState) } : initial;
        } catch (e) {
          return initial;
        }
      });
      useEffect(() => { localStorage.setItem('quotationState', JSON.stringify(state)); }, [state]);

      const [mobileView, setMobileView] = useState('controls');
      const [isDownloading, setIsDownloading] = useState(false);
      const [downloadFormat, setDownloadFormat] = useState('pdf');
      const [previewScale, setPreviewScale] = useState(1);
      
      const proposalRef = useRef(null);
      const previewContainerRef = useRef(null);

      const updateScale = useCallback(() => {
        if (previewContainerRef.current && proposalRef.current) {
          const panelWidth = previewContainerRef.current.clientWidth;
          const proposalWidth = 816;
          if (panelWidth < proposalWidth) {
            const scale = (panelWidth - 16) / proposalWidth;
            setPreviewScale(scale);
          } else {
            setPreviewScale(1);
          }
        }
      }, []);

      useEffect(() => {
        updateScale();
        window.addEventListener('resize', updateScale);
        return () => window.removeEventListener('resize', updateScale);
      }, [updateScale]);

      const handleDownload = useCallback(async () => {
        if (!proposalRef.current || isDownloading) return;
        setIsDownloading(true);
        
        const proposalEl = proposalRef.current;
        const originalTransform = proposalEl.style.transform;
        proposalEl.style.transform = '';
        
        await new Promise(resolve => setTimeout(resolve, 50));
        
        try {
          const canvas = await html2canvas(proposalEl, { scale: 3, useCORS: true, backgroundColor: '#ffffff' });
          const filename = `quotation-for-${state.toName.replace(/\s/g, '-') || 'client'}.${downloadFormat}`;
          
          if (downloadFormat === 'pdf') {
            const { jsPDF } = window.jspdf;
            const imgData = canvas.toDataURL('image/png', 1.0);
            const pdf = new jsPDF({ orientation: 'portrait', unit: 'px', format: [canvas.width, canvas.height] });
            pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
            pdf.save(filename);
          } else {
            const link = document.createElement('a');
            link.href = canvas.toDataURL(`image/${downloadFormat}`, 1.0);
            link.download = filename;
            link.click();
          }
        } catch (error) {
          console.error("Download failed:", error);
        } finally {
          proposalEl.style.transform = originalTransform;
          setIsDownloading(false);
        }
      }, [isDownloading, state.toName, downloadFormat]);

      const handleReset = () => {
        if (window.confirm('Are you sure you want to reset all fields?')) {
          dispatch({ type: 'RESET_STATE' });
        }
      };

      return (
        <div className="bg-black text-gray-200 flex flex-col min-h-screen font-sans">
          <Header />
          <main className="flex-grow flex relative">
            <div className="flex-grow w-full p-3 pb-20 lg:pb-3 flex flex-col lg:flex-row gap-4 lg:w-[80%]">
              <ControlsPanel
                state={state}
                dispatch={dispatch}
                isDownloading={isDownloading}
                downloadFormat={downloadFormat}
                setDownloadFormat={setDownloadFormat}
                handleDownload={handleDownload}
                handleReset={handleReset}
                mobileView={mobileView}
              />
              <PreviewPanel
                ref={{ proposalRef: proposalRef, containerRef: previewContainerRef }}
                state={state}
                dispatch={dispatch}
                mobileView={mobileView}
                previewScale={previewScale}
              />
            </div>
            <aside className="w-[20%] flex-shrink-0 p-3 border-l border-gray-800 hidden lg:block lg:sticky lg:top-24 lg:self-start">
              <div className="h-full bg-gray-800/50 rounded-lg flex items-center justify-center text-gray-400">Ad Area</div>
            </aside>
          </main>
          <MobileNav mobileView={mobileView} setMobileView={setMobileView} />
          <SeoBlock />
          <Footer />
        </div>
      );
    };

    // --- Mount App ---
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>