<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO & Social Sharing Meta Tags -->
    <title>Color Palette Generator | Solite</title>
    <meta name="description" content="Instantly generate beautiful, harmonious color palettes for your design projects. Lock colors, adjust shades, and export your palette. Free and private.">
    <link rel="canonical" href="https://solite.in/color-palette-generator.html" />
    <meta name="robots" content="index, follow">

    <!-- Open Graph for social + AI -->
    <meta property="og:title" content="Color Palette Generator | Solite">
    <meta property="og:description" content="Free browser-based color palette generator. No login, no ads.">
    <meta property="og:url" content="https://solite.in/color-palette-generator.html">
    <meta property="og:site_name" content="Solite App Suite">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://solite.in/assets/color-palette-generator-thumbnail.png">

    <!-- AdSense Meta Tag -->
    <meta name="google-adsense-account" content="ca-pub-6623613371208692">

    <!-- Vercel Analytics -->
    <script>
        window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
    
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Color Palette Generator | Solite",
      "url": "https://solite.in/color-palette-generator.html",
      "description": "A free, client-side tool to generate, customize, and export color palettes.",
      "applicationCategory": "DesignApplication",
      "featureList": [
        "Generate analogous, monochromatic, triadic, and complementary palettes",
        "Lock individual colors to preserve them during generation",
        "View shades and tints for each color",
        "Copy HEX codes for individual colors",
        "Export palettes as URL, PNG, SVG, or CSS variables",
        "Client-side processing for privacy"
      ],
      "operatingSystem": "All",
      "browserRequirements": "Requires a modern web browser with JavaScript enabled.",
      "provider": {
        "@type": "Organization",
        "name": "Solite",
        "url": "https://solite.in"
      }
    }
    </script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <style>
        #toast {
            transform: translateY(-150%);
            transition: transform 0.3s ease-in-out;
        }
        #toast.show {
            transform: translateY(2rem);
        }
        /* Custom Scrollbar for Webkit browsers */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #111827; /* gray-900 */
        }
        ::-webkit-scrollbar-thumb {
            background-color: #4b5563; /* gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #6b7280; /* gray-500 */
        }
        /* Custom Scrollbar for Firefox */
        html { scrollbar-color: #4b5563 #111827; }
    </style>
</head>
<body class="bg-black text-gray-200 flex flex-col min-h-screen font-sans">
    
    <!-- Header -->
    <header class="p-3 sm:p-4 w-full flex-shrink-0 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-xl z-30 border-b border-gray-200 dark:border-gray-800">
        <div class="flex justify-between items-center px-4 sm:px-6">
            <a href="index.html" class="flex items-center space-x-3" aria-label="Solite Homepage">
                 <svg class="h-8 w-8 text-gray-900 dark:text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5L12 2z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 7l10 5 10-5"/>
                </svg>
                <span class="text-xl font-bold text-gray-900 dark:text-white uppercase tracking-wider">Solite</span>
                <span class="h-6 w-px bg-gray-300 dark:bg-gray-700"></span>
                <span class="text-lg font-semibold text-gray-600 dark:text-gray-400">Color Palette Generator</span>
            </a>
             <div class="flex items-center space-x-4">
                <a href="index.html#apps" class="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-1.5">
                    <span>Free Tools</span>
                    <svg class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5-5 5" /></svg>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow flex h-screen-minus-header">
        <div class="flex-grow w-full lg:w-[80%] p-3 flex flex-col lg:flex-row gap-4">
            <h1 class="sr-only">Color Palette Generator</h1>
            <!-- Palette Display -->
            <div id="palette-container" class="flex-1 flex flex-col lg:flex-row bg-gray-900 rounded-xl border border-gray-800 overflow-hidden">
                <!-- Color columns will be injected here -->
            </div>

            <!-- Controls Panel -->
            <div id="controls-panel" class="w-full lg:w-96 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 p-6 space-y-6">
                <h3 class="text-xl font-bold text-white">Color Palette Generator</h3>
                <div class="space-y-2">
                    <label for="palette-type-btn" class="font-medium">Palette Type</label>
                    <div class="relative">
                        <button id="palette-type-btn" class="bg-gray-800 border border-gray-700 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-between w-full">
                            <span id="palette-type-text">Analogous</span>
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="palette-type-dropdown" class="hidden absolute left-0 mt-2 w-full bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50">
                            <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-value="analogous">Analogous</a>
                            <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-value="monochromatic">Monochromatic</a>
                            <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-value="triadic">Triadic</a>
                            <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-value="complementary">Complementary</a>
                        </div>
                    </div>
                </div>
                <button id="generate-btn" class="w-full bg-white hover:bg-gray-200 text-black font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2">Generate Palette</button>
                <div class="relative">
                    <button id="export-btn" class="w-full bg-gray-700 hover:bg-gray-600 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-2">
                        <span>Export Palette</span>
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="export-dropdown" class="hidden absolute bottom-full mb-2 w-full bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50">
                        <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-export="url">Copy URL</a>
                        <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-export="png">Download PNG</a>
                        <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-export="svg">Download SVG</a>
                        <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-export="css">Copy CSS</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ad Sidebar -->
        <aside class="w-[20%] flex-shrink-0 p-3 border-l border-gray-800 hidden lg:block">
            <div class="h-full bg-gray-800/50 rounded-lg flex items-center justify-center text-gray-400">
                Ad Area
            </div>
        </aside>
    </main>

    <footer class="p-4 w-full flex-shrink-0 border-t border-gray-200 dark:border-gray-700/50">
        <div class="flex flex-col sm:flex-row justify-between items-center text-gray-500 dark:text-gray-400 text-sm">
             <div class="flex items-center space-x-3 mb-4 sm:mb-0">
                <svg class="h-6 w-6 text-gray-400 dark:text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z"/><path d="M2 17l10 5 10-5"/><path d="M2 7l10 5 10-5"/></svg>
                <span>&copy; 2024 Solite. All Rights Reserved.</span>
            </div>
            <div class="flex items-center space-x-4">
                <a href="./privacy.html" class="hover:text-gray-900 dark:hover:text-white transition-colors">Privacy Policy</a>
                <a href="./terms.html" class="hover:text-gray-900 dark:hover:text-white transition-colors">Terms</a>
                <a href="mailto:support@solite.com" class="hover:text-gray-900 dark:hover:text-white transition-colors">Contact</a>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-0 left-1/2 -translate-x-1/2 bg-white text-black font-semibold py-2 px-5 rounded-b-lg shadow-lg z-50">Copied!</div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const paletteContainer = document.getElementById('palette-container');
            const generateBtn = document.getElementById('generate-btn');
            const toast = document.getElementById('toast');
            const PALETTE_SIZE = 5;
            let paletteType = 'analogous';

            let lockedColors = new Array(PALETTE_SIZE).fill(null);

            function randomColor() {
                return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
            }

            function hexToHsl(hex) {
                const {r, g, b} = hexToRgb(hex);
                const r_ = r / 255, g_ = g / 255, b_ = b / 255;
                const max = Math.max(r_, g_, b_), min = Math.min(r_, g_, b_);
                let h, s, l = (max + min) / 2;
                if (max === min) { h = s = 0; } 
                else {
                    const d = max - min;
                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                    switch (max) {
                        case r_: h = (g_ - b_) / d + (g_ < b_ ? 6 : 0); break;
                        case g_: h = (b_ - r_) / d + 2; break;
                        case b_: h = (r_ - g_) / d + 4; break;
                    }
                    h /= 6;
                }
                return { h: h * 360, s: s * 100, l: l * 100 };
            }

            function hslToHex(h, s, l) {
                s /= 100; l /= 100;
                const k = n => (n + h / 30) % 12;
                const a = s * Math.min(l, 1 - l);
                const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, 9 - k(n), 1));
                const toHex = x => Math.round(x * 255).toString(16).padStart(2, '0');
                return `#${toHex(f(0))}${toHex(f(8))}${toHex(f(4))}`;
            }

            function generateHarmoniousPalette(baseColor, type) {
                const {h, s, l} = hexToHsl(baseColor);
                const palette = [baseColor];
                if (type === 'analogous') for (let i = 1; i < 5; i++) palette.push(hslToHex((h + i * 30) % 360, s, l));
                else if (type === 'monochromatic') for (let i = 1; i < 5; i++) palette.push(hslToHex(h, s, l + i * 10 > 95 ? 95 : l + i * 10));
                else if (type === 'triadic') for (let i = 1; i < 3; i++) { palette.push(hslToHex((h + i * 120) % 360, s, l)); palette.push(hslToHex((h + i * 120) % 360, s - 20, l + 10)); }
                else if (type === 'complementary') { palette.push(hslToHex((h + 180) % 360, s, l)); palette.push(hslToHex(h, s - 30, l + 20)); palette.push(hslToHex((h + 180) % 360, s - 30, l + 20)); }
                return palette.slice(0, 5);
            }

            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16) } : null;
            }

            function rgbToHex(r, g, b) {
                return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
            }

            function generateShades(hex, count = 5) {
                const rgb = hexToRgb(hex);
                const shades = Array.from({ length: count }, (_, i) => {
                    const factor = 1 - (i + 1) / (count + 1);
                    return rgbToHex(Math.round(rgb.r * factor), Math.round(rgb.g * factor), Math.round(rgb.b * factor));
                });
                const tints = Array.from({ length: count }, (_, i) => {
                    const factor = i / (count + 1);
                    return rgbToHex(Math.round(rgb.r + (255 - rgb.r) * factor), Math.round(rgb.g + (255 - rgb.g) * factor), Math.round(rgb.b + (255 - rgb.b) * factor));
                });
                return [...tints.reverse(), hex, ...shades];
            }

            function getTextColor(hex) {
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);
                const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
                return luminance > 0.5 ? 'text-black' : 'text-white';
            }

            function getLuminance(r, g, b) {
                const a = [r, g, b].map(v => { v /= 255; return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4); });
                return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
            }

            function getContrast(rgb1, rgb2) {
                const lum1 = getLuminance(rgb1.r, rgb1.g, rgb1.b);
                const lum2 = getLuminance(rgb2.r, rgb2.g, rgb2.b);
                const brightest = Math.max(lum1, lum2);
                const darkest = Math.min(lum1, lum2);
                return (brightest + 0.05) / (darkest + 0.05);
            }


            function showToast(message = 'Copied!') {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                    if (message !== 'Copied!') setTimeout(() => { toast.textContent = 'Copied!'; }, 300);
                }, 1500);
            }

            function generatePalette() {
                const urlParams = new URLSearchParams(window.location.search);
                const colorsFromUrl = urlParams.get('colors')?.split('-');

                let baseColor = lockedColors.find(c => c) || randomColor();
                const newPalette = generateHarmoniousPalette(baseColor, paletteType);

                paletteContainer.innerHTML = '';
                for (let i = 0; i < PALETTE_SIZE; i++) {
                    let color;
                    if (colorsFromUrl && colorsFromUrl[i] && !lockedColors.some(c => c)) {
                        color = '#' + colorsFromUrl[i];
                    } else if (lockedColors[i]) {
                        color = lockedColors[i];
                    } else {
                        const unlockedIndex = lockedColors.slice(0, i).filter(c => !c).length;
                        color = newPalette[unlockedIndex] || randomColor();
                    }
                    const textColorClass = getTextColor(color);
                    const colorRgb = hexToRgb(color);
                    const contrastWhite = getContrast(colorRgb, {r: 255, g: 255, b: 255});
                    const contrastBlack = getContrast(colorRgb, {r: 0, g: 0, b: 0});
                    const passWhite = contrastWhite >= 4.5;
                    const passBlack = contrastBlack >= 4.5;

                    const column = document.createElement('div');
                    column.className = 'color-column flex-1 flex flex-col items-center justify-center p-4 relative group min-h-[120px]';
                    column.style.backgroundColor = color;
                    column.dataset.index = i;
                    column.dataset.color = color;
                    column.dataset.locked = lockedColors[i] !== null;
                    
                    column.innerHTML = `
                        <div class="text-center">
                            <h2 class="text-2xl font-bold ${textColorClass} cursor-pointer" title="Click to copy">${color.toUpperCase()}</h2>
                            <div class="contrast-info mt-4 text-xs font-mono ${textColorClass} opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="flex justify-between items-center gap-4"><span>vs White</span> <span class="font-bold ${passWhite ? 'text-green-300' : 'text-red-300'}">${passWhite ? 'Pass' : 'Fail'}</span> <span>${contrastWhite.toFixed(2)}</span></div>
                                <div class="flex justify-between items-center gap-4"><span>vs Black</span> <span class="font-bold ${passBlack ? 'text-green-300' : 'text-red-300'}">${passBlack ? 'Pass' : 'Fail'}</span> <span>${contrastBlack.toFixed(2)}</span></div>
                            </div>
                        </div>
                        <div class="actions absolute bottom-4 left-1/2 -translate-x-1/2 flex flex-wrap justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity w-32">
                            <button class="picker-btn bg-black/20 backdrop-blur-sm p-3 rounded-full ${textColorClass} hover:scale-110 transition-transform" title="Adjust Color">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 7l6 6" /><path d="M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z" />
                                </svg>
                            </button>
                            <button class="shades-btn bg-black/20 backdrop-blur-sm p-3 rounded-full ${textColorClass} hover:scale-110 transition-transform" title="View Shades">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a4 4 0 014-4h10a4 4 0 014 4v12a4 4 0 01-4 4H7zM12 9a3 3 0 100-6 3 3 0 000 6z" /></svg>
                            </button>
                            <button class="copy-btn bg-black/20 backdrop-blur-sm p-3 rounded-full ${textColorClass} hover:scale-110 transition-transform" title="Copy Hex">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                            </button>
                            <button class="lock-btn bg-black/20 backdrop-blur-sm p-3 rounded-full ${textColorClass} hover:scale-110 transition-transform" title="Lock Color">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="${lockedColors[i] ? 'M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z' : 'M8 11V7a4 4 0 118 0m-4 8v3m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z'}" />
                                </svg>
                            </button>
                        </div>
                        <input type="color" class="color-picker-input hidden" value="${color}">
                    `;
                    paletteContainer.appendChild(column);
                }
                // Clear URL params after first load
                if (colorsFromUrl) {
                    window.history.replaceState({}, document.title, window.location.pathname);
                }

                document.querySelectorAll('.copy-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const color = btn.closest('.color-column').dataset.color;
                        navigator.clipboard.writeText(color).then(showToast);
                    });
                });

                document.querySelectorAll('.lock-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const column = btn.closest('.color-column');
                        const index = parseInt(column.dataset.index);
                        const isLocked = column.dataset.locked === 'true';
                        
                        if (isLocked) {
                            lockedColors[index] = null;
                        } else {
                            lockedColors[index] = column.dataset.color;
                        }
                        generatePalette();
                    });
                });

                document.querySelectorAll('.color-column h2').forEach(h2 => {
                    h2.addEventListener('click', (e) => {
                        e.stopPropagation();
                        navigator.clipboard.writeText(h2.textContent).then(showToast);
                    });
                });

                document.querySelectorAll('.shades-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const column = btn.closest('.color-column');
                        const color = column.dataset.color;
                        const shades = generateShades(color);
                        
                        paletteContainer.innerHTML = '';
                        paletteContainer.className = 'flex-1 grid grid-cols-11 bg-gray-900 rounded-xl border border-gray-800 overflow-hidden';

                        shades.forEach(shade => {
                            const shadeBox = document.createElement('div');
                            const textColorClass = getTextColor(shade);
                            shadeBox.className = `flex items-center justify-center cursor-pointer ${textColorClass} transition-transform hover:scale-110 bg-gray-900`;
                            shadeBox.style.backgroundColor = shade;
                            shadeBox.style.backgroundColor = shade;
                            shadeBox.innerHTML = `<span class="font-mono text-sm opacity-0 hover:opacity-100 transition-opacity">${shade}</span>`;
                            shadeBox.addEventListener('click', () => navigator.clipboard.writeText(shade).then(showToast));
                            paletteContainer.appendChild(shadeBox);
                        });

                        generateBtn.textContent = 'Back to Palette';
                        generateBtn.onclick = (e) => {
                            e.stopPropagation();
                            paletteContainer.className = 'flex-1 flex flex-col lg:flex-row bg-gray-900 rounded-xl border border-gray-800 overflow-hidden';
                            generateBtn.textContent = 'Generate Palette';
                            generateBtn.onclick = null; // Remove the temporary handler
                            generatePalette();
                        };
                    });
                });

                document.querySelectorAll('.picker-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const input = btn.closest('.color-column').querySelector('.color-picker-input');
                        input.click();
                    });
                });

                document.querySelectorAll('.color-picker-input').forEach(input => {
                    input.addEventListener('input', (e) => {
                        const newColor = e.target.value;
                        const column = e.target.closest('.color-column');
                        const index = parseInt(column.dataset.index);
                        
                        column.style.backgroundColor = newColor;
                        column.dataset.color = newColor;
                        column.querySelector('h2').textContent = newColor.toUpperCase();
                        
                        const newTextColor = getTextColor(newColor);
                        column.querySelectorAll('.actions button, h2').forEach(el => {
                            el.classList.remove('text-white', 'text-black');
                            el.classList.add(newTextColor);
                        });

                        if (lockedColors[index]) {
                            lockedColors[index] = newColor;
                        }
                    });
                });
            }

            generateBtn.addEventListener('click', () => {
                generatePalette();
                showToast('New palette generated!');
            });
            document.body.addEventListener('keyup', (e) => {
                if (e.code === 'Space' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                    generateBtn.click();
                }
            });

            function setupPaletteTypeDropdown() {
                const btn = document.getElementById('palette-type-btn');
                const dropdown = document.getElementById('palette-type-dropdown');
                const textEl = document.getElementById('palette-type-text');
                btn.addEventListener('click', (e) => { e.stopPropagation(); dropdown.classList.toggle('hidden'); });
                dropdown.addEventListener('click', (e) => {
                    if (e.target.tagName === 'A') {
                        e.preventDefault();
                        paletteType = e.target.dataset.value;
                        textEl.textContent = e.target.textContent;
                        dropdown.classList.add('hidden');
                        generatePalette();
                    }
                });
            }

            function exportPalette(format) {
                const colors = Array.from(document.querySelectorAll('.color-column')).map(c => c.dataset.color);
                const colorString = colors.map(c => c.substring(1)).join('-');

                if (format === 'url') {
                    const url = `${window.location.origin}${window.location.pathname}?colors=${colorString}`;
                    navigator.clipboard.writeText(url).then(() => showToast('URL copied to clipboard!'));
                } else if (format === 'css') {
                    const css = `:root {\n${colors.map((c, i) => `  --color-${i+1}: ${c};`).join('\n')}\n}`;
                    navigator.clipboard.writeText(css).then(() => showToast('CSS variables copied!'));
                } else if (format === 'png') {
                    const canvas = document.createElement('canvas');
                    const size = 200;
                    canvas.width = size * colors.length;
                    canvas.height = size * 1.5;
                    const ctx = canvas.getContext('2d');
                    colors.forEach((color, i) => {
                        ctx.fillStyle = color;
                        ctx.fillRect(i * size, 0, size, size * 1.5);
                    });
                    const link = document.createElement('a');
                    link.download = `solite-palette-${colorString}.png`;
                    link.href = canvas.toDataURL();
                    link.click();
                } else if (format === 'svg') {
                    const size = 200;
                    const svgContent = colors.map((color, i) => `<rect x="${i * size}" y="0" width="${size}" height="${size * 1.5}" fill="${color}" />`).join('');
                    const svg = `<svg width="${size * colors.length}" height="${size * 1.5}" xmlns="http://www.w3.org/2000/svg">${svgContent}</svg>`;
                    const blob = new Blob([svg], {type: 'image/svg+xml'});
                    const link = document.createElement('a');
                    link.download = `solite-palette-${colorString}.svg`;
                    link.href = URL.createObjectURL(blob);
                    link.click();
                    URL.revokeObjectURL(link.href);
                }
            }

            function setupExportDropdown() {
                const btn = document.getElementById('export-btn');
                const dropdown = document.getElementById('export-dropdown');
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    dropdown.classList.toggle('hidden');
                });
                dropdown.addEventListener('click', (e) => {
                    if (e.target.tagName === 'A') {
                        e.preventDefault();
                        exportPalette(e.target.dataset.export);
                        dropdown.classList.add('hidden');
                    }
                });
            }

            generatePalette();
            setupPaletteTypeDropdown();
            setupExportDropdown();

            document.addEventListener('click', () => {
                document.getElementById('palette-type-dropdown').classList.add('hidden');
                document.getElementById('export-dropdown').classList.add('hidden');
            });
        });
    </script>
</body>
</html>