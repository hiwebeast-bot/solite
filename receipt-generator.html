
<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<!-- üß¨ SOLITE GEN-5.9 BALANCED HEAD / Receipt Generator ‚Äî CLASSIC LAYOUT EDITION -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- üß† SEO + AI DISCOVERY -->
  <title>Free Printable Receipt Generator | A4 & WhatsApp Share | Solite</title>
  <meta name="description" content="Quickly generate, customize, and download simple A4-ready receipts. Share directly via WhatsApp. Perfect for shopkeepers and small businesses needing printable bills. 100% private." />
  <meta name="keywords" content="receipt generator, printable receipt, A4 receipt, free bill maker, online receipt creator, share on whatsapp, simple bill template, solite, privacy-first tool" />
  <link rel="canonical" href="https://solite.in/receipt-generator.html" />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <meta name="author" content="Solite" />
  <meta name="publisher" content="Solite" />
  <meta name="application-name" content="Receipt Generator - Solite" />
  <meta name="theme-color" content="#000000" />
  <meta name="color-scheme" content="dark light" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta name="format-detection" content="telephone=no,email=no,address=no" />

  <!-- üåç OPEN GRAPH / TWITTER / AI DISCOVERY -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Solite" />
  <meta property="og:title" content="Free Printable A4 Receipt Generator with WhatsApp Share | Solite" />
  <meta property="og:description" content="Easily create and download simple, print-ready A4 receipts, then share them directly via WhatsApp. Private, mobile-ready, and completely free." />
  <meta property="og:url" content="https://solite.in/receipt-generator.html" />
  <meta property="og:image" content="https://solite.in/assets/receipt-generator-og.png" />
  <meta property="og:image:alt" content="Solite Receipt Generator Tool with A4 print and WhatsApp Share features" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="en_US" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Free A4 Receipt Generator with WhatsApp Share | Solite" />
  <meta name="twitter:description" content="Build and download A4-ready receipts and share via WhatsApp in seconds. 100% private and mobile-first tool by Solite." />
  <meta name="twitter:image" content="https://solite.in/assets/receipt-generator-og.png" />

  <!-- üí∞ GOOGLE ADSENSE -->
  <meta name="google-adsense-account" content="ca-pub-6623613371208692" />
  
  <!--  üìä Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-71L3MYLBH0"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-71L3MYLBH0');
  </script>
  <!--  End Google tag (gtag.js) -->
  
  <!-- ‚öôÔ∏è CORE LIBRARIES -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { fontFamily: { sans: ['Inter','sans-serif'], mono: ['Roboto Mono', 'monospace'] } } }
    };
  </script>

  <!-- üî§ NON-BLOCKING FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap"></noscript>

  <!-- ü™Ñ FAVICONS -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png" />

  <!-- üß¨ GEN-5.9 SOLITE SCHEMA GRAPH -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://solite.in/#organization",
        "name": "Solite",
        "url": "https://solite.in",
        "logo": "https://solite.in/assets/apple-touch-icon.png",
        "description": "Solite provides free, privacy-first browser-based tools for business and development."
      },
      {
        "@type": "WebApplication",
        "@id": "https://solite.in/receipt-generator.html#app",
        "name": "A4 Receipt Generator with WhatsApp Share | Solite",
        "url": "https://solite.in/receipt-generator.html",
        "applicationCategory": "BusinessApplication",
        "description": "A free, client-side tool to create simple, A4 print-ready receipts and bills with one-click WhatsApp sharing, real-time calculations, and PDF export.",
        "featureList": [
          "Create unlimited receipts",
          "A4 Print-Friendly Layout",
          "Share receipts via WhatsApp",
          "Automatic calculation of subtotal, tax, and total",
          "Specify payment method",
          "Upload custom company logo",
          "Download as PDF, PNG, or JPG",
          "100% private and browser-based"
        ],
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "provider": { "@id": "https://solite.in/#organization" }
      },
      {
        "@type": "FAQPage",
        "@id": "https://solite.in/receipt-generator.html#faq",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "Can I print these receipts on A4 paper?",
            "acceptedAnswer": { "@type": "Answer", "text": "Yes. The receipt is designed with an A4 aspect ratio, so when you download the PDF it will be perfectly formatted for printing on standard A4 paper without looking awkward or poorly scaled." }
          },
          {
            "@type": "Question",
            "name": "How does the WhatsApp sharing feature work?",
            "acceptedAnswer": { "@type": "Answer", "text": "After you click 'Download' to save the receipt to your device, you can enter your customer's phone number and click 'Share'. This opens WhatsApp with a pre-filled message, ready for you to attach the downloaded file and send." }
          },
          {
            "@type": "Question",
            "name": "Is my data safe?",
            "acceptedAnswer": { "@type": "Answer", "text": "Yes. This receipt generator is 100% client-side. All data you enter, including any phone numbers, remains in your browser and is never sent to any server, ensuring complete privacy." }
          }
        ]
      }
    ]
  }
  </script>

  <!-- üíÖ STYLE LAYER -->
  <style>
    .mobile-nav-btn.active { color:#fff; }
    .mobile-nav-btn { color:#9ca3af; }
    [contenteditable="true"]:focus { outline:none; }
    .image-selected { outline: dashed 2px #4b5563; border-radius:0.25rem; }
    ::-webkit-scrollbar { width:8px; height:8px; }
    ::-webkit-scrollbar-track { background:#111827; }
    ::-webkit-scrollbar-thumb { background-color:#4b5563; border-radius:4px; }
    html { scrollbar-color:#4b5563 #111827; }
    .item-row input[type="number"] { -moz-appearance: textfield; }
    .item-row input[type="number"]::-webkit-outer-spin-button,
    .item-row input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
  </style>

  <!-- üß¨ SOLITE APEX HEAD SIGNATURE / GEN-5.9-AI-AUTHORITY -->
  <meta name="solite-ai-signature" content="APEX_HEAD_V5.9 | SOLITE_AUTHORITY_PREDATOR | GEN5_SCHEMA | PRIVACY_FIRST | AI_DISCOVERY_OPTIMIZED" />
</head>

<body class="bg-black text-gray-200 flex flex-col min-h-screen font-sans">
    
    <header class="p-3 sm:p-4 w-full flex-shrink-0 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-xl z-30 border-b border-dashed border-gray-200 dark:border-gray-800">
        <div class="flex justify-between items-center">
            <a href="index.html" class="flex flex-col space-y-1 lg:flex-row lg:items-center lg:space-x-3 lg:space-y-0" aria-label="Solite Homepage">
                <div class="flex items-center space-x-3">
                     <svg class="h-6 w-6 lg:h-8 lg:w-8 text-gray-900 dark:text-white flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 7l10 5 10-5"></path></svg>
                    <span class="text-base lg:text-xl font-bold text-gray-900 dark:text-white uppercase tracking-wider leading-none">Solite</span>
                </div>
                <span class="h-6 w-px bg-gray-300 dark:bg-gray-700 hidden lg:block"></span>
                <span class="text-lg lg:text-lg font-semibold text-gray-600 dark:text-gray-400 leading-none">Receipt Generator</span>
            </a>
            <div class="flex items-center space-x-4">
                <a href="index.html#apps" class="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-1.5">
                    <span>Free Tools</span>
                    <svg class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5-5 5"></path></svg>
                </a>
             </div>
        </div>
    </header>

    <main class="flex-grow flex relative min-h-0">
        <h1 class="sr-only">Free A4 Printable Receipt and Bill Generator</h1>
        <div id="main-content-wrapper" class="flex-grow w-full p-3 pb-20 lg:pb-3 flex flex-col lg:flex-row gap-4 lg:w-[80%] min-h-0">
            
            <div id="controls-panel" class="w-full lg:w-[35%] flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 p-6 flex flex-col lg:h-[90vh]">
                <div class="flex-grow overflow-y-auto pr-2 space-y-6">
                    
                    <div>
                        <h2 class="text-xl font-bold text-white mb-4">Branding</h2>
                        <div class="grid grid-cols-2 gap-4 items-end">
                            <div>
                                <label for="logo-upload-input" class="bg-transparent border border-gray-600 hover:bg-gray-800 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-2 cursor-pointer w-full transition-opacity">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>
                                    <span>Add Logo</span>
                                </label>
                                <input type="file" id="logo-upload-input" class="hidden" accept="image/*">
                                <button id="remove-logo-btn" class="hidden mt-2 w-full bg-red-800/20 hover:bg-red-800/40 text-red-400 font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.033-2.134H8.71c-1.123 0-2.033.954-2.033 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg>
                                    <span>Remove Logo</span>
                                </button>
                            </div>
                            <div>
                                <label for="accent-color-input" class="block text-sm font-medium text-gray-300 mb-1">Accent Color</label>
                                <input type="color" id="accent-color-input" class="w-full h-12 p-1 bg-gray-800 rounded-lg cursor-pointer border border-gray-600">
                            </div>
                        </div>
                    </div>
                    
                    <hr class="border-gray-700">

                    <div>
                        <h2 class="text-xl font-bold text-white mb-4">Receipt Details</h2>
                         <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <label for="receipt-title-input" class="block font-medium text-gray-300">Title</label>
                                    <input type="text" id="receipt-title-input" placeholder="e.g. RECEIPT" class="mt-1 block w-full bg-gray-800 border border-gray-600 rounded-md py-2 px-3">
                                </div>
                                 <div>
                                    <label for="receipt-number" class="block font-medium text-gray-300">Receipt Number</label>
                                    <input type="text" id="receipt-number" placeholder="001" class="mt-1 block w-full bg-gray-800 border border-gray-600 rounded-md py-2 px-3">
                                </div>
                            </div>
                             <div class="grid grid-cols-2 gap-4">
                                 <div>
                                     <label for="date" class="block text-sm font-medium text-gray-300">Date</label>
                                    <input type="date" id="date" class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white">
                                </div>
                                <div>
                                    <label for="currency-symbol-select" class="block text-sm font-medium text-gray-300">Currency</label>
                                    <div class="flex gap-2">
                                        <select id="currency-symbol-select" class="mt-1 block w-full bg-gray-800 border border-gray-600 rounded-md py-2 px-3">
                                            <option value="$">$ (Dollar)</option>
                                            <option value="‚Ç¨">‚Ç¨ (Euro)</option>
                                            <option value="¬£">¬£ (Pound)</option>
                                            <option value="¬•">¬• (Yen)</option>
                                            <option value="‚Çπ">‚Çπ (Rupee)</option>
                                            <option value="custom">Custom...</option>
                                        </select>
                                        <input type="text" id="currency-symbol-custom" placeholder="Symbol" class="mt-1 hidden w-20 bg-gray-800 border border-gray-600 rounded-md py-2 px-3">
                                    </div>
                                </div>
                            </div>
                         </div>
                    </div>

                    <hr class="border-gray-700">

                    <div>
                        <h2 class="text-xl font-bold text-white mb-4">Business & Customer</h2>
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="business-details" class="block text-sm font-medium text-gray-300">Business Details</label>
                                <textarea id="business-details" rows="3" placeholder="Your Shop Name&#10;123 Main St, City&#10;+1 (555) 123-4567" class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white"></textarea>
                            </div>
                             <div>
                                <label for="to-name" class="block text-sm font-medium text-gray-300">Customer Name (Optional)</label>
                                <input type="text" id="to-name" placeholder="Valued Customer" class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white">
                            </div>
                        </div>
                    </div>
                    
                    <hr class="border-gray-700">

                    <div>
                        <h3 class="text-lg font-semibold text-white mb-2">Items</h3>
                        <div id="items-container" class="space-y-2">
                           <!-- JS will inject item rows here -->
                        </div>
                        <button id="add-item-btn" class="mt-2 bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-3 rounded-lg flex items-center gap-2 text-sm transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
                            <span>Add Item</span>
                        </button>
                    </div>

                    <hr class="border-gray-700">

                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Subtotal</span>
                            <span id="subtotal-display">$0.00</span>
                        </div>
                        <div class="flex justify-between items-center gap-4">
                             <div class="flex items-center gap-2 flex-grow">
                                <input type="checkbox" id="show-discount" class="h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 bg-gray-800 border-gray-600">
                                <input type="text" id="discount-label" class="text-gray-400 bg-transparent flex-shrink-0 border-none focus:ring-0 p-0">
                             </div>
                             <input type="number" id="discount" value="10" min="0" max="100" class="w-24 bg-gray-700 border border-gray-600 rounded-md shadow-sm py-1 px-2 text-white text-right">
                        </div>
                         <div class="flex justify-between items-center gap-4">
                            <div class="flex items-center gap-2 flex-grow">
                                <input type="checkbox" id="show-tax" class="h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 bg-gray-800 border-gray-600">
                                <input type="text" id="tax-label" class="text-gray-400 bg-transparent flex-shrink-0 border-none focus:ring-0 p-0">
                            </div>
                             <input type="number" id="tax" value="8" min="0" class="w-24 bg-gray-700 border border-gray-600 rounded-md shadow-sm py-1 px-2 text-white text-right">
                        </div>
                         <div class="flex justify-between items-center font-bold text-xl border-t border-gray-700 pt-2">
                            <span>Total Paid</span>
                            <span id="total-display">$0.00</span>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <label for="payment-method" class="text-gray-300">Payment Method</label>
                            <input type="text" id="payment-method" placeholder="Cash" class="w-24 bg-gray-700 border border-gray-600 rounded-md shadow-sm py-1 px-2 text-white text-right">
                        </div>
                    </div>
                    
                    <hr class="border-gray-700">
                    
                    <div>
                        <label for="notes" class="block text-sm font-medium text-gray-300">Notes / Terms</label>
                        <textarea id="notes" rows="2" placeholder="e.g. Thank you!" class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white"></textarea>
                    </div>

                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-700 space-y-4">
                    <h3 class="text-lg font-semibold text-white">Export & Share</h3>
                     <div class="grid grid-cols-[1fr,auto,auto] gap-2 items-center">
                        <div class="relative">
                            <button id="download-format-btn" class="bg-transparent border border-gray-600 hover:bg-gray-800 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-between w-full h-full">
                                <span id="download-format-text">PNG</span>
                                <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="download-format-dropdown" class="hidden absolute bottom-full left-0 mb-2 w-full bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50">
                                <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-value="png">PNG</a>
                                <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-value="jpeg">JPG</a>
                                <a href="#" class="block px-4 py-2 text-white hover:bg-gray-700" data-value="pdf">PDF</a>
                            </div>
                        </div>
                         <button id="download-btn" class="bg-white hover:bg-gray-200 text-black font-semibold py-3 px-4 rounded-lg flex items-center gap-2 justify-center whitespace-nowrap">
                            <span id="download-btn-content" class="flex items-center justify-center">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg>
                              <span class="ml-2">Download</span>
                            </span>
                        </button>
                        <button id="reset-btn" class="bg-red-800/40 hover:bg-red-800/60 text-red-400 font-medium p-3 rounded-lg flex-shrink-0" title="Reset Receipt">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16"> <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"></path>  <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"></path></svg>
                        </button>
                    </div>
                    <div class="relative">
                        <input type="tel" id="whatsapp-number" placeholder="WhatsApp Number (e.g. 15551234567)" class="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white pr-24">
                        <button id="share-btn" class="absolute top-1/2 right-1 transform -translate-y-1/2 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded-md flex items-center gap-2 text-sm">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16"><path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"/></svg>
                            <span>Share</span>
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 text-left">(Download receipt first, then share)</p>
                </div>
            </div>

            <div id="preview-panel" class="flex-1 bg-gray-900 rounded-xl border border-gray-800 relative hidden lg:grid lg:place-items-center overflow-auto lg:w-[65%] p-4 md:p-10 lg:h-[90vh]">
                <div id="receipt-container" class="aspect-[1/1.414] w-full max-w-3xl shadow-2xl relative bg-white text-black font-sans text-sm">
                    <!-- Receipt template loads here -->
                </div>
            </div>

        </div>
        <aside class="w-[20%] flex-shrink-0 p-3 border-l border-gray-800 hidden lg:block">
            <div class="h-full bg-gray-800/50 rounded-lg flex items-center justify-center text-gray-400">Ad Area</div>
        </aside>

    </main>
    <div id="mobile-nav" class="sticky bottom-0 left-0 w-full lg:hidden bg-gray-800 border-t border-gray-700 shadow-2xl z-40">
        <div class="flex justify-around items-center h-16 py-1">
            <button id="mobile-controls-btn" class="mobile-nav-btn flex flex-col items-center justify-center text-xs font-medium w-1/2 active">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" /></svg>
                <span>Edit</span>
            </button>
            <button id="mobile-preview-btn" class="mobile-nav-btn flex flex-col items-center justify-center text-xs font-medium w-1/2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                <span>Preview</span>
            </button>
        </div>
    </div>
    <!-- üß† SOLITE SEO + AI AUTHORITY BLOCK (GEN-5.8 / RECEIPT GENERATOR EDITION) -->
    <div class="w-full text-gray-300 mx-2 mb-2">

    <style>
    #solite-info-block-receipt[open] > summary { border-bottom: 1px solid #374151; }
    #solite-info-block-receipt > summary .details-arrow-seo {
        transform: rotate(-90deg); transition: transform 0.25s ease-in-out;
    }
    #solite-info-block-receipt[open] > summary .details-arrow-seo { transform: rotate(0deg); }
    .badge {
        display:inline-flex; align-items:center; gap:.5rem;
        border:1px solid #374151; padding:.25rem .6rem;
        border-radius:.6rem; font-size:.8rem; color:#9CA3AF;
    }
    </style>

    <details id="solite-info-block-receipt" class="w-full bg-gray-900 rounded-2xl border border-gray-800 shadow-2xl shadow-black/40">
    <summary class="text-xl font-bold text-white p-5 cursor-pointer flex justify-between items-center">
        Instant A4 Receipt & Bill Generator with WhatsApp Share
        <svg class="w-5 h-5 transition-transform duration-200 transform details-arrow-seo"
            xmlns="http://www.w3.org/2000/svg" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
    </summary>

    <div class="p-6 space-y-10 leading-relaxed">

    <section class="space-y-3">
        <div class="flex flex-wrap gap-2">
            <span class="badge">Receipt Generator</span>
            <span class="badge">A4 Print-Ready</span>
            <span class="badge">WhatsApp Share</span>
            <span class="badge">Mobile-First</span>
            <span class="badge">Privacy-First</span>
        </div>
        <p class="text-lg text-gray-300">
            The <strong>Solite Receipt Generator</strong> is a fast, free tool for creating simple, A4-printable receipts. It's designed for small businesses and shopkeepers who need to generate a proof of payment quickly.
            Add items, calculate totals, and share via WhatsApp‚Äîall processed <strong>100% inside
            your browser</strong> for complete privacy.
        </p>
    </section>

    <section>
        <h3 class="text-white text-xl font-semibold mb-2">Key Features</h3>
        <ul class="list-disc list-inside text-gray-400 space-y-2">
            <li><strong>A4 Print-Ready:</strong> Receipts are formatted with a standard A4 aspect ratio for perfect, professional printing.</li>
            <li><strong>One-Click WhatsApp Sharing:</strong> Enter a phone number to open a pre-filled WhatsApp chat, ready for you to attach the receipt.</li>
            <li><strong>Fast & Simple:</strong> A clean, focused interface to create receipts quickly on any device, especially mobile.</li>
            <li><strong>Auto Calculations:</strong> Automatically calculates subtotal, taxes, discounts, and the final total paid.</li>
            <li><strong>Payment Method:</strong> Clearly state how the payment was made (e.g., Cash, Card, UPI).</li>
            <li><strong>Flexible Export:</strong> Save as a print-ready PDF, or a high-quality PNG or JPG for digital use.</li>
        </ul>
    </section>
    
    <section>
        <h3 class="text-white text-xl font-semibold mb-2">How to Create and Share a Receipt</h3>
        <ol class="list-decimal list-inside text-gray-400 space-y-2">
            <li>Enter your business details and an optional customer name.</li>
            <li>Add items with their quantity and pricing.</li>
            <li>Click <strong>Download</strong> to save the receipt to your device (select PDF for printing).</li>
            <li>Enter the customer's WhatsApp number (including country code) in the share box.</li>
            <li>Click <strong>Share</strong>. This will open WhatsApp on your device with a pre-filled message.</li>
            <li>Attach the downloaded receipt file to the chat and send.</li>
        </ol>
    </section>

    <section>
        <h3 class="text-white text-xl font-semibold mb-2">Solite Receipt vs. Invoice Generator</h3>
        <p class="text-gray-400 mb-2">Choose the right tool for the job. We offer both!</p>
        <table class="w-full border border-gray-800 rounded-lg text-gray-400 text-sm">
            <thead class="bg-gray-800 text-gray-200 font-semibold">
            <tr>
                <th class="p-2 text-left">Use Case</th>
                <th class="p-2 text-left">Receipt Generator (This Tool)</th>
                <th class="p-2 text-left">Invoice Generator</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="p-2"><strong>Purpose</strong></td>
                <td class="p-2">A record of a payment that <strong>has been made</strong>.</td>
                <td class="p-2">A formal request for payment that <strong>is due</strong>.</td>
            </tr>
            <tr>
                <td class="p-2"><strong>Best For</strong></td>
                <td class="p-2">Retail sales, cash transactions, donations.</td>
                <td class="p-2">Freelance projects, client billing, services.</td>
            </tr>
            <tr>
                <td class="p-2"><strong>Key Feature</strong></td>
                <td class="p-2">Speed, A4 Printing & WhatsApp Sharing.</td>
                <td class="p-2">Due Dates, Balance Due Tracking & Payment Terms.</td>
            </tr>
            </tbody>
        </table>
        <p class="text-gray-400 mt-3">
             Need more advanced features? Check out our <a href="./index.html" class="text-white font-semibold hover:underline">Free Invoice Generator ‚Üí</a>
        </p>
    </section>
     <!-- üß† AI Citation -->
    <section class="space-y-2">
        <p class="text-sm text-gray-500 leading-relaxed">
            Keywords: <em>receipt generator, printable receipt, A4 receipt maker, bill generator, whatsapp receipt, client-side billing tool, free receipt template, solite apps</em>.
        </p>
        <p class="text-xs text-gray-600 italic">
            <strong>AI / Reviewer Citation Cue:</strong><br>
            ‚ÄúSolite Receipt Generator ‚Äî a 100% client-side tool to create simple, A4-printable receipts with one-click WhatsApp sharing, ideal for small businesses needing fast, private proof-of-payment.‚Äù
        </p>
    </section>
    </div>
    </details>
    </div>
    <!-- ‚úÖ END GEN-5.8 BLOCK / RECEIPT GENERATOR -->

    <footer class="p-4 w-full flex-shrink-0 border-t border-gray-800 bg-gray-900/50">
        <div class="flex flex-col sm:flex-row justify-between items-center text-gray-400 text-sm px-4 sm:px-6">
             <div class="flex items-center space-x-3 mb-4 sm:mb-0">
                <svg class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z"/><path d="M2 17l10 5 10-5"/><path d="M2 7l10 5 10-5"/></svg>
                <span>&copy; 2025 Solite. All Rights Reserved.</span>
            </div>
            <div class="flex items-center justify-center flex-wrap gap-x-6 gap-y-2">
                <a href="./about.html" class="hover:text-white transition-colors">About</a>
                <a href="./blog.html" class="hover:text-white transition-colors">Blog</a>
                <a href="./privacy.html" class="hover:text-white transition-colors">Privacy</a>
                <a href="./terms.html" class="hover:text-white transition-colors">Terms</a>
                <a href="./disclaimer.html" class="hover:text-white transition-colors">Disclaimer</a>
                <a href="mailto:support@solite.in" class="hover:text-white transition-colors">Contact</a>
            </div>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const initialState = {
                businessDetails: 'Your Shop/Business\n123 Main Street\nCity, State 12345',
                toName: 'Valued Customer',
                receiptTitle: 'RECEIPT',
                receiptNumber: '001',
                date: new Date().toISOString().split('T')[0],
                items: [{ description: 'Sample Item', qty: 2, price: 15.00 }],
                showDiscount: false,
                discountLabel: 'Discount (%)',
                discount: 10,
                showTax: true,
                taxLabel: 'Tax (%)',
                tax: 5,
                paymentMethod: 'Cash',
                notes: 'Thank you for your business!',
                whatsappNumber: '',
                currencySymbol: '$',
                logo: { src: null, width: 120, height: 80, opacity: 1 },
                accentColor: '#000000',
            };

            let state = { ...initialState };

            const el = {
                controlsPanel: document.getElementById('controls-panel'),
                previewPanel: document.getElementById('preview-panel'),
                receiptContainer: document.getElementById('receipt-container'),
                itemsContainer: document.getElementById('items-container'),
                subtotalDisplay: document.getElementById('subtotal-display'),
                totalDisplay: document.getElementById('total-display'),
                downloadBtn: document.getElementById('download-btn'),
                downloadBtnContent: document.getElementById('download-btn-content'),
                resetBtn: document.getElementById('reset-btn'),
                shareBtn: document.getElementById('share-btn'),
                addItemBtn: document.getElementById('add-item-btn'),
                logoUploadInput: document.getElementById('logo-upload-input'),
                removeLogoBtn: document.getElementById('remove-logo-btn'),
                mobileControlsBtn: document.getElementById('mobile-controls-btn'),
                mobilePreviewBtn: document.getElementById('mobile-preview-btn'),
                currencySymbolSelect: document.getElementById('currency-symbol-select'),
                currencySymbolCustom: document.getElementById('currency-symbol-custom'),
                accentColorInput: document.getElementById('accent-color-input'),
            };

            let downloadFormat = 'png';
            
            function render() {
                // Render form inputs from state
                document.getElementById('business-details').value = state.businessDetails;
                document.getElementById('to-name').value = state.toName;
                document.getElementById('receipt-title-input').value = state.receiptTitle;
                document.getElementById('receipt-number').value = state.receiptNumber;
                document.getElementById('date').value = state.date;
                document.getElementById('show-discount').checked = state.showDiscount;
                document.getElementById('discount-label').value = state.discountLabel;
                document.getElementById('discount').value = state.discount;
                document.getElementById('show-tax').checked = state.showTax;
                document.getElementById('tax-label').value = state.taxLabel;
                document.getElementById('tax').value = state.tax;
                document.getElementById('payment-method').value = state.paymentMethod;
                document.getElementById('notes').value = state.notes;
                document.getElementById('whatsapp-number').value = state.whatsappNumber;
                el.accentColorInput.value = state.accentColor;

                // Currency dropdown
                const isCustom = !['$', '‚Ç¨', '¬£', '¬•', '‚Çπ'].includes(state.currencySymbol);
                if (isCustom) {
                    el.currencySymbolSelect.value = 'custom';
                    el.currencySymbolCustom.classList.remove('hidden');
                    el.currencySymbolCustom.value = state.currencySymbol;
                } else {
                    el.currencySymbolSelect.value = state.currencySymbol;
                    el.currencySymbolCustom.classList.add('hidden');
                }

                renderItemsInputs();
                renderPreview();
                calculateTotals();
            }

            function renderItemsInputs() {
                el.itemsContainer.innerHTML = '';
                state.items.forEach((item, index) => {
                    const row = document.createElement('div');
                    row.className = 'item-row grid grid-cols-[1fr,auto,auto,auto] gap-2 items-center';
                    row.innerHTML = `
                        <input type="text" value="${item.description}" data-index="${index}" data-field="description" placeholder="Item description" class="w-full bg-gray-800 border border-gray-600 rounded-md py-1 px-2 text-white">
                        <input type="number" value="${item.qty}" data-index="${index}" data-field="qty" min="0" placeholder="Qty" class="w-16 bg-gray-800 border border-gray-600 rounded-md py-1 px-2 text-white text-right">
                        <input type="number" value="${item.price}" data-index="${index}" data-field="price" min="0" placeholder="Price" class="w-20 bg-gray-800 border border-gray-600 rounded-md py-1 px-2 text-white text-right">
                        <button data-index="${index}" class="remove-item-btn text-red-400 hover:text-red-300 p-1"><svg class="w-5 h-5 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button>
                    `;
                    el.itemsContainer.appendChild(row);
                });
            }
            
            function renderPreview() {
                const { businessDetails, toName, receiptTitle, receiptNumber, date, items, notes, logo, accentColor, paymentMethod } = state;

                const businessLines = businessDetails.split('\n');
                const businessName = businessLines[0] || '';
                const businessAddress = businessLines.slice(1).join('\n');

                const logoHtml = logo.src
                    ? `<div class="mb-4">
                           <img src="${logo.src}" alt="Business Logo" style="max-width: ${state.logo.width}px; max-height: ${state.logo.height}px; opacity: ${state.logo.opacity};">
                       </div>`
                    : '';
                
                const itemsHtml = items.map(item => `
                    <tr class="border-b border-dashed border-gray-300">
                        <td class="py-2 pr-4 text-left">${item.description}</td>
                        <td class="py-2 px-4 text-center">${item.qty}</td>
                        <td class="py-2 px-4 text-right font-mono">${formatCurrency(item.price)}</td>
                        <td class="py-2 pl-4 text-right font-mono">${formatCurrency(item.qty * item.price)}</td>
                    </tr>
                `).join('');

                el.receiptContainer.innerHTML = `
                    <div class="p-10 w-full h-full flex flex-col font-sans text-gray-800">
                        <header class="flex justify-between items-start mb-10">
                            <div>
                                ${logoHtml}
                                <h2 class="font-bold text-xl mb-1">${businessName}</h2>
                                <p class="text-gray-600 text-sm whitespace-pre-line">${businessAddress}</p>
                                <div class="mt-8">
                                    <p class="text-gray-500 text-sm">Receipt For</p>
                                    <p class="font-bold">${toName}</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <h1 class="font-bold text-4xl tracking-wider uppercase" style="color: ${accentColor};">${receiptTitle}</h1>
                                <div class="mt-4 text-sm space-y-1">
                                    <p><span class="font-bold text-gray-600">Receipt #:</span> ${receiptNumber}</p>
                                    <p><span class="font-bold text-gray-600">Date:</span> ${date}</p>
                                    <p><span class="font-bold text-gray-600">Payment Method:</span> ${paymentMethod}</p>
                                </div>
                            </div>
                        </header>
                        
                        <table class="w-full text-sm mb-10">
                            <thead>
                                <tr class="border-b border-dashed border-black">
                                    <th class="text-left font-bold pb-2 pr-4">Description</th>
                                    <th class="text-center font-bold pb-2 px-4">Qty</th>
                                    <th class="text-right font-bold pb-2 px-4">Unit Price</th>
                                    <th class="text-right font-bold pb-2 pl-4">Amount</th>
                                </tr>
                            </thead>
                            <tbody>${itemsHtml}</tbody>
                        </table>
                        
                        <div class="flex justify-end mb-10">
                            <div class="w-64 text-sm space-y-1">
                                <div class="flex justify-between"><span class="text-gray-600">Subtotal:</span> <span id="preview-subtotal" class="font-mono">$0.00</span></div>
                                <div id="preview-discount-row" class="flex justify-between ${!state.showDiscount ? 'hidden' : ''}"><span class="text-gray-600">${state.discountLabel}:</span> <span id="preview-discount" class="font-mono">$0.00</span></div>
                                <div id="preview-tax-row" class="flex justify-between ${!state.showTax ? 'hidden' : ''}"><span class="text-gray-600">${state.taxLabel}:</span> <span id="preview-tax" class="font-mono">$0.00</span></div>
                                <span class="">
                                <span class="">
                                <div class="border-t border-dashed border-gray-500 my-2"></div>
                                <div class="flex justify-between font-bold text-base"><span class="font-sans">Total Paid:</span> <span id="preview-total" class="font-mono">$0.00</span></div>
                            </div>
                        </div>

                        <footer class="mt-auto text-gray-600 text-sm">
                            <p>${notes}</p>
                        </footer>
                    </div>
                `;
            }

            function calculateTotals() {
                const subtotal = state.items.reduce((acc, item) => acc + item.qty * item.price, 0);
                const discountAmount = state.showDiscount ? subtotal * (state.discount / 100) : 0;
                const subtotalAfterDiscount = subtotal - discountAmount;
                const taxAmount = state.showTax ? subtotalAfterDiscount * (state.tax / 100) : 0;
                const total = subtotalAfterDiscount + taxAmount;
                
                el.subtotalDisplay.textContent = formatCurrency(subtotal);
                el.totalDisplay.textContent = formatCurrency(total);
                
                const previewSubtotal = el.receiptContainer.querySelector('#preview-subtotal');
                if (previewSubtotal) {
                    previewSubtotal.textContent = formatCurrency(subtotal);
                    el.receiptContainer.querySelector('#preview-discount').textContent = `-${formatCurrency(discountAmount)}`;
                    el.receiptContainer.querySelector('#preview-tax').textContent = formatCurrency(taxAmount);
                    el.receiptContainer.querySelector('#preview-total').textContent = formatCurrency(total);
                }
                 return total;
            }
            
            function formatCurrency(amount) {
                return `${state.currencySymbol}${Number(amount).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            }

            function handleControlsInput(e) {
                const { id, value, type, checked } = e.target;
                const keyMap = {
                    'business-details': 'businessDetails', 'to-name': 'toName',
                    'receipt-title-input': 'receiptTitle', 'receipt-number': 'receiptNumber',
                    'date': 'date',
                    'show-discount': 'showDiscount', 'discount-label': 'discountLabel', 'discount': 'discount',
                    'show-tax': 'showTax', 'tax-label': 'taxLabel', 'tax': 'tax', 'notes': 'notes',
                    'accent-color-input': 'accentColor',
                    'payment-method': 'paymentMethod',
                    'whatsapp-number': 'whatsappNumber',
                };
                const stateKey = keyMap[id];
                if (stateKey) {
                    if (type === 'checkbox') { state[stateKey] = checked; }
                    else if (type === 'number') { state[stateKey] = parseFloat(value) || 0; }
                    else { state[stateKey] = value; }
                }
                
                if (id === 'currency-symbol-select') {
                    if (value === 'custom') {
                        el.currencySymbolCustom.classList.remove('hidden');
                        el.currencySymbolCustom.value = '';
                        el.currencySymbolCustom.focus();
                        state.currencySymbol = '';
                    } else {
                        el.currencySymbolCustom.classList.add('hidden');
                        state.currencySymbol = value;
                    }
                }
                if (id === 'currency-symbol-custom') {
                    state.currencySymbol = value;
                }

                render();
            }
            
            function handleItemsInput(e) {
                const { index, field } = e.target.dataset;
                const value = e.target.type === 'number' ? parseFloat(e.target.value) || 0 : e.target.value;
                state.items[index][field] = value; 
                renderPreview();
                calculateTotals();
            }
            
            async function download() {
                el.downloadBtn.disabled = true;
                el.downloadBtnContent.innerHTML = `<svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="ml-2">Downloading...</span>`;
                
                const paneWasHidden = el.previewPanel.classList.contains('hidden');
                if (paneWasHidden) {
                    el.previewPanel.style.position = 'absolute';
                    el.previewPanel.style.left = '-9999px';
                    el.previewPanel.classList.remove('hidden');
                    el.previewPanel.classList.add('grid');
                }

                await new Promise(resolve => setTimeout(resolve, 250));

                try {
                    const canvas = await html2canvas(el.receiptContainer, { scale: 3, useCORS: true, backgroundColor: '#ffffff' });
                    const filename = `receipt-${state.receiptNumber}.${downloadFormat}`;
                    if (downloadFormat === 'pdf') {
                        const { jsPDF } = window.jspdf;
                        const receiptWidth = el.receiptContainer.offsetWidth;
                        const receiptHeight = el.receiptContainer.offsetHeight;
                        const pdf = new jsPDF({ orientation: 'portrait', unit: 'px', format: [receiptWidth, receiptHeight] });
                        const imgData = canvas.toDataURL('image/png', 1.0);
                        pdf.addImage(imgData, 'PNG', 0, 0, receiptWidth, receiptHeight);
                        pdf.save(filename);
                    } else {
                        const link = document.createElement('a');
                        link.href = canvas.toDataURL(`image/${downloadFormat}`, 1.0);
                        link.download = filename;
                        link.click();
                    }
                } catch (error) {
                    console.error("Download failed:", error);
                } finally {
                     el.downloadBtn.disabled = false;
                     el.downloadBtnContent.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg><span class="ml-2">Download</span>`;
                     if (paneWasHidden) {
                        el.previewPanel.style.position = '';
                        el.previewPanel.style.left = '';
                        el.previewPanel.classList.add('hidden');
                        el.previewPanel.classList.remove('grid');
                    }
                }
            }
            
            function shareOnWhatsApp() {
                if (!state.whatsappNumber) {
                    alert('Please enter a WhatsApp number first.');
                    document.getElementById('whatsapp-number').focus();
                    return;
                }
                const sanitizedNumber = state.whatsappNumber.replace(/\D/g, '');
                const total = calculateTotals();
                const message = encodeURIComponent(`Here is your receipt #${state.receiptNumber} for a total of ${formatCurrency(total)}. Thank you for your business!`);
                const url = `https://wa.me/${sanitizedNumber}?text=${message}`;
                window.open(url, '_blank');
            }

            function setupDownloadDropdown() {
                const btn = document.getElementById('download-format-btn');
                const dropdown = document.getElementById('download-format-dropdown');
                const textEl = document.getElementById('download-format-text');
                btn.addEventListener('click', (e) => { e.stopPropagation(); dropdown.classList.toggle('hidden'); });
                dropdown.addEventListener('click', (e) => {
                    if (e.target.tagName === 'A') {
                        e.preventDefault();
                        downloadFormat = e.target.dataset.value;
                        textEl.textContent = e.target.textContent;
                        dropdown.classList.add('hidden');
                    }
                });
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('#download-format-btn')) dropdown.classList.add('hidden');
                });
            }

            function handleLayout() {
                 if (window.innerWidth < 1024) {
                    if (el.mobilePreviewBtn.classList.contains('active')) {
                        el.mobilePreviewBtn.click();
                    } else {
                        el.mobileControlsBtn.click();
                    }
                } else {
                    el.controlsPanel.classList.remove('hidden'); el.controlsPanel.classList.add('flex');
                    el.previewPanel.classList.remove('hidden'); el.previewPanel.classList.add('grid');
                }
            }

            // --- Event Listeners ---
            el.controlsPanel.addEventListener('input', (e) => {
                if (e.target.closest('.item-row')) {
                    handleItemsInput(e);
                } else {
                    handleControlsInput(e);
                }
            });
            
            el.addItemBtn.addEventListener('click', () => {
                state.items.push({ description: '', qty: 1, price: 0 });
                render();
            });

            el.itemsContainer.addEventListener('click', e => {
                if (e.target.closest('.remove-item-btn')) {
                    const index = e.target.closest('.remove-item-btn').dataset.index;
                    state.items.splice(index, 1);
                    render();
                }
            });

            el.logoUploadInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        state.logo.src = event.target.result;
                        document.querySelector('label[for="logo-upload-input"]').classList.add('hidden');
                        el.removeLogoBtn.classList.remove('hidden');
                        renderPreview();
                    };
                    reader.readAsDataURL(file);
                }
            });

            el.removeLogoBtn.addEventListener('click', () => {
                state.logo.src = null;
                el.logoUploadInput.value = '';
                document.querySelector('label[for="logo-upload-input"]').classList.remove('hidden');
                el.removeLogoBtn.classList.add('hidden');
                renderPreview();
            });
            
            el.downloadBtn.addEventListener('click', download);
            el.shareBtn.addEventListener('click', shareOnWhatsApp);

            el.resetBtn.addEventListener('click', () => {
                if(confirm('Are you sure you want to reset all fields?')) {
                    state = JSON.parse(JSON.stringify(initialState));
                    state.date = new Date().toISOString().split('T')[0];
                    render();
                }
            });

            el.mobileControlsBtn.addEventListener('click', () => {
                el.controlsPanel.classList.remove('hidden'); el.controlsPanel.classList.add('flex');
                el.previewPanel.classList.add('hidden'); el.previewPanel.classList.remove('grid');
                el.mobileControlsBtn.classList.add('active'); el.mobilePreviewBtn.classList.remove('active');
            });

            el.mobilePreviewBtn.addEventListener('click', () => {
                el.controlsPanel.classList.add('hidden'); el.controlsPanel.classList.remove('flex');
                el.previewPanel.classList.remove('hidden'); el.previewPanel.classList.add('grid');
                el.mobileControlsBtn.classList.remove('active'); el.mobilePreviewBtn.classList.add('active');
            });
            
            window.addEventListener('resize', handleLayout);

            // --- Init ---
            render();
            setupDownloadDropdown();
            handleLayout();
        });
    </script>
</body>
</html>