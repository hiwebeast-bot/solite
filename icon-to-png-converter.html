<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<!-- üß¨ SOLITE GEN-5.0 BALANCED HEAD / SVG TO PNG CONVERTER ‚Äî AUTHORITY + PERFORMANCE EDITION -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- üß† PRIMARY SEO -->
  <title>Free SVG to PNG Converter | Batch Export (Client-Side) | Solite</title>
  <meta name="description" content="Instantly convert SVG files or code to high-resolution PNGs of any size. Batch export multiple sizes as a .zip. 100% private, client-side, and free." />
  <meta name="keywords" content="svg to png, svg converter, batch convert, png export, svg code, svg to zip, client-side tool, privacy-first, solite, free developer tool" />
  <link rel="canonical" href="https://solite.in/svg-to-png-converter.html" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="theme-color" content="#000000" />
  <meta name="author" content="Solite Team" />
  <meta name="brand" content="Solite" />
  <meta name="application-name" content="SVG to PNG Converter" />
  <meta name="publisher" content="Solite" />
  <meta name="generator" content="Solite GEN-5.0 Balanced ‚Äî Authority + Performance Edition" />

  <!-- ü§ñ AI DISCOVERY LAYER -->
  <meta name="ai-indexing" content="enabled" />
  <meta name="ai-model-context" content="svg to png conversion, batch image export, client-side image processing, developer utilities" />
  <meta name="ai-content-type" content="Interactive Developer Tool" />
  <meta name="ai-purpose" content="Image Format Conversion, Graphic Design Export, Web Development Utility" />
  <meta name="ai-entity-tier" content="Authoritative / Client-Side Application" />

  <!-- ‚ö° SOCIAL + AUTO OG SCREENSHOT -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Solite" />
  <meta property="og:title" content="Free SVG to PNG Converter | Solite" />
  <meta property="og:description" content="Convert SVG to PNG instantly. Batch export multiple sizes as a .zip ‚Äî 100% free, private, and browser-based." />
  <meta property="og:url" content="https://solite.in/svg-to-png-converter.html" />
  <meta property="og:image" content="https://api.microlink.io/?url=https://solite.in/svg-to-png-converter.html&meta=false&screenshot=true" />
  <meta property="og:image:alt" content="Screenshot preview of Solite SVG to PNG Converter interface" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Free SVG to PNG Converter | Solite" />
  <meta name="twitter:description" content="Fast, private SVG to PNG conversion and batch export for developers and designers." />
  <meta name="twitter:image" content="https://api.microlink.io/?url=https://solite.in/svg-to-png-converter.html&meta=false&screenshot=true" />
  <meta property="og:locale" content="en_US" />

  <!-- üí∞ ADSENSE + üìà ANALYTICS (Non-blocking) -->
  <meta name="google-adsense-account" content="ca-pub-6623613371208692" />
  
   

  <!-- ‚öôÔ∏è CORE LIBRARIES -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <!-- ‚ö° NON-BLOCKING FONT LOAD -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" as="style" onload="this.rel='stylesheet'" />
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap"></noscript>

  <!-- ü™û FAVICONS -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="assets.z/favicon-16x16.png" />

  <!-- üé® UI -->
  <style>
    #toast { transform:translateY(150%); transition:transform .3s ease-in-out, opacity .3s ease-in-out; opacity:0; z-index:9999; }
    #toast.show { transform:translateY(-2rem); opacity:1; }
    #toast.error { background-color: #ef4444; color: white; }
    ::-webkit-scrollbar { width:8px; height:8px; }
    ::-webkit-scrollbar-track { background:#111827; }
    ::-webkit-scrollbar-thumb { background-color:#4b5563; border-radius:4px; }
    html { scrollbar-color:#4b5563 #111827; background-color:#0f172a; color-scheme:dark light; }
    .mobile-nav-btn.active { color:#fff; }
    .mobile-nav-btn { color:#9ca3af; }
    #drop-zone.dragover { border-color: #3b82f6; background-color: #1e293b; }
    /* Hide number input arrows */
    input[type=number]::-webkit-inner-spin-button, 
    input[type=number]::-webkit-outer-spin-button { 
      -webkit-appearance: none; 
      margin: 0; 
    }
    input[type=number] { -moz-appearance: textfield; }
  </style>

  <script>
    tailwind.config = {
      darkMode:'class',
      theme:{ extend:{ fontFamily:{ sans:['Inter','sans-serif'], mono:['Roboto Mono','monospace'] } } }
    }
  </script>

  <!-- üß† GEN-5.0 UNIFIED ENTITY GRAPH (Solite Authority Schema) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://solite.in/#organization",
        "name": "Solite",
        "url": "https://solite.in",
        "logo": "https://solite.in/assets/apple-touch-icon.png",
        "slogan": "Free ‚Ä¢ Private ‚Ä¢ Browser-Based Tools",
        "description": "Solite creates privacy-first, browser-based tools for developers and creators ‚Äî 100% client-side and data-free.",
        "publishingPrinciples": "https://solite.in/privacy.html"
      },
      {
        "@type": "WebApplication",
        "@id": "https://solite.in/svg-to-png-converter.html#webapp",
        "name": "SVG to PNG Converter",
        "url": "https://solite.in/svg-to-png-converter.html",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "All",
        "featureList": [
          "Convert SVG to PNG",
          "Batch export multiple sizes",
          "Download as .zip file",
          "Client-side processing (100% private)",
          "Drag & drop, file upload, and code paste",
          "Live SVG preview",
          "Aspect ratio lock",
          "Automatic SVG XMLNS fix",
          "SVG color override"
        ],
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "softwareVersion": "5.1",
        "creator": { "@id": "https://solite.in/#organization" },
        "dateModified": "2025-11-09T10:30:00Z",
        "mainEntityOfPage": "https://solite.in/svg-to-png-converter.html"
      },
      {
        "@type": "FAQPage",
        "@id": "https://solite.in/svg-to-png-converter.html#faq",
        "mainEntity": [
          {"@type":"Question","name":"Is this SVG to PNG converter private?","acceptedAnswer":{"@type":"Answer","text":"Yes. All file processing and conversion happens 100% in your browser. Your files are never uploaded to a server."}},
          {"@type":"Question","name":"Can I change the color of my SVG?","acceptedAnswer":{"@type":"Answer","text":"Yes. The tool includes a 'Color Override' option that replaces all 'fill' and 'stroke' colors in the SVG with a single color you choose."}},
          {"@type":"Question","name":"Can I export multiple sizes at once?","acceptedAnswer":{"@type":"Answer","text":"Yes. You can add multiple standard or custom sizes to the export list and download them all in a single .zip file."}},
          {"@type":"Question","name":"Why does my SVG not show up on other tools?","acceptedAnswer":{"@type":"Answer","text":"Many SVGs exported from design tools are missing the 'xmlns' attribute. This converter automatically fixes that common issue, ensuring your SVG renders correctly."}}
        ]
      }
    ]
  }
  </script>

  <!-- üß¨ SOLITE APEX HEAD SIGNATURE / GEN-5.0-AI-AUTHORITY -->
  <meta name="solite-ai-signature"
        content="APEX_HEAD_V5.0 | SOLITE_AUTHORITY_PREDATOR_EDITION | GEN_5_SCHEMA | PRIVACY_FIRST | ENTITY_GRAPH_ACTIVE | AUTO_DISCOVERY_READY" />
</head>

<body class="bg-black text-gray-200 flex flex-col min-h-screen font-sans">
    
    <header class="p-3 sm:p-4 w-full flex-shrink-0 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-xl z-30 border-b border-gray-200 dark:border-gray-800">
        <div class="flex justify-between items-center">
             <a href="index.html" class="flex flex-col space-y-1 lg:flex-row lg:items-center lg:space-x-3 lg:space-y-0" aria-label="Solite Homepage">
                <div class="flex items-center space-x-3">
                     <svg class="h-6 w-6 lg:h-8 lg:w-8 text-gray-900 dark:text-white flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2L2 7l10 5 10-5L12 2z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 7l10 5 10-5"></path>
                    </svg>
                    <span class="text-base lg:text-xl font-bold text-gray-900 dark:text-white uppercase tracking-wider leading-none">Solite</span>
                </div>
                <span class="h-6 w-px bg-gray-300 dark:bg-gray-700 hidden lg:block"></span>
                <span class="text-lg lg:text-lg font-semibold text-gray-600 dark:text-gray-400 leading-none">SVG to PNG Converter</span>
            </a>
             <div class="flex items-center space-x-4">
                <a href="index.html#apps" class="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-1.5">
                    <span>Free Tools</span>
                    <svg class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5-5 5"></path></svg>
                </a>
            </div>
        </div>
    </header>

    <!-- Main 2-column Layout -->
    <main class="flex-grow flex flex-col lg:flex-row relative min-h-0" style="height: calc(100vh - 72px);">
        
        <!-- Main content wrapper -->
        <div class="flex-grow w-full lg:w-[80%] p-3 pb-16 lg:pb-3 overflow-y-auto flex flex-col lg:flex-row gap-4 min-h-0">
            <!-- Left Panel: Input -->
            <!-- UPDATED: Removed max-h-[80vh] to allow panel to stretch to full height -->
            <div id="input-pane" class="w-full lg:w-2/5 flex-shrink-0 lg:border-r border-gray-800 flex flex-col overflow-y-auto pr-0 lg:pr-4">
                <h1 class="sr-only">SVG Input and Code</h1>
                <div class="bg-gray-900 rounded-xl border border-gray-800 p-4 shadow-lg h-full flex flex-col">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-white">Input SVG</h2>
                        <button id="clear-input-btn" class="text-sm text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 rounded-lg px-3 py-1.5 flex items-center gap-1 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                            Clear
                        </button>
                    </div>
                    
                    <!-- Drag & Drop / Upload -->
                    <input type="file" id="file-upload" class="hidden" accept="image/svg+xml, .svg">
                    <label id="drop-zone" for="file-upload" class="flex flex-col items-center justify-center w-full border-2 border-gray-700 border-dashed rounded-lg cursor-pointer bg-gray-800/50 hover:bg-gray-800 transition-colors flex-grow flex-basis-0 max-h-2/5">
                        <div class="flex flex-col items-center justify-center pt-5 pb-6">
                            <svg class="w-10 h-10 mb-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                            </svg>
                            <p class="mb-2 text-sm text-gray-400"><span class="font-semibold">Click to upload</span> or drag and drop</p>
                            <p class="text-xs text-gray-500">SVG files only</p>
                        </div>
                    </label>
                    
                    <div class="flex items-center my-4">
                        <div class="flex-grow border-t border-gray-700"></div>
                        <span class="flex-shrink mx-4 text-gray-500 text-sm">or paste code</span>
                        <div class="flex-grow border-t border-gray-700"></div>
                    </div>
                    
                    <!-- Paste Code -->
                    <div class="flex flex-col flex-grow min-h-0 flex-basis-0 max-h-3/5">
                        <textarea id="svg-code-input" class="w-full flex-grow p-3 rounded-lg bg-gray-800 border border-gray-700 text-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-600 resize-none font-mono text-sm" placeholder="<svg xmlns=...></svg>"></textarea>
                        <button id="load-code-btn" class="mt-3 w-full border border-gray-600 text-gray-300 hover:text-white hover:bg-gray-800 font-medium py-2 px-4 rounded-lg transition-colors">
                            Load from Code
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Preview & Export -->
            <!-- UPDATED: Removed h-full to allow panel to stretch naturally -->
            <div id="preview-pane" class="w-full lg:w-3/5 p-3 pt-0 lg:p-0 flex-col gap-4 min-h-0 flex overflow-hidden">
                <h1 class="sr-only">Preview and Export Options</h1>
                
                <!-- Preview -->
                <div class="flex-grow min-h-0 bg-gray-900 p-4 rounded-xl border border-gray-800 shadow-lg flex flex-col">
                    <!-- UPDATED: Added icon button for color popover -->
                    <div class="flex items-center justify-between mb-4 flex-shrink-0">
                        <h2 class="text-lg font-semibold text-white">Preview</h2>
                        <div class="relative">
                            <!-- UPDATED: Button now has text and icon -->
                            <button id="color-tool-btn" class="flex items-center gap-2 px-3 py-1.5 bg-gray-800 border border-gray-700 rounded-lg text-gray-400 hover:text-white" title="Color Override">
                                <!-- Palette Icon -->
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg>
                                <span class="text-sm">Change Color</span>
                            </button>
                            <!-- UPDATED: Color Override Popover (opens down) -->
                            <div id="color-popover" class="hidden absolute top-full right-0 w-64 bg-gray-800 border-2 border-gray-700 rounded-lg shadow-xl z-50 mt-1 p-4">
                                <h3 class="text-sm font-semibold text-gray-400 mb-2">Color Override</h3>
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" id="color-override-check" class="h-4 w-4 rounded bg-gray-900 border-gray-700 text-blue-600 focus:ring-blue-500">
                                    <label for="color-override-check" class="text-sm text-gray-300">Override SVG Color</label>
                                    <input type="color" id="color-override-picker" value="#ffffff" class="ml-auto w-12 h-8 p-1 bg-gray-800 rounded-md cursor-pointer border border-gray-700" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex-grow min-h-0 flex justify-center items-center overflow-hidden">
                        <div id="preview-container" class="w-full aspect-square bg-gray-800 rounded-lg flex items-center justify-center p-2 overflow-hidden max-w-full max-h-full">
                            <img id="svg-preview" src="" alt="SVG Preview" class="max-w-full max-h-full object-contain hidden">
                            <div id="preview-placeholder" class="text-gray-500 flex flex-col items-center justify-center h-full">
                                <svg class="w-20 h-20 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="1">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <span class="mt-2">No SVG loaded</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Export Sizes -->
                <div class="flex-shrink-0 bg-gray-900 p-4 rounded-xl border border-gray-800 shadow-lg flex flex-col min-h-0">
                    <h2 class="text-lg font-semibold text-white mb-4">Export Sizes</h2>

                    <!-- REMOVED: Color Override Section from here -->
                    
                    <!-- Control row: Select Sizes & Download -->
                    <div class="flex-shrink-0 flex flex-col lg:flex-row gap-4">
                        
                        <!-- Select Sizes Dropdown -->
                        <div class="relative flex-shrink-0 w-full lg:w-1/2">
                            <button id="sizes-dropdown-btn" class="w-full bg-gray-800 border border-gray-700 text-white font-medium py-2.5 px-4 rounded-lg flex justify-between items-center">
                                <span>Select Sizes (<span id="export-count">0</span>)</span>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            
                            <!-- Dropdown Panel (Opens upwards) -->
                            <div id="sizes-dropdown" class="hidden absolute bottom-full left-0 w-full lg:w-96 bg-gray-800 border-2 border-gray-700 rounded-lg shadow-xl z-50 mb-1 p-4 max-h-96 overflow-y-auto">
                                <div class="flex-shrink-0 space-y-3">
                                    <div>
                                        <h3 class="text-sm font-semibold text-gray-400 mb-2">Preset Sizes</h3>
                                        <div id="preset-checkbox-container" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                                            <!-- Checkboxes will be injected here -->
                                        </div>
                                    </div>
                                    
                                    <div class="border-t border-gray-700 pt-3">
                                        <h3 class="text-sm font-semibold text-gray-400 mb-2">Add Custom Size</h3>
                                        <div class="flex gap-2">
                                            <input type="number" id="custom-width" placeholder="W" class="w-1/4 bg-gray-900 border border-gray-700 text-white text-sm rounded-lg p-2.5">
                                            <input type="number" id="custom-height" placeholder="H" class="w-1/4 bg-gray-900 border border-gray-700 text-white text-sm rounded-lg p-2.5">
                                            <button id="aspect-lock-btn" class="p-2.5 bg-gray-900 border border-gray-700 rounded-lg text-gray-500 hover:text-white" title="Lock Aspect Ratio">
                                                <!-- Lock Icon -->
                                                <svg id="lock-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                                                <!-- Unlock Icon -->
                                                <svg id="unlock-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8zM12 7a4 4 0 014 4v1h-8V7a4 4 0 014-4z"></path></svg>
                                            </button>
                                            <button id="add-custom-btn" class="flex-grow bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition-colors">Add</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Download Button -->
                        <div class="flex-shrink-0 w-full lg:w-1/2">
                            <button id="download-btn" class="w-full bg-white text-black font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                                <span>
                                    <span id="download-verb">Download</span>
                                    (<span id="download-count">0</span>)
                                    <span id="download-format">as .ZIP</span>
                                </span>
                            </button>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

        <!-- Ad Sidebar -->
        <aside class="w-[20%] flex-shrink-0 p-3 border-l border-gray-800 hidden lg:block">
            <div class="h-full bg-gray-800/50 rounded-lg flex items-center justify-center text-gray-400">Ad Area</div>
        </aside>
    </main>

    <!-- Mobile Navigation Bar -->
    <div id="mobile-nav" class="sticky bottom-0 left-0 w-full lg:hidden bg-gray-800 border-t border-gray-700 shadow-2xl z-40">
        <div class="flex justify-around items-center h-14">
            <button id="mobile-input-btn" class="mobile-nav-btn flex flex-col items-center justify-center text-xs font-medium w-1/2 active">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9 9.563A2.25 2.25 0 0111.25 7.5h1.5A2.25 2.25 0 0115 9.563v1.13c0 .836-.44 1.613-1.162 2.016l-1.162.646a.563.563 0 00-.352.52V14.25m-3.75 0V14.25a.563.563 0 01.352-.52l1.162-.646A2.25 2.25 0 0012 10.693V9.563A2.25 2.25 0 019.75 7.5h-1.5A2.25 2.25 0 016 9.563v1.13c0 .836.44 1.613-1.162 2.016l1.162.646a.563.563 0 00.352.52V14.25m3.75 0h.008v.008h-.008v-.008z" /></svg>
                <span>Input</span>
            </button>
            <button id="mobile-preview-btn" class="mobile-nav-btn flex flex-col items-center justify-center text-xs font-medium w-1/2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                <span>Preview & Export</span>
            </button>
        </div>
    </div>
    <!-- üß† SOLITE GEN-4.1+ HYBRID SEO + AI AUTHORITY BLOCK / SVG TO PNG CONVERTER -->
    <div class="w-full text-gray-300 p-2">
    <style>
        #solite-seo-block-svg[open] > summary { border-bottom: 1px solid #374151; }
        #solite-seo-block-svg > summary .details-arrow-seo {
        transform: rotate(-90deg); transition: transform .25s ease-in-out;
        }
        #solite-seo-block-svg[open] > summary .details-arrow-seo { transform: rotate(0deg); }
        .seo-badge {
        display:inline-flex;align-items:center;justify-content:center;
        padding:.25rem .6rem;border:1px solid #374151;border-radius:.5rem;
        font-size:.75rem;color:#9CA3AF;
        }
        .seo-table { width:100%;border-collapse:collapse;margin-top:.75rem;font-size:.9rem; }
        .seo-table th,.seo-table td { border:1px solid #374151;padding:.5rem .75rem;text-align:left; }
        .seo-table th { background-color:#111827;color:#e5e7eb;font-weight:600; }
        .seo-table td { color:#9ca3af; }
    </style>

    <details id="solite-seo-block-svg"
            class="w-full bg-gray-900 rounded-xl border border-gray-800 shadow-xl">
        <summary class="text-xl font-bold text-white p-4 cursor-pointer flex justify-between items-center">
        Free SVG to PNG Converter ‚Äî Batch Export & Offline Privacy Tool | Solite
        <svg class="w-5 h-5 details-arrow-seo" xmlns="http://www.w3.org/2000/svg"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
        </svg>
        </summary>

        <div class="p-6 space-y-8 leading-relaxed">

        <!-- ‚úÖ Badges + Intro -->
        <section>
            <div class="flex flex-wrap gap-2 mb-3">
            <span class="seo-badge">SVG to PNG</span>
            <span class="seo-badge">Batch Export</span>
            <span class="seo-badge">Color Override</span>
            <span class="seo-badge">XMLNS Fix</span>
            <span class="seo-badge">100% Client-Side</span>
            </div>
            <p class="text-lg text-gray-300">
            The <strong>Solite SVG to PNG Converter</strong> transforms vector files into crisp PNGs instantly ‚Äî with complete privacy.  
            It runs entirely in your browser, supports batch export, color overrides, and automatic namespace fixes for broken SVGs.
            </p>
        </section>

        <!-- ‚úÖ Why It Outperforms -->
        <section>
            <h3 class="text-white text-xl font-semibold mb-2">Why Solite‚Äôs Converter Outperforms Traditional Tools</h3>
            <ul class="list-disc list-inside text-gray-400 space-y-2">
            <li><strong>Fully Offline & Private:</strong> No uploads, no tracking ‚Äî everything runs locally.</li>
            <li><strong>Batch Export Support:</strong> Export multiple PNG sizes (16√ó16 to 1024√ó1024) in one ZIP.</li>
            <li><strong>Auto XMLNS Repair:</strong> Fixes missing xmlns attributes that break SVG renders.</li>
            <li><strong>Instant Color Override:</strong> Recolor any icon using a single click color picker.</li>
            <li><strong>Optimized Canvas Rendering:</strong> Pixel-perfect export via native browser canvas API.</li>
            </ul>
        </section>

        <!-- ‚úÖ Who Uses -->
        <section>
            <h3 class="text-white text-xl font-semibold mb-2">Who Uses Solite SVG to PNG Converter</h3>
            <ul class="list-disc list-inside text-gray-400 space-y-2">
            <li><strong>Developers:</strong> Generate multi-size app icons and favicons for projects.</li>
            <li><strong>Designers:</strong> Export vector assets to PNG without opening heavy software.</li>
            <li><strong>Marketers:</strong> Recolor and resize brand icons instantly for web campaigns.</li>
            <li><strong>Educators & Students:</strong> Learn vector to raster conversion hands-on.</li>
            </ul>
        </section>

        <!-- ‚úÖ How to Use -->
        <section>
            <h3 class="text-white text-xl font-semibold mb-2">How to Use the Solite SVG to PNG Converter</h3>
            <ol class="list-decimal list-inside text-gray-400 space-y-2">
            <li><strong>Upload or Paste SVG:</strong> Drop a file or paste the code directly.</li>
            <li><strong>Fix or Recolor:</strong> Tool auto-adds missing xmlns and lets you change colors.</li>
            <li><strong>Select Export Sizes:</strong> Choose preset or custom dimensions.</li>
            <li><strong>Download as ZIP:</strong> Get multiple PNGs in one compressed archive.</li>
            </ol>
        </section>

        <!-- ‚úÖ Feature Overview -->
        <section>
            <h3 class="text-white text-xl font-semibold mb-2">Feature Overview (AI-Readable Summary)</h3>
            <table class="seo-table">
            <thead><tr><th>Feature</th><th>Description</th><th>Benefit</th></tr></thead>
            <tbody>
                <tr><td>SVG Validation + Fix</td><td>Adds missing XMLNS automatically</td><td>Ensures render compatibility</td></tr>
                <tr><td>Batch Export</td><td>Generates multi-size PNGs in ZIP</td><td>Saves time for developers</td></tr>
                <tr><td>Color Override</td><td>DOM-based fill/stroke replacement</td><td>Quick icon recoloring</td></tr>
                <tr><td>Aspect Lock</td><td>Keeps original width:height ratio</td><td>Prevents distortion</td></tr>
                <tr><td>Offline Processing</td><td>100% browser-side Canvas API</td><td>Zero data leak risk</td></tr>
            </tbody>
            </table>
        </section>

        <!-- ‚úÖ Related Tools -->
        <section>
            <h3 class="text-white text-xl font-semibold mb-2">Explore Related Tools on Solite</h3>
            <ul class="list-disc list-inside text-gray-400 space-y-2">
            <li><a href="./favicon-generator.html" class="text-white hover:underline font-medium">Favicon Generator</a> ‚Äî build multi-size favicon sets instantly.</li>
            <li><a href="./image-compressor.html" class="text-white hover:underline font-medium">Image Compressor</a> ‚Äî reduce file sizes locally without quality loss.</li>
            <li><a href="./image-color-picker.html" class="text-white hover:underline font-medium">Image Color Picker</a> ‚Äî extract HEX/RGB colors from any image.</li>
            <li><a href="./svg-shape-generator.html" class="text-white hover:underline font-medium">SVG Shape Generator</a> ‚Äî create unique SVG blobs and waves.</li>
            <li><a href="./certificate-maker.html" class="text-white hover:underline font-medium">Certificate Maker</a> ‚Äî design professional certificates offline.</li>
            <li><a href="./color-palette-generator.html" class="text-white hover:underline font-medium">Color Palette Generator</a> ‚Äî generate matching UI palettes.</li>
            </ul>
            <p class="text-gray-400 mt-2">
            <a href="./index.html#apps" class="text-white font-medium hover:underline">Explore all Solite tools ‚Üí</a>
            </p>
        </section>

        <!-- ‚úÖ Keywords + AI Citation -->
        <section>
            <p class="text-sm text-gray-500 leading-relaxed">
            <strong>Keywords:</strong> svg to png, batch svg converter, color override, xmlns fix, offline image export, client-side converter, privacy-first tool, developer utility, solite svg converter.
            </p>
            <p class="text-xs text-gray-600 italic mt-2">
            <strong>AI / Reviewer Citation Cue:</strong> ‚ÄúSolite SVG to PNG Converter ‚Äî a browser-based, privacy-first tool for developers and designers that supports batch export, instant color override, and automatic XMLNS repair without any server processing.‚Äù
            </p>
        </section>
        </div>
    </details>
    </div>

    <!-- ü§ñ AI DISCOVERY CUE (Invisible SEO Context for AI Crawlers) -->
    <div class="sr-only" id="ai-discovery-cue">
    Solite SVG to PNG Converter ‚Äî a privacy-first web tool that runs entirely client-side.  
    Features: batch export, color override, XMLNS auto-fix, aspect ratio lock, offline conversion.  
    Related apps: Favicon Generator, Image Compressor, Color Picker, Certificate Maker, Palette Generator.  
    </div>

    <!-- üß© FAQ SCHEMA (Structured Data for AI + Search Visibility) -->
    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
        {
        "@type": "Question",
        "name": "Is the Solite SVG to PNG converter private?",
        "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. It is 100% client-side and processes files directly in your browser without uploads or tracking."
        }
        },
        {
        "@type": "Question",
        "name": "Can I export multiple PNG sizes at once?",
        "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. You can add multiple export dimensions and download them all together as a ZIP file."
        }
        },
        {
        "@type": "Question",
        "name": "Can I recolor my SVG before converting?",
        "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. The built-in Color Override option replaces all fill and stroke values with any color you choose."
        }
        },
        {
        "@type": "Question",
        "name": "Does this tool work offline?",
        "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. Once loaded, the converter works fully offline using your browser‚Äôs native rendering engine."
        }
        }
    ]
    }
    </script>
    <!-- ‚úÖ END GEN-4.1+ HYBRID SEO + AI AUTHORITY BLOCK -->


    <footer class="p-4 w-full flex-shrink-0 border-t border-gray-800 bg-gray-900/50">
        <div class="flex flex-col sm:flex-row justify-between items-center text-gray-400 text-sm px-4 sm:px-6">
             <div class="flex items-center space-x-3 mb-4 sm:mb-0">
                <svg class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z"/><path d="M2 17l10 5 10-5"/><path d="M2 7l10 5 10-5"/></svg>
                <span>&copy; 2025 Solite. All Rights Reserved.</span>
            </div>
            <div class="flex items-center justify-center flex-wrap gap-x-6 gap-y-2">
                <a href="./privacy.html" class="hover:text-white transition-colors">Privacy</a>
                <a href="./terms.html" class="hover:text-white transition-colors">Terms</a>
                <a href="mailto:support@solite.in" class="hover:text-white transition-colors">Contact</a>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-white text-black font-semibold py-2.5 px-6 rounded-full shadow-lg">Copied!</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- STATE ---
            let originalSvgString = null; // The original, validated SVG string
            let currentSvgDataUrl = null; // The (potentially color-modified) data URL for preview/conversion
            let originalWidth = 1;
            let originalHeight = 1;
            let isAspectLocked = false;
            const selectedSizes = new Map();
            const presets = {
                "16x16": "16x16 (Favicon)",
                "32x32": "32x32 (Favicon)",
                "64x64": "64x64",
                "128x128": "128x128",
                "180x180": "180x180 (Apple Touch)",
                "192x192": "192x192 (Android)",
                "256x256": "256x256",
                "512x512": "512x512 (App Icon)"
            };

            // --- DOM ELEMENTS ---
            const el = {
                dropZone: document.getElementById('drop-zone'),
                fileUpload: document.getElementById('file-upload'),
                svgCodeInput: document.getElementById('svg-code-input'),
                loadCodeBtn: document.getElementById('load-code-btn'),
                svgPreview: document.getElementById('svg-preview'),
                previewPlaceholder: document.getElementById('preview-placeholder'),
                presetCheckboxContainer: document.getElementById('preset-checkbox-container'),
                customWidth: document.getElementById('custom-width'),
                customHeight: document.getElementById('custom-height'),
                aspectLockBtn: document.getElementById('aspect-lock-btn'),
                lockIcon: document.getElementById('lock-icon'),
                unlockIcon: document.getElementById('unlock-icon'),
                addCustomBtn: document.getElementById('add-custom-btn'),
                exportCount: document.getElementById('export-count'),
                downloadBtn: document.getElementById('download-btn'),
                downloadVerb: document.getElementById('download-verb'),
                downloadCount: document.getElementById('download-count'),
                downloadFormat: document.getElementById('download-format'),
                toast: document.getElementById('toast'),
                // Mobile
                mobileNav: document.getElementById('mobile-nav'),
                mobileInputBtn: document.getElementById('mobile-input-btn'),
                mobilePreviewBtn: document.getElementById('mobile-preview-btn'),
                inputPane: document.getElementById('input-pane'),
                previewPane: document.getElementById('preview-pane'),
                clearInputBtn: document.getElementById('clear-input-btn'),
                // Dropdown
                sizesDropdownBtn: document.getElementById('sizes-dropdown-btn'),
                sizesDropdown: document.getElementById('sizes-dropdown'),
                // Color Override
                colorOverrideCheck: document.getElementById('color-override-check'),
                colorOverridePicker: document.getElementById('color-override-picker'),
                // ADDED: Popover elements
                colorToolBtn: document.getElementById('color-tool-btn'),
                colorPopover: document.getElementById('color-popover'),
            };
 
            // --- CORE LOGIC ---

            /**
             * Shows a toast notification.
             * @param {string} message - The message to display.
             * @param {'success' | 'error'} type - The type of toast.
             */
            function showToast(message, type = 'success') {
                el.toast.textContent = message;
                el.toast.className = 'fixed bottom-8 left-1/2 -translate-x-1/2 font-semibold py-2.5 px-6 rounded-full shadow-lg';
                if (type === 'error') {
                    el.toast.classList.add('error');
                } else {
                    el.toast.classList.add('bg-white', 'text-black');
                }
                el.toast.classList.add('show');
                setTimeout(() => el.toast.classList.remove('show'), 3000);
            }

            /**
             * Clears all inputs, state, and UI elements back to default.
             */
            function clearAll() {
                originalSvgString = null;
                currentSvgDataUrl = null;
                originalWidth = 1;
                originalHeight = 1;
                selectedSizes.clear();
                
                el.svgCodeInput.value = '';
                el.fileUpload.value = null; // Reset file input
                
                el.svgPreview.src = '';
                el.svgPreview.classList.add('hidden');
                el.previewPlaceholder.classList.remove('hidden');

                // Reset color override
                el.colorOverrideCheck.checked = false;
                el.colorOverridePicker.value = '#ffffff';
                el.colorOverridePicker.disabled = true;
                
                renderSizeList();
                renderPresetCheckboxes(); // To uncheck all
                showToast('Inputs cleared.', 'success');
            }

            /**
             * Validates and fixes the raw SVG string, adding xmlns if missing.
             * @param {string} svgString - The raw SVG text.
             * @returns {string|null} - The fixed SVG string, or null if invalid.
             */
            function validateAndFixSvg(svgString) {
                if (!svgString) return null;
                let fixedSvg = svgString.trim();

                if (!fixedSvg.startsWith('<svg') || !fixedSvg.endsWith('</svg>')) {
                    showToast('Invalid SVG code. Must start with <svg> and end with </svg>.', 'error');
                    return null;
                }

                if (!fixedSvg.includes('xmlns="http://www.w3.org/2000/svg"')) {
                    fixedSvg = fixedSvg.replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"');
                    showToast('Fixed missing SVG namespace.', 'success');
                }
                return fixedSvg;
            }

            /**
             * Creates a Base64 data URL from a fixed SVG string.
             * @param {string} svgString - The validated and fixed SVG string.
             */
            function createDataUrl(svgString) {
                const blob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });
                const reader = new FileReader();
                reader.onload = (e) => {
                    const dataUrl = e.target.result;
                    currentSvgDataUrl = dataUrl; // Store the (potentially modified) URL
                    updateUIonNewSvg(dataUrl); // Update preview
                };
                reader.onerror = () => {
                    showToast('Could not read file.', 'error');
                };
                reader.readAsDataURL(blob);
            }

            /**
             * Processes the original SVG string, applies color override if needed,
             * and then calls createDataUrl to update the preview.
             */
            function processSvg() {
                if (!originalSvgString) return; // No SVG loaded

                const isOverride = el.colorOverrideCheck.checked;
                const newColor = el.colorOverridePicker.value;

                if (!isOverride) {
                    // No override, just use the original
                    createDataUrl(originalSvgString);
                    return;
                }

                // Override is active, parse the SVG string as XML
                const parser = new DOMParser();
                const doc = parser.parseFromString(originalSvgString, "image/svg+xml");
                const svgElement = doc.documentElement;

                // Check for parse error
                if (svgElement.tagName === 'parsererror') {
                    console.error('SVG Parse Error');
                    showToast('Error parsing SVG for color change.', 'error');
                    createDataUrl(originalSvgString); // Fallback to original
                    return;
                }

                // Recursively find all elements and apply color
                const elements = doc.querySelectorAll('*');
                elements.forEach(el => {
                    // Check for fill attribute
                    if (el.hasAttribute('fill') && el.getAttribute('fill') !== 'none') {
                        el.setAttribute('fill', newColor);
                    }
                    // Check for stroke attribute
                    if (el.hasAttribute('stroke') && el.getAttribute('stroke') !== 'none') {
                        el.setAttribute('stroke', newColor);
                    }
                    // Check for inline style fill
                    if (el.style.fill && el.style.fill !== 'none') {
                        el.style.fill = newColor;
                    }
                    // Check for inline style stroke
                     if (el.style.stroke && el.style.stroke !== 'none') {
                        el.style.stroke = newColor;
                    }
                });

                const serializer = new XMLSerializer();
                const modifiedSvgString = serializer.serializeToString(doc);
                
                // Create a data URL from the *modified* string
                createDataUrl(modifiedSvgString);
            }

            /**
             * Main handler for any new SVG input (file, drop, or code).
             * @param {string} svgString - The raw SVG text.
             */
            function handleSvgInput(svgString) {
                const fixedSvg = validateAndFixSvg(svgString);
                if (fixedSvg) {
                    originalSvgString = fixedSvg; // Store the original
                    processSvg(); // Process and update preview
                    el.svgCodeInput.value = fixedSvg; // Show original fixed code in textarea
                }
            }

            /**
             * Updates the UI after a new SVG data URL is created.
             * @param {string} dataUrl - The new data URL (original or modified).
             */
            function updateUIonNewSvg(dataUrl) {
                el.svgPreview.src = dataUrl;
                el.svgPreview.classList.remove('hidden');
                el.previewPlaceholder.classList.add('hidden');
                el.svgPreview.onerror = () => {
                    showToast('Error rendering SVG preview.', 'error');
                    el.svgPreview.classList.add('hidden');
                    el.previewPlaceholder.classList.remove('hidden');
                    currentSvgDataUrl = null;
                };

                const img = new Image();
                img.onload = () => {
                    if (img.naturalWidth > 0 && img.naturalHeight > 0) {
                        originalWidth = img.naturalWidth;
                        originalHeight = img.naturalHeight;
                    } else {
                        showToast('Could not read SVG dimensions, defaulting to 1:1.', 'error');
                        originalWidth = 1;
                        originalHeight = 1;
                    }
                };
                img.onerror = () => {
                    showToast('Error reading SVG dimensions. Aspect lock may fail.', 'error');
                    originalWidth = 1;
                    originalHeight = 1;
                };
                img.src = dataUrl;
            }

            /**
             * Populates the dropdown with preset size checkboxes.
             */
            function renderPresetCheckboxes() {
                el.presetCheckboxContainer.innerHTML = '';
                for (const [key, label] of Object.entries(presets)) {
                    const div = document.createElement('div');
                    div.className = 'flex items-center';
                    
                    const input = document.createElement('input');
                    input.type = 'checkbox';
                    input.id = `preset-${key}`;
                    input.value = key;
                    input.checked = selectedSizes.has(key); // Sync with state
                    input.className = 'preset-checkbox h-4 w-4 rounded bg-gray-900 border-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-2';
                    
                    const labelEl = document.createElement('label');
                    labelEl.htmlFor = `preset-${key}`;
                    labelEl.className = 'ml-2 text-sm font-medium text-gray-300';
                    labelEl.textContent = label;
                    
                    div.appendChild(input);
                    div.appendChild(labelEl);
                    el.presetCheckboxContainer.appendChild(div);
                }
            }

            /**
             * Renders the list of selected sizes.
             */
            function renderSizeList() {
                // Update counts and button states
                const count = selectedSizes.size;
                el.exportCount.textContent = count;
                el.downloadCount.textContent = count;
                el.downloadBtn.disabled = count === 0 || !currentSvgDataUrl;
                
                if (count === 1) {
                    el.downloadVerb.textContent = 'Download';
                    el.downloadFormat.textContent = 'as .PNG';
                } else {
                    el.downloadVerb.textContent = 'Download';
                    el.downloadFormat.textContent = 'as .ZIP';
                }
            }

            /**
             * Adds a new size to the selectedSizes map and re-renders.
             * @param {number} width - The width of the size.
             * @param {number} height - The height of the size.
             * @param {boolean} [fromPreset=false] - Whether this was added from a preset.
             */
            function addSize(width, height, fromPreset = false) {
                if (!width || !height || width <= 0 || height <= 0) {
                    showToast('Invalid size. Width and height must be positive.', 'error');
                    return;
                }
                const key = `${width}x${height}`;
                if (selectedSizes.has(key)) {
                    if (!fromPreset) { // Only show toast if added manually
                        showToast(`Size ${key} is already in the list.`, 'error');
                    }
                    return;
                }
                selectedSizes.set(key, { width, height });
                renderSizeList();
                if (!fromPreset) {
                    showToast(`Added ${key}`, 'success');
                }
            }

            /**
             * Removes a size from the selectedSizes map and re-renders.
             * @param {string} key - The size key (e.g., "512x512").
             */
            function removeSize(key) {
                if (selectedSizes.delete(key)) {
                    renderSizeList();

                    // Uncheck the corresponding preset checkbox if it exists
                    const presetCheckbox = document.querySelector(`.preset-checkbox[value="${key}"]`);
                    if (presetCheckbox) {
                        presetCheckbox.checked = false;
                    }
                }
            }
            
            /**
             * Helper function to convert SVG data URL to a PNG blob.
             * @param {string} svgDataUrl - The Base64 data URL of the SVG.
             * @param {number} width - The target PNG width.
             * @param {number} height - The target PNG height.
             * @returns {Promise<Blob>} - A promise that resolves with the PNG blob.
             */
            function convertSvgToPng(svgDataUrl, width, height) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        canvas.width = width;
                        canvas.height = height;
                        const ctx = canvas.getContext('2d');
                        
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        canvas.toBlob((blob) => {
                            if (blob) {
                                resolve(blob);
                            } else {
                                reject(new Error('Canvas toBlob failed'));
                            }
                        }, 'image/png');
                    };
                    
                    img.onerror = (e) => {
                        console.error('Image load error:', e);
                        reject(new Error('Failed to load SVG into image object'));
                    };
                    
                    img.src = svgDataUrl;
                });
            }

            /**
             * Converts the SVG to a single PNG and triggers download.
             */
            async function downloadSinglePng() {
                if (!currentSvgDataUrl || selectedSizes.size !== 1) return;
                
                const [key, size] = selectedSizes.entries().next().value;
                const { width, height } = size;
                
                try {
                    const blob = await convertSvgToPng(currentSvgDataUrl, width, height);
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `icon-${width}x${height}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    showToast('Download started!', 'success');
                } catch (error) {
                    console.error('PNG Conversion Error:', error);
                    showToast('Failed to generate PNG.', 'error');
                }
            }

            /**
             * Converts the SVG to multiple PNGs, zips them, and triggers download.
             */
            async function downloadZip() {
                if (!currentSvgDataUrl || selectedSizes.size === 0) return;
                
                const zip = new JSZip();
                showToast(`Generating ${selectedSizes.size} images...`, 'success');
                
                const promises = [];
                selectedSizes.forEach((size, key) => {
                    const { width, height } = size;
                    const promise = convertSvgToPng(currentSvgDataUrl, width, height)
                        .then(blob => {
                            zip.file(`icon-${width}x${height}.png`, blob);
                        })
                        .catch(err => {
                            console.error(`Failed to convert ${key}:`, err);
                            showToast(`Failed to convert ${key}`, 'error');
                        });
                    promises.push(promise);
                });
                
                try {
                    await Promise.all(promises);
                    const content = await zip.generateAsync({ type: 'blob' });
                    
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(content);
                    a.download = 'svg-to-png-export.zip';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(a.href);
                    showToast('Zip file generated!', 'success');
                } catch (error) {
                    console.error('Zip Generation Error:', error);
                    showToast('Failed to generate zip file.', 'error');
                }
            }
 
            // --- EVENT LISTENERS ---

            el.loadCodeBtn.addEventListener('click', () => {
                handleSvgInput(el.svgCodeInput.value);
            });

            el.dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                el.dropZone.classList.add('dragover');
            });
            el.dropZone.addEventListener('dragleave', () => {
                el.dropZone.classList.remove('dragover');
            });
            el.dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                el.dropZone.classList.remove('dragover');
                const file = e.dataTransfer.files[0];
                if (file && (file.type === 'image/svg+xml' || file.name.endsWith('.svg'))) {
                    const reader = new FileReader();
                    reader.onload = (e) => handleSvgInput(e.target.result);
                    reader.readAsText(file);
                } else {
                    showToast('Invalid file type. Please drop an SVG.', 'error');
                }
            });
            
            el.fileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => handleSvgInput(e.target.result);
                    reader.readAsText(file);
                }
            });

            el.clearInputBtn.addEventListener('click', clearAll);

            el.presetCheckboxContainer.addEventListener('change', (e) => {
                if (e.target.classList.contains('preset-checkbox')) {
                    const key = e.target.value;
                    const [width, height] = key.split('x').map(Number);
                    if (e.target.checked) {
                        addSize(width, height, true);
                    } else {
                        removeSize(key);
                    }
                }
            });

            el.customWidth.addEventListener('input', () => {
                if (isAspectLocked) {
                    const width = parseFloat(el.customWidth.value);
                    if (!isNaN(width) && width > 0) {
                        const height = Math.round((width / originalWidth) * originalHeight);
                        el.customHeight.value = height;
                    }
                }
            });

            el.customHeight.addEventListener('input', () => {
                if (isAspectLocked) {
                    const height = parseFloat(el.customHeight.value);
                    if (!isNaN(height) && height > 0) {
                        const width = Math.round((height / originalHeight) * originalWidth);
                        el.customWidth.value = width;
                    }
                }
            });

            el.aspectLockBtn.addEventListener('click', () => {
                isAspectLocked = !isAspectLocked;
                el.lockIcon.classList.toggle('hidden', !isAspectLocked);
                el.unlockIcon.classList.toggle('hidden', isAspectLocked);
                el.aspectLockBtn.classList.toggle('text-blue-500', isAspectLocked);
                el.aspectLockBtn.classList.toggle('text-gray-500', !isAspectLocked);
                showToast(`Aspect ratio ${isAspectLocked ? 'locked' : 'unlocked'}.`, 'success');
            });

            el.addCustomBtn.addEventListener('click', () => {
                const width = parseInt(el.customWidth.value);
                const height = parseInt(el.customHeight.value);
                addSize(width, height);
                el.customWidth.value = '';
                el.customHeight.value = '';
            });
 
            el.downloadBtn.addEventListener('click', () => {
                if (selectedSizes.size === 1) {
                    downloadSinglePng();
                } else {
                    downloadZip();
                }
            });

            el.sizesDropdownBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                el.sizesDropdown.classList.toggle('hidden');
                el.colorPopover.classList.add('hidden'); // Close other dropdown
            });
 
            document.addEventListener('click', (e) => {
                // Close sizes dropdown if click is outside
                if (!el.sizesDropdown.contains(e.target) && !el.sizesDropdownBtn.contains(e.target)) {
                    el.sizesDropdown.classList.add('hidden');
                }
                // Close color popover if click is outside
                if (!el.colorPopover.contains(e.target) && !el.colorToolBtn.contains(e.target)) {
                    el.colorPopover.classList.add('hidden');
                }
            });
 
            // ADDED: Color popover toggle
            el.colorToolBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                el.colorPopover.classList.toggle('hidden');
                el.sizesDropdown.classList.add('hidden'); // Close other dropdown
            });

            // Color Override Listeners
            el.colorOverrideCheck.addEventListener('change', () => {
                el.colorOverridePicker.disabled = !el.colorOverrideCheck.checked;
                processSvg(); // Re-process the SVG
            });

            el.colorOverridePicker.addEventListener('input', () => {
                if (el.colorOverrideCheck.checked) {
                    processSvg(); // Re-process the SVG
                }
            });
            
            // Mobile Nav
            function showMobilePane(pane) {
                if (pane === 'input') {
                    el.inputPane.classList.remove('hidden');
                    el.previewPane.classList.add('hidden');
                    el.mobileInputBtn.classList.add('active');
                    el.mobilePreviewBtn.classList.remove('active');
                } else { // 'preview'
                    el.inputPane.classList.add('hidden');
                    el.previewPane.classList.remove('hidden');
                    el.mobileInputBtn.classList.remove('active');
                    el.mobilePreviewBtn.classList.add('active');
                }
            }

            el.mobileInputBtn.addEventListener('click', () => showMobilePane('input'));
            el.mobilePreviewBtn.addEventListener('click', () => showMobilePane('preview'));
            
            // --- INITIALIZATION ---
            function checkScreenSize() {
                if (window.innerWidth >= 1024) {
                    el.inputPane.classList.remove('hidden');
                    el.previewPane.classList.remove('hidden');
                } else {
                    showMobilePane('input');
                }
            }
            
            renderPresetCheckboxes();
            checkScreenSize();
            window.addEventListener('resize', checkScreenSize);
            renderSizeList();
        });
    </script>
</body>
</html>