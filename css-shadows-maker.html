<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO & Social Sharing Meta Tags -->
    <title>CSS Shadows Maker | Solite</title>
    <meta name="description" content="Generate beautiful CSS box and text shadows instantly with live preview. Free, browser-based, privacy-first tool by Solite.">
    <link rel="canonical" href="https://solite.in/css-shadows-maker.html">
    <meta name="robots" content="index, follow">

    <!-- Open Graph for social + AI -->
    <meta property="og:title" content="CSS Shadows Maker | Solite">
    <meta property="og:description" content="Free browser-based CSS shadow generator with live preview. No login, no ads.">
    <meta property="og:url" content="https://solite.in/css-shadows-maker.html">
    <meta property="og:site_name" content="Solite App Suite">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://solite.in/assets/css-shadow-thumbnail.png">

    <!-- AdSense Meta Tag -->
    <meta name="google-adsense-account" content="ca-pub-6623613371208692">

    <!-- Vercel Analytics -->
    <script>
        window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
    
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "CSS Shadow Generator | Solite",
      "url": "https://solite.in/css-shadows-maker.html",
      "description": "A free, privacy-first, browser-based CSS shadow generator with live preview and code export.",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "All",
      "browserRequirements": "Requires JavaScript. Works fully client-side.",
      "creator": {
        "@type": "Organization",
        "name": "Solite",
        "url": "https://solite.in"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Menlo', 'Monaco', 'Consolas', 'monospace'],
                    },
                },
            },
        }
    </script>
    <style>
        #toast { transform: translateY(-150%); transition: transform 0.3s ease-in-out; }
        #toast.show { transform: translateY(2rem); }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; background: #ffffff; cursor: pointer; border-radius: 9999px; margin-top: -6px; }
        input[type=range]::-moz-range-thumb { width: 16px; height: 16px; background: #ffffff; cursor: pointer; border-radius: 9999px; }
        .custom-select { -webkit-appearance: none; -moz-appearance: none; appearance: none; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #111827; }
        ::-webkit-scrollbar-thumb { background-color: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background-color: #6b7280; }
        html { scrollbar-color: #4b5563 #111827; }
        .tab-btn.active { border-bottom-width: 2px; border-color: #fff; color: #fff; }
    </style>
</head>
<body class="bg-black text-gray-200 flex flex-col min-h-screen font-sans">
    
    <!-- Header -->
    <header class="p-3 sm:p-4 w-full flex-shrink-0 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-xl z-30 border-b border-gray-200 dark:border-gray-800">
        <div class="flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-3" aria-label="Solite Homepage">
                 <svg class="h-8 w-8 text-gray-900 dark:text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5L12 2z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 7l10 5 10-5"/>
                </svg>
                <span class="text-xl font-bold text-gray-900 dark:text-white uppercase tracking-wider">Solite</span>
                <span class="h-6 w-px bg-gray-300 dark:bg-gray-700"></span>
                <span class="text-lg font-semibold text-gray-600 dark:text-gray-400">CSS Shadow Generator</span>
            </a>
             <div class="flex items-center space-x-4">
                <a href="index.html#apps" class="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-1.5">
                    <span>Free Tools</span>
                    <svg class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5-5 5" /></svg>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow flex">
        <div class="flex-grow w-full lg:w-[85%] p-3 flex flex-col lg:flex-row gap-4">
            
            <!-- Controls Panel -->
            <aside id="controls-panel" class="w-full lg:w-96 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 p-6 space-y-6 overflow-y-auto" aria-labelledby="controls-heading">
                <h2 id="controls-heading" class="text-xl font-bold text-white">CSS Shadow Generator</h2>

                <!-- Shadow Type Tabs -->
                <div class="border-b border-gray-800">
                    <div class="flex -mb-px" aria-label="Shadow Type Selection">
                        <button class="tab-btn active text-sm font-medium py-3 px-4" data-shadow-type="box">Box Shadow</button>
                        <button class="tab-btn text-sm font-medium py-3 px-4" data-shadow-type="text">Text Shadow</button>
                    </div>
                </div>
                
                <div id="tab-content-container">
                    <!-- Shadow Layers -->
                    <div class="space-y-4">
                        <h3 class="font-semibold text-gray-200">Shadow Layers</h3>
                        <div id="shadow-layers-list" class="space-y-2">
                            <!-- Shadow cards will be injected here -->
                        </div>
                        <button id="add-shadow-btn" class="w-full bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                            <span>Add New Shadow</span>
                        </button>
                    </div>

                    <!-- Shadow Controls -->
                    <div id="shadow-controls" class="space-y-4 border-t border-gray-800 pt-4 mt-4">
                        <h3 class="font-semibold text-gray-200">Layer Properties</h3>
                        <label class="block"><span class="text-sm">Horizontal Offset (px)</span><input type="range" id="offset-x" min="-100" max="100" value="5" aria-label="Horizontal Offset" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"></label>
                        <label class="block"><span class="text-sm">Vertical Offset (px)</span><input type="range" id="offset-y" min="-100" max="100" value="5" aria-label="Vertical Offset" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"></label>
                        <label class="block"><span class="text-sm">Blur Radius (px)</span><input type="range" id="blur-radius" min="0" max="100" value="10" aria-label="Blur Radius" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"></label>
                        <label id="spread-radius-label" class="block"><span class="text-sm">Spread Radius (px)</span><input type="range" id="spread-radius" min="-50" max="50" value="0" aria-label="Spread Radius" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"></label>
                        <label class="block"><span class="text-sm">Color</span><input type="color" id="shadow-color" value="#000000" aria-label="Shadow Color" class="w-full p-1 h-10 bg-gray-800 rounded-lg cursor-pointer border border-gray-700"></label>
                        <label class="block"><span class="text-sm">Opacity</span><input type="range" id="shadow-opacity" min="0" max="1" value="0.5" step="0.01" aria-label="Shadow Opacity" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"></label>
                        <label id="inset-label" class="flex items-center space-x-2"><input type="checkbox" id="inset-checkbox" class="h-4 w-4 rounded bg-gray-700 border-gray-600 text-blue-500 focus:ring-blue-500"><span>Inset</span></label>
                    </div>
                </div>
            </aside>

            <!-- Live Preview Area -->
            <div class="flex-1 flex flex-col bg-gray-900 rounded-xl border border-gray-800 overflow-hidden">
                <div id="preview-area" class="relative flex-grow flex flex-col items-center justify-center bg-gray-100 p-4">
                    <div id="accessibility-checker" class="hidden absolute top-0 left-0 w-full bg-black/10 backdrop-blur-sm p-3 text-xs z-20 text-gray-800">
                        <h4 class="font-bold text-gray-800 mb-1">Accessibility (WCAG)</h4>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Contrast Ratio: <strong id="contrast-ratio" class="text-gray-900">N/A</strong></span>
                            <div class="flex gap-2">
                                <span id="aa-badge" class="px-2 py-0.5 rounded-full font-semibold">AA</span>
                                <span id="aaa-badge" class="px-2 py-0.5 rounded-full font-semibold">AAA</span>
                            </div>
                        </div>
                    </div>

                    <h1 class="sr-only">CSS Shadow Generator Live Preview</h1>
                    <div id="box-shadow-preview" class="w-64 h-64 bg-white rounded-lg flex items-center justify-center text-black text-xl font-bold transition-all duration-100 ease-linear">
                        Box Shadow
                    </div>
                    <div id="text-shadow-preview" class="hidden text-black text-6xl font-extrabold mt-8 transition-all duration-100 ease-linear">
                        Text Shadow
                    </div>
                </div>
                <!-- Generated CSS Output -->
                <div class="flex-shrink-0 bg-gray-800/50 border-t border-gray-800 p-4 space-y-3">
                    <div class="flex justify-between items-center">
                        <h3 class="font-semibold text-gray-200">Generated CSS</h3>
                    </div>
                    <textarea id="css-output" readonly class="w-full h-32 p-3 rounded-lg bg-gray-900 border border-gray-700 font-mono text-sm resize-none" aria-label="Generated CSS code"></textarea>
                    <div class="grid grid-cols-2 gap-2">
                        <button id="copy-css-btn" class="w-full bg-white hover:bg-gray-200 text-black font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                            <span>Copy CSS</span>
                        </button>
                        <button id="copy-html-btn" class="w-full bg-gray-700 hover:bg-gray-600 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-2">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5" /></svg>
                            <span>Copy HTML</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ad Sidebar -->
        <aside class="w-[15%] flex-shrink-0 p-3 border-l border-gray-800 hidden lg:block">
            <div class="h-full bg-gray-800/50 rounded-lg flex items-center justify-center text-gray-400">
                Ad Area
            </div>
        </aside>
    </main>

    <footer class="p-4 w-full flex-shrink-0 border-t border-gray-200 dark:border-gray-800">
        <div class="flex flex-col sm:flex-row justify-between items-center text-gray-400 text-sm">
             <div class="flex items-center space-x-3 mb-4 sm:mb-0">
                <svg class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5L12 2z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 7l10 5 10-5"/>
                </svg>
                <span>&copy; 2024 Solite. All Rights Reserved.</span>
            </div>
            <div class="flex items-center space-x-4">
                <a href="./privacy.html" class="hover:text-gray-900 dark:hover:text-white transition-colors">Privacy Policy</a>
                <a href="./terms.html" class="hover:text-gray-900 dark:hover:text-white transition-colors">Terms</a>
                <a href="mailto:support@solite.com" class="hover:text-white transition-colors">Contact</a>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-0 left-1/2 -translate-x-1/2 bg-white text-black font-semibold py-2 px-5 rounded-b-lg shadow-lg z-50">CSS Copied!</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const offsetX = document.getElementById('offset-x');
            const offsetY = document.getElementById('offset-y');
            const blurRadius = document.getElementById('blur-radius');
            const spreadRadius = document.getElementById('spread-radius');
            const shadowColor = document.getElementById('shadow-color');
            const shadowOpacity = document.getElementById('shadow-opacity');
            const insetCheckbox = document.getElementById('inset-checkbox');
            const spreadRadiusLabel = document.getElementById('spread-radius-label');
            const insetLabel = document.getElementById('inset-label');

            const cssOutput = document.getElementById('css-output');
            const copyCssBtn = document.getElementById('copy-css-btn');
            const copyHtmlBtn = document.getElementById('copy-html-btn');
            const toast = document.getElementById('toast');

            const boxShadowPreview = document.getElementById('box-shadow-preview');
            const textShadowPreview = document.getElementById('text-shadow-preview');
            const tabBtns = document.querySelectorAll('.tab-btn');
            const addShadowBtn = document.getElementById('add-shadow-btn');
            const shadowLayersList = document.getElementById('shadow-layers-list');

            let activeShadowType = 'box'; // 'box' or 'text'
            let shadows = []; // Array to hold all shadow objects
            let currentShadowId = null; // ID of the shadow currently being edited

            // --- Utility Functions ---
            function hexToRgb(hex) {
                const r = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return r ? { r: parseInt(r[1], 16), g: parseInt(r[2], 16), b: parseInt(r[3], 16) } : null;
            }

            function hexToRgbA(hex, alpha) { // Helper function to convert hex to rgba
                let c;
                if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
                    c= hex.substring(1).split('');
                    if(c.length===3){
                        c= [c[0], c[0], c[1], c[1], c[2], c[2]];
                    }
                    c= '0x'+c.join('');
                    return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+alpha+')';
                }
                throw new Error('Bad Hex');
            }

            function getLuminance(r, g, b) {
                const a = [r, g, b].map(v => { v /= 255; return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4); });
                return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
            }

            function getContrast(rgb1, rgb2) {
                const lum1 = getLuminance(rgb1.r, rgb1.g, rgb1.b);
                const lum2 = getLuminance(rgb2.r, rgb2.g, rgb2.b);
                return (Math.max(lum1, lum2) + 0.05) / (Math.min(lum1, lum2) + 0.05);
            }

            function updateAccessibilityChecker() {
                const checker = document.getElementById('accessibility-checker');
                if (activeShadowType !== 'text') {
                    checker.classList.add('hidden');
                    return;
                }
                checker.classList.remove('hidden');

                const previewArea = document.getElementById('preview-area');
                // The text color is black and the background is gray-100 by default for the text preview
                const textColor = hexToRgb('#000000');
                const bgColor = hexToRgb('#F3F4F6');

                const contrast = getContrast(textColor, bgColor);

                document.getElementById('contrast-ratio').textContent = contrast.toFixed(2);
                const aaBadge = document.getElementById('aa-badge');
                const aaaBadge = document.getElementById('aaa-badge');
                // Using large text criteria (>= 3 for AA, >= 4.5 for AAA)
                aaBadge.className = `px-2 py-0.5 rounded-full font-semibold ${contrast >= 3 ? 'bg-green-500 text-white' : 'bg-red-500 text-white'}`;
                aaaBadge.className = `px-2 py-0.5 rounded-full font-semibold ${contrast >= 4.5 ? 'bg-green-500 text-white' : 'bg-red-500 text-white'}`;
            }

            function generateUniqueId() {
                return '_' + Math.random().toString(36).substr(2, 9);
            }

            function addShadow() {
                const newShadow = {
                    id: generateUniqueId(),
                    type: activeShadowType,
                    offsetX: 5,
                    offsetY: 5,
                    blurRadius: 10,
                    spreadRadius: (activeShadowType === 'box' ? 0 : undefined),
                    color: '#000000',
                    opacity: 0.5,
                    inset: (activeShadowType === 'box' ? false : undefined),
                };
                shadows.push(newShadow);
                selectShadow(newShadow.id);
                saveState();
            }

            function deleteShadow(id) {
                shadows = shadows.filter(s => s.id !== id);
                if (shadows.length === 0) {
                    addShadow(); // Ensure there's always at least one shadow
                } else if (currentShadowId === id) {
                    selectShadow(shadows[0].id); // Select the first shadow if the current one was deleted
                } else {
                    renderShadowLayersList();
                    updateShadow();
                }
                saveState();
            }

            function selectShadow(id) {
                currentShadowId = id;
                const selected = shadows.find(s => s.id === id);
                if (selected) {
                    offsetX.value = selected.offsetX;
                    offsetY.value = selected.offsetY;
                    blurRadius.value = selected.blurRadius;
                    shadowColor.value = selected.color;
                    shadowOpacity.value = selected.opacity;

                    if (activeShadowType === 'box') {
                        spreadRadius.value = selected.spreadRadius;
                        insetCheckbox.checked = selected.inset;
                        spreadRadiusLabel.classList.remove('hidden');
                        insetLabel.classList.remove('hidden');
                    } else {
                        spreadRadiusLabel.classList.add('hidden');
                        insetLabel.classList.add('hidden');
                    }
                }
                renderShadowLayersList();
                updateShadow(); // Re-render preview with updated selection
            }

            function renderShadowLayersList() {
                shadowLayersList.innerHTML = '';
                shadows.filter(s => s.type === activeShadowType).forEach(shadow => {
                    const shadowEl = document.createElement('div');
                    shadowEl.className = `flex items-center justify-between p-2 rounded-lg border ${shadow.id === currentShadowId ? 'border-white' : 'border-gray-700'} bg-gray-800`;
                    
                    const previewStyle = shadow.type === 'box' ? `box-shadow: ${shadow.inset ? 'inset ' : ''}${shadow.offsetX}px ${shadow.offsetY}px ${shadow.blurRadius}px ${shadow.spreadRadius}px ${hexToRgbA(shadow.color, shadow.opacity)};` : `text-shadow: ${shadow.offsetX}px ${shadow.offsetY}px ${shadow.blurRadius}px ${hexToRgbA(shadow.color, shadow.opacity)};`;
                    
                    shadowEl.innerHTML = `
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-md flex items-center justify-center" style="background-color: ${shadow.type === 'box' ? '#fff' : 'transparent'}; ${previewStyle}">
                                ${shadow.type === 'text' ? `<span style="color: #fff; font-size: 16px; ${previewStyle}">A</span>` : ''}
                            </div>
                            <span class="text-sm text-gray-300">${shadow.type === 'box' ? 'Box Shadow' : 'Text Shadow'}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="edit-shadow-btn text-blue-400 hover:text-blue-300 text-sm" data-id="${shadow.id}">Edit</button>
                            <button class="delete-shadow-btn text-red-400 hover:text-red-300 text-sm" data-id="${shadow.id}">Delete</button>
                        </div>
                    `;
                    shadowLayersList.appendChild(shadowEl);
                });

                document.querySelectorAll('.edit-shadow-btn').forEach(btn => {
                    btn.addEventListener('click', () => selectShadow(btn.dataset.id));
                });
                document.querySelectorAll('.delete-shadow-btn').forEach(btn => {
                    btn.addEventListener('click', () => deleteShadow(btn.dataset.id));
                });
            }

            function updateShadow() {
                const current = shadows.find(s => s.id === currentShadowId);
                if (!current) return;

                // Update current shadow object from controls
                current.offsetX = parseInt(offsetX.value);
                current.offsetY = parseInt(offsetY.value);
                current.blurRadius = parseInt(blurRadius.value);
                current.color = shadowColor.value;
                current.opacity = parseFloat(shadowOpacity.value);

                if (activeShadowType === 'box') {
                    current.spreadRadius = parseInt(spreadRadius.value);
                    current.inset = insetCheckbox.checked;
                }

                // Generate combined CSS for all shadows
                const combinedCssValues = shadows.filter(s => s.type === activeShadowType).map(s => {
                    const colorWithOpacity = hexToRgbA(s.color, s.opacity);
                    if (s.type === 'box') {
                        return `${s.inset ? 'inset ' : ''}${s.offsetX}px ${s.offsetY}px ${s.blurRadius}px ${s.spreadRadius}px ${colorWithOpacity}`;
                    } else {
                        return `${s.offsetX}px ${s.offsetY}px ${s.blurRadius}px ${colorWithOpacity}`;
                    }
                }).join(', ');

                const cssText = `${activeShadowType === 'box' ? 'box-shadow' : 'text-shadow'}: ${combinedCssValues};`;
                cssOutput.value = cssText;

                if (activeShadowType === 'box') {
                    boxShadowPreview.style.boxShadow = combinedCssValues;
                    textShadowPreview.style.textShadow = 'none';
                    boxShadowPreview.classList.remove('hidden');
                    textShadowPreview.classList.add('hidden');
                    document.getElementById('accessibility-checker').classList.add('hidden');
                    spreadRadiusLabel.classList.remove('hidden');
                    insetLabel.classList.remove('hidden');
                } else {
                    textShadowPreview.style.textShadow = combinedCssValues;
                    boxShadowPreview.style.boxShadow = 'none';
                    boxShadowPreview.classList.add('hidden');
                    textShadowPreview.classList.remove('hidden');
                    updateAccessibilityChecker();
                    spreadRadiusLabel.classList.add('hidden');
                    insetLabel.classList.add('hidden');
                }

                renderShadowLayersList(); // Update previews in the list
                saveState();
            }

            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 2000);
            }

            function saveState() {
                localStorage.setItem('cssShadowsMakerState', JSON.stringify({ shadows, currentShadowId, activeShadowType }));
            }

            function loadState() {
                const savedState = localStorage.getItem('cssShadowsMakerState');
                if (savedState) {
                    const state = JSON.parse(savedState);
                    shadows = state.shadows || [];
                    currentShadowId = state.currentShadowId;
                    activeShadowType = state.activeShadowType || 'box';
                }

                if (shadows.length === 0) {
                    addShadow(); // Start with a default shadow if none are loaded
                } else {
                    // Ensure currentShadowId is valid, if not, select the first one
                    if (!shadows.some(s => s.id === currentShadowId)) {
                        currentShadowId = shadows[0].id;
                    }
                    selectShadow(currentShadowId);
                }

                // Set active tab based on loaded state
                tabBtns.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.shadowType === activeShadowType);
                });
            }

            // Event Listeners
            const controls = [offsetX, offsetY, blurRadius, spreadRadius, shadowColor, shadowOpacity, insetCheckbox];
            controls.forEach(control => control.addEventListener('input', updateShadow));

            // Tab switching logic
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    tabBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    activeShadowType = btn.dataset.shadowType;
                    const firstShadowOfType = shadows.find(s => s.type === activeShadowType);
                    if (firstShadowOfType) {
                        selectShadow(firstShadowOfType.id);
                    } else {
                        // If no shadows of this type exist, create one
                        addShadow();
                    }
                });
            });
            addShadowBtn.addEventListener('click', addShadow);

            copyCssBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(cssOutput.value)
                    .then(() => showToast('CSS Copied!'))
                    .catch(err => console.error('Failed to copy: ', err));
            });

            copyHtmlBtn.addEventListener('click', () => {
                const activePreviewEl = activeShadowType === 'box' ? boxShadowPreview : textShadowPreview;
                const style = activePreviewEl.getAttribute('style');
                const elementTag = activePreviewEl.tagName.toLowerCase();
                const elementClass = activePreviewEl.className.split(' ').filter(c => c !== 'hidden').join(' ');
                const elementContent = activePreviewEl.textContent.trim();

                const htmlToCopy = `<${elementTag} class="${elementClass}" style="${style}">${elementContent}</${elementTag}>`;
                navigator.clipboard.writeText(htmlToCopy)
                    .then(() => showToast('HTML Copied!'))
                    .catch(err => console.error('Failed to copy: ', err));
            });

            // Initial setup
            loadState();
        });
    </script>
</body>
</html>