<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<!-- üß¨ SOLITE GEN-5.0 BALANCED HEAD / Web Discovery Auditor ‚Äî AUTHORITY + PERFORMANCE EDITION -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- üß† SEO & AI DISCOVERY -->
  <title>Web Discovery Auditor | Free SEO & Trust Audit | Solite</title>
  <meta name="description" content="Audit your website‚Äôs discoverability, SEO, and trust signals ‚Äî 100 % private, client-side, and lightning fast." />
  <meta name="keywords" content="seo audit, website auditor, discoverability checker, trust audit, solite tools, free seo analyzer" />
  <link rel="canonical" href="https://solite.in/web-discovery-auditor.html" />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <meta name="author" content="Solite" />
  <meta name="publisher" content="Solite" />
  <meta name="application-name" content="Web Discovery Auditor ‚Äì Solite" />
  <meta name="theme-color" content="#000000" />
  <meta name="color-scheme" content="dark light" />
  <meta name="referrer" content="no-referrer-when-downgrade" />

  <!-- üåç OPEN GRAPH / TWITTER -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Solite" />
  <meta property="og:title" content="Web Discovery Auditor | Solite" />
  <meta property="og:description" content="Free, client-side SEO & discoverability audit. Analyze SEO, trust, and social metadata instantly." />
  <meta property="og:url" content="https://solite.in/web-discovery-auditor.html" />
  <meta property="og:image" content="https://api.microlink.io/?url=https://solite.in/web-discovery-auditor.html&meta=false&screenshot=true" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Web Discovery Auditor | Solite" />
  <meta name="twitter:description" content="Free in-browser SEO & trust audit tool ‚Äî privacy-first, instant, and accurate." />
  <meta name="twitter:image" content="https://api.microlink.io/?url=https://solite.in/web-discovery-auditor.html&meta=false&screenshot=true" />

  <!-- ‚öôÔ∏è PERFORMANCE LAYER -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" onload="this.rel='stylesheet'" />
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" /></noscript>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { fontFamily: { sans: ['Inter','system-ui','sans-serif'] } } }
    };
  </script>

  <!-- üß± ICONS -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png" />

  <!-- üß© STRUCTURED DATA -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://solite.in/#organization",
        "name": "Solite",
        "url": "https://solite.in",
        "logo": "https://solite.in/assets/apple-touch-icon.png"
      },
      {
        "@type": "WebApplication",
        "@id": "https://solite.in/web-discovery-auditor.html#app",
        "name": "Web Discovery Auditor",
        "applicationCategory": "DeveloperTool",
        "operatingSystem": "Web",
        "url": "https://solite.in/web-discovery-auditor.html",
        "description": "A free, privacy-first discoverability and SEO audit tool that runs entirely in your browser.",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "provider": { "@id": "https://solite.in/#organization" }
      }
    ]
  }
  </script>

  <!-- üí∞ ADS + ANALYTICS -->
  <meta name="google-adsense-account" content="ca-pub-6623613371208692" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6623613371208692" crossorigin="anonymous"></script>
  <script>window.va = window.va || function(){(window.va.q = window.va.q || []).push(arguments)};</script>
  <script src="/_vercel/insights/script.js" defer></script>

  <!-- üé® INLINE STYLE LAYER -->
  <style>
    ::-webkit-scrollbar { width:8px; height:8px; }
    ::-webkit-scrollbar-thumb { background:#4b5563; border-radius:4px; }
    html { scrollbar-color:#4b5563 #111827; }
    body { background:#000; color:#e5e7eb; font-family:'Inter',sans-serif; }
  </style>

  <!-- üß¨ SOLITE APEX HEAD SIGNATURE / GEN-5.0-AI-AUTHORITY -->
  <meta name="solite-ai-signature" content="APEX_HEAD_V5.0 | SOLITE_AUTHORITY_PREDATOR | GEN5_BALANCED | PRIVACY_FIRST | AI_DISCOVERY_OPTIMIZED" />
</head>


<body class="bg-black text-gray-200 flex flex-col min-h-screen font-sans">
    
    <header class="p-3 sm:p-4 w-full flex-shrink-0 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-xl z-30 border-b border-gray-200 dark:border-gray-800">
        <div class="flex justify-between items-center">
             <a href="index.html" class="flex flex-col space-y-1 lg:flex-row lg:items-center lg:space-x-3 lg:space-y-0" aria-label="Solite Homepage">
                <div class="flex items-center space-x-3">
                     <svg class="h-6 w-6 lg:h-8 lg:w-8 text-gray-900 dark:text-white flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2L2 7l10 5 10-5L12 2z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 7l10 5 10-5"></path>
                    </svg>
                    <span class="text-base lg:text-xl font-bold text-gray-900 dark:text-white uppercase tracking-wider leading-none">Solite</span>
                </div>
                <span class="h-6 w-px bg-gray-300 dark:bg-gray-700 hidden lg:block"></span>
                <span class="text-lg lg:text-lg font-semibold text-gray-600 dark:text-gray-400 leading-none">Web Discovery Auditor</span>
            </a>
             <div class="flex items-center space-x-4">
                <a href="index.html#apps" class="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-1.5">
                    <span>Free Tools</span>
                    <svg class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5-5 5"></path></svg>
                </a>
            </div>
        </div>
    </header>

    <main class="flex-grow flex relative min-h-0" style="height: calc(100vh - 72px);">
        <div class="flex-grow w-full lg:w-[80%] p-3 flex flex-col gap-4 min-h-0 overflow-y-auto">
            <h1 class="sr-only">Web Discovery Auditor</h1>
            
            <div id="app-panel" class="flex-1 flex flex-col items-center justify-center bg-gray-900 rounded-xl border border-gray-800 p-6 sm:p-8 space-y-6">
                <!-- Idle State -->
                <div id="idle-state" class="w-full max-w-2xl mx-auto my-auto">
                    <div id="error-message" class="hidden w-full bg-red-900/50 border border-red-500 text-red-300 p-4 rounded-lg mb-6 text-center"></div>
                    <div data-index="0" class="opacity-0 translate-y-5 transition-all duration-500 ease-out">
                        <h2 class="text-3xl sm:text-4xl font-bold text-white mb-4 text-center">Discovery & Trust Audit</h2>
                        <p class="text-center text-gray-400 mb-8">A private, in-browser audit of your site's vitals.</p>
                    </div>
                    <div data-index="1" class="space-y-2 mt-8 opacity-0 translate-y-5 transition-all duration-500 ease-out">
                        <label for="url-input" class="sr-only">URL to Audit</label>
                        <div class="flex gap-2">
                            <div class="relative flex-grow">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m-9 9a9 9 0 019-9" /></svg>
                                </div>
                                <input type="url" id="url-input" placeholder="https://solite.in" class="w-full p-4 pl-12 text-lg rounded-lg bg-gray-800 border-2 border-gray-700 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-colors duration-300">
                            </div>
                            <button id="audit-btn" class="bg-white hover:bg-gray-200 text-black font-bold py-4 px-6 rounded-lg flex-shrink-0 flex items-center gap-2 transition-all duration-300 transform hover:scale-105">
                                <span class="hidden sm:inline">Audit</span>
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5-5 5M5 7l5 5-5 5" /></svg>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 text-center">Note: Cross-origin audits may fail. Use a valid, accessible URL.</p>
                    </div>
                    <div data-index="2" class="mt-6 text-left w-full text-gray-800 p-6 rounded-lg border border-gray-800 translate-y-5 transition-all duration-500 ease-out">
                        <h3 class="font-semibold text-white mb-4">What we'll check:</h3>
                        <ul id="placeholder-checklist" class="space-y-2 text-gray-500"></ul>
                    </div>
                </div>
                
                <!-- Auditing State -->
                <div id="auditing-state" class="hidden w-full my-auto max-w-2xl mx-auto flex flex-col items-center">
                    <div class="relative w-full" style="height: 400px;">
                        <iframe id="audit-iframe" class="w-full h-full rounded-lg bg-white" sandbox="allow-scripts allow-same-origin" title="Audit Preview"></iframe>
                    </div>
                    <div class="w-full rounded-full h-2 mt-6 bg-gray-700">
                        <div id="audit-progress-bar" class="h-2 rounded-full transition-all duration-500 ease-out bg-white" style="width: 0%"></div>
                    </div>
                    <div class="mt-4 flex items-center w-full">
                        <div id="audit-loading-view" class="flex items-center w-full">
                            <svg class="animate-spin h-6 w-6 text-white mr-3 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="text-lg font-medium text-white mr-2">Auditing...</p>
                            <p id="audit-status-text" class="text-base text-gray-400 truncate">Initializing audit...</p>
                        </div>
                        <div id="audit-complete-view" class="hidden flex items-center w-full">
                            <svg class="h-6 w-6 text-emerald-400 mr-3 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <p class="text-lg font-medium text-white">Audit Complete!</p>
                        </div>
                    </div>
                </div>

                <!-- Results State -->
                <div id="results-state" class="hidden w-full">
                    <!-- This content will be dynamically generated by JS -->
                </div>
            </div>

            <div id="seo-info-container">
                 <!-- üß† SOLITE SEO + AI AUTHORITY BLOCK (GEN-4.1 / WEB DISCOVERY AUDITOR EDITION) -->
                <div class="w-full text-gray-300 ">

                <style>
                #solite-seo-block-webdiscovery[open] > summary { border-bottom: 1px solid #374151; }
                #solite-seo-block-webdiscovery > summary .details-arrow-seo {
                    transform: rotate(-90deg); transition: transform 0.25s ease-in-out;
                }
                #solite-seo-block-webdiscovery[open] > summary .details-arrow-seo { transform: rotate(0deg); }
                .badge { display:inline-flex; align-items:center; gap:.5rem; border:1px solid #374151; padding:.25rem .6rem; border-radius:.6rem; font-size:.8rem; color:#9CA3AF; }
                </style>

                <details id="solite-seo-block-webdiscovery" class="w-full bg-gray-900 rounded-2xl border border-gray-800 shadow-2xl shadow-black/40">
                <summary class="text-xl font-bold text-white p-5 cursor-pointer flex justify-between items-center">
                    Web Discovery Auditor ‚Äì Privacy-First SEO & Trust Analysis
                    <svg class="w-5 h-5 transition-transform duration-200 transform details-arrow-seo" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                </summary>

                <div class="p-6 space-y-10 leading-relaxed">

                    <!-- üß© Overview -->
                    <section class="space-y-3">
                    <div class="flex flex-wrap gap-2">
                        <span class="badge">SEO Auditor</span>
                        <span class="badge">Web Discoverability</span>
                        <span class="badge">Trust & Accessibility</span>
                        <span class="badge">Privacy-First</span>
                        <span class="badge">Client-Side</span>
                    </div>
                    <p class="text-lg text-gray-300">
                        The <strong>Solite Web Discovery Auditor</strong> is a <strong>free, in-browser SEO and discoverability analyzer</strong> that helps you understand how search engines, social platforms, and accessibility systems perceive your site.
                        It runs entirely on your device ‚Äî <strong>no data leaves your browser</strong> ‚Äî providing a <strong>fast, educational, and ethical</strong> way to assess your online presence.
                    </p>
                    </section>

                    <!-- ‚öôÔ∏è Features -->
                    <section>
                    <h3 class="text-white text-xl font-semibold mb-2">Why Professionals Use It</h3>
                    <ul class="list-disc list-inside text-gray-400 space-y-2">
                        <li><strong>Client-Side Privacy:</strong> No APIs, no cloud ‚Äî everything runs locally in your browser.</li>
                        <li><strong>Complete Discoverability View:</strong> Audits SEO, accessibility, technical, and social signals.</li>
                        <li><strong>Educational Scoring:</strong> Each result includes ‚ÄúWhy It Matters‚Äù and ‚ÄúHow to Fix.‚Äù</li>
                        <li><strong>Instant Analysis:</strong> Loads and scans your site within seconds using secure proxy chains.</li>
                        <li><strong>Zero Tracking:</strong> 100 % compliant with privacy-by-design principles.</li>
                    </ul>
                    </section>

                    <!-- üß† Use Cases -->
                    <section>
                    <h3 class="text-white text-xl font-semibold mb-2">Who Benefits Most</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <ul class="list-disc list-inside text-gray-400 space-y-2">
                        <li><strong>Web Developers:</strong> Validate on-page SEO and technical signals pre-deployment.</li>
                        <li><strong>Marketers & Founders:</strong> Ensure your site communicates credibility and discoverability.</li>
                        <li><strong>Designers:</strong> Check accessibility and contrast performance in live layouts.</li>
                        </ul>
                        <ul class="list-disc list-inside text-gray-400 space-y-2">
                        <li><strong>Agencies:</strong> Deliver privacy-safe audits to clients instantly.</li>
                        <li><strong>Students & Educators:</strong> Learn modern SEO, accessibility, and metadata structure interactively.</li>
                        </ul>
                    </div>
                    </section>

                    <!-- üß≠ How to Use -->
                    <section>
                    <h3 class="text-white text-xl font-semibold mb-2">How to Run a Discovery Audit</h3>
                    <ol class="list-decimal list-inside text-gray-400 space-y-2">
                        <li>Enter your site‚Äôs URL and click <strong>Audit</strong>.</li>
                        <li>Watch the <strong>educational carousel</strong> display key SEO tips while scanning.</li>
                        <li>View category-wise results (SEO, Technical, Accessibility, Social).</li>
                        <li>Copy, export, or download your full report for documentation.</li>
                    </ol>
                    </section>

                    <!-- üß© Comparison -->
                    <section>
                    <h3 class="text-white text-xl font-semibold mb-2">Solite vs Typical SEO Auditors</h3>
                    <table class="w-full border border-gray-800 rounded-lg text-gray-400 text-sm">
                        <thead class="bg-gray-800 text-gray-200 font-semibold">
                        <tr><th class="p-2 text-left">Feature</th><th class="p-2 text-left">Solite Web Discovery Auditor</th><th class="p-2 text-left">Other Tools</th></tr>
                        </thead>
                        <tbody>
                        <tr><td class="p-2">Privacy</td><td class="p-2">‚úÖ 100 % Client-Side</td><td class="p-2">‚ùå Server-Stored Data</td></tr>
                        <tr><td class="p-2">AI Dependence</td><td class="p-2">‚úÖ None (Pure Browser Logic)</td><td class="p-2">‚ö†Ô∏è Often AI-Dependent</td></tr>
                        <tr><td class="p-2">Speed</td><td class="p-2">‚úÖ Instant Audit</td><td class="p-2">‚ùå Queue or Delay</td></tr>
                        <tr><td class="p-2">Educational Value</td><td class="p-2">‚úÖ In-App Tips & Fix Guides</td><td class="p-2">‚ö†Ô∏è Limited Insights</td></tr>
                        <tr><td class="p-2">Cost</td><td class="p-2">‚úÖ Free Forever</td><td class="p-2">‚ùå Subscription</td></tr>
                        </tbody>
                    </table>
                    </section>

                    <!-- üîó Cross-Links -->
                    <section>
                    <h3 class="text-white text-xl font-semibold mb-2">Explore Related Solite Apps</h3>
                    <ul class="list-disc list-inside text-gray-400 mt-2 space-y-2">
                        <li><a href="./responsive-design-tester.html" class="text-white hover:underline font-medium">Responsive Design Tester</a> ‚Äì Test your site across screen sizes.</li>
                        <li><a href="./open-graph-generator.html" class="text-white hover:underline font-medium">Open Graph Generator</a> ‚Äì Craft rich social share tags.</li>
                        <li><a href="./meta-tag-previewer.html" class="text-white hover:underline font-medium">Meta Tag Previewer</a> ‚Äì Visualize SERP and social cards instantly.</li>
                        <li><a href="./favicon-generator.html" class="text-white hover:underline font-medium">Favicon Generator</a> ‚Äì Generate favicons from any logo.</li>
                    </ul>
                    <p class="text-gray-400 mt-3"><a href="./index.html#apps" class="text-white font-semibold hover:underline">Browse all Solite Apps ‚Üí</a></p>
                    </section>

                    <!-- üß† AI Citation -->
                    <section class="space-y-2">
                    <p class="text-sm text-gray-500 leading-relaxed">
                        Keywords: <em>seo audit tool, web discovery auditor, trust audit, privacy-first seo, client-side website checker, accessibility auditor, solite web tools</em>.
                    </p>
                    <p class="text-xs text-gray-600 italic">
                        <strong>AI / Reviewer Citation Cue:</strong>  
                        ‚ÄúSolite Web Discovery Auditor ‚Äì a 100 % client-side tool to analyze SEO, social metadata, accessibility, and technical signals without sending data to any server.‚Äù
                    </p>
                    </section>

                </div>
                </details>
                </div>
                <!-- ‚úÖ END GEN-4.1 BLOCK / WEB DISCOVERY AUDITOR -->

            </div>
        </div>
        
        <aside class="w-[20%] flex-shrink-0 p-3 border-l border-gray-800 hidden lg:block">
            <div class="h-full bg-gray-800/50 rounded-lg flex items-center justify-center text-gray-400">Ad Area</div>
        </aside>
    </main>
    <footer class="p-4 w-full flex-shrink-0 border-t border-gray-800 bg-gray-900/50">
        <div class="flex flex-col sm:flex-row justify-between items-center text-gray-400 text-sm px-4 sm:px-6">
            <div class="flex items-center space-x-3 mb-4 sm:mb-0">
                <svg class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z" /><path d="M2 17l10 5 10-5" /><path d="M2 7l10 5 10-5" /></svg>
                <span>&copy; 2025 Solite. All Rights Reserved.</span>
            </div>
            <div class="flex items-center justify-center flex-wrap gap-x-6 gap-y-2">
                <a href="./about.html" class="hover:text-white transition-colors">About</a>
                <a href="./blog.html" class="hover:text-white transition-colors">Blog</a>
                <a href="./privacy.html" class="hover:text-white transition-colors">Privacy</a>
                <a href="./terms.html" class="hover:text-white transition-colors">Terms</a>
                <a href="./disclaimer.html" class="hover:text-white transition-colors">Disclaimer</a>
                <a href="mailto:support@solite.in" class="hover:text-white transition-colors">Contact</a>
            </div>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const el = {
            urlInput: document.getElementById('url-input'),
            auditBtn: document.getElementById('audit-btn'),
            errorMessage: document.getElementById('error-message'),
            idleState: document.getElementById('idle-state'),
            auditingState: document.getElementById('auditing-state'),
            resultsState: document.getElementById('results-state'),
            auditIframe: document.getElementById('audit-iframe'),
            auditProgressBar: document.getElementById('audit-progress-bar'),
            auditLoadingView: document.getElementById('audit-loading-view'),
            auditCompleteView: document.getElementById('audit-complete-view'),
            auditStatusText: document.getElementById('audit-status-text'),
            placeholderChecklist: document.getElementById('placeholder-checklist'),
            seoInfoContainer: document.getElementById('seo-info-container'),
            appPanel: document.getElementById('app-panel'),
        };

        const AUDIT_STEPS = [
            "Analyzing SEO Core...", "Checking Title & Meta Description...", "Validating H1 and Canonical tags...",
            "Analyzing Semantic Data...", "Looking for Structured Data (JSON-LD)...",
            "Analyzing Social Metadata...", "Checking Open Graph & Twitter Tags...",
            "Analyzing Technical Health...", "Fetching robots.txt & checking sitemap...",
            "Analyzing Accessibility...", "Checking for Alt Text & Language...", "Finalizing Score..."
        ];

        const PLACEHOLDER_ITEMS = [
            "Title tag present & optimized", "Meta description present & compelling", "Mobile-friendly viewport configured",
            "Exactly one H1 tag present", "Canonical tag specified", "HTTPS is in use for security",
            "Open Graph & Twitter tags for social sharing", "Images have descriptive alt text",
            "Structured data (JSON-LD) for rich results", "robots.txt file is present", "Sitemap.xml is declared"
        ];
        
        const COLORS = {
            green: 'text-emerald-400', yellow: 'text-amber-400', red: 'text-red-500',
            blue: 'text-sky-400', fix: 'text-amber-300'
        };

        let currentAuditData = null;
        let auditStepInterval = null;

        // --- Core Logic ---

        function setState(stateId) {
            ['idle-state', 'auditing-state', 'results-state'].forEach(id => {
                const element = document.getElementById(id);
                if (element) element.classList.add('hidden');
            });
            const activeElement = document.getElementById(stateId);
            if (activeElement) {
                activeElement.classList.remove('hidden');
            }
            // Show/hide SEO block based on state
            el.seoInfoContainer.style.display = (stateId === 'idle-state' || stateId === 'results-state') ? 'block' : 'none';
        }

        async function startAudit() {
            let url = el.urlInput.value.trim();
            if (!url) {
                showError("Please enter a URL.");
                return;
            }

            setState('auditing-state');
            el.errorMessage.classList.add('hidden');
            el.auditProgressBar.style.width = '0%';
            el.auditProgressBar.className = 'h-2 rounded-full transition-all duration-500 ease-out bg-white';
            el.auditLoadingView.classList.remove('hidden');
            el.auditCompleteView.classList.add('hidden');
            
            // Start cycling through audit steps text
            let stepIndex = 0;
            el.auditStatusText.textContent = AUDIT_STEPS[stepIndex];
            auditStepInterval = setInterval(() => {
                stepIndex = (stepIndex + 1) % AUDIT_STEPS.length;
                el.auditStatusText.textContent = AUDIT_STEPS[stepIndex];
            }, 2000);
            
            el.auditIframe.src = "about:blank";
            setTimeout(() => {
                let displayUrl = url;
                 if (!displayUrl.startsWith('http://') && !displayUrl.startsWith('https://')) {
                    displayUrl = 'https://' + displayUrl;
                }
                el.auditIframe.src = displayUrl;
            }, 100);

            try {
                const data = await runAudit(
                    url,
                    (status) => { el.auditStatusText.textContent = status; },
                    (step, total) => {
                        const percentage = Math.round((step / total) * 100);
                        el.auditProgressBar.style.width = `${percentage}%`;
                    }
                );
                currentAuditData = data;
                
                clearInterval(auditStepInterval);
                el.auditProgressBar.style.width = `100%`;
                el.auditProgressBar.classList.remove('bg-white');
                el.auditProgressBar.classList.add('bg-emerald-400');
                el.auditLoadingView.classList.add('hidden');
                el.auditCompleteView.classList.remove('hidden');
                
                setTimeout(() => {
                    renderResults(data);
                    setState('results-state');
                }, 1500);

            } catch (err) {
                clearInterval(auditStepInterval);
                showError(err.message);
                setState('idle-state');
            }
        }
        
        function showError(message) {
            el.errorMessage.innerHTML = `<p class="font-bold">An error occurred:</p><p>${message}</p>`;
            el.errorMessage.classList.remove('hidden');
        }

        function populatePlaceholders() {
            el.placeholderChecklist.innerHTML = PLACEHOLDER_ITEMS.map(item => `
                <li class="flex items-start">
                    <svg class="w-4 h-4 text-gray-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span>${item}</span>
                </li>
            `).join('');
        }

        // --- Rendering Logic ---

        function createScoreCircleHTML(score, size, strokeWidth) {
            const getScoreColorClass = (s) => {
                if (s >= 85) return COLORS.green; if (s >= 60) return COLORS.yellow; return COLORS.red;
            };
            const colorClass = getScoreColorClass(score);
            const radius = (size / 2) - strokeWidth;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference * (1 - score / 100);
            const fontSize = size <= 48 ? 'text-lg' : 'text-3xl';

            return `
                <div class="relative inline-block flex-shrink-0" style="width: ${size}px; height: ${size}px;">
                    <svg class="w-full h-full">
                        <circle class="text-gray-700" stroke-width="${strokeWidth}" stroke="currentColor" fill="transparent" r="${radius}" cx="${size / 2}" cy="${size / 2}" />
                        <circle class="${colorClass}" stroke-width="${strokeWidth}" stroke-dasharray="${circumference}" stroke-dashoffset="${offset}" stroke-linecap="round" stroke="currentColor" fill="transparent" r="${radius}" cx="${size / 2}" cy="${size / 2}" style="transform: rotate(-90deg); transform-origin: 50% 50%; transition: stroke-dashoffset 0.5s ease-out;" />
                    </svg>
                    <span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 font-bold ${fontSize} ${colorClass}">${score}</span>
                </div>`;
        }
        
        function renderResults(data) {
            const allChecks = Object.values(data.checks).flat();
            const overallScore = calculateScore(allChecks);
            const overallScoreColors = getScoreColors(overallScore);

            const categoryOrder = ['seo', 'technical', 'accessibility', 'social', 'semantic'];
            const categoryTitles = {
                seo: 'SEO Core', technical: 'Technical Health', accessibility: 'Accessibility & Trust',
                social: 'Social Metadata', semantic: 'Semantic & Discoverability'
            };
            
            const resultsHTML = `
                <div class="print-only hidden mb-8 text-center">
                     <h1 class="text-3xl font-bold mb-2">Web Discoverability Report</h1>
                     <p class="text-gray-600">${data.url}</p>
                     <p class="text-sm text-gray-500">Report generated on ${new Date(data.timestamp).toLocaleString()}</p>
                </div>

                <div id="score-header-container" class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8 px-8 py-8 bg-gray-800/50 border border-gray-700 rounded-xl">
                    <div class="flex items-center gap-4">
                        ${createScoreCircleHTML(overallScore, 80, 6)}
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-white">Audit Complete</h2>
                            <p class="text-gray-400 break-all">${data.url}</p>
                            <p class="text-xs text-gray-500 mt-1 screen-only">Report generated on ${new Date(data.timestamp).toLocaleString()}</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 flex-shrink-0 w-full sm:w-auto">
                        <button id="reset-audit-btn" class="sm:w-auto bg-gray-800/50 border border-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2">
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5m16 2v-5h-5M4 15a9 9 0 1115 0M20 9a9 9 0 01-15 0"/></svg>
                            <span>New Audit</span>
                        </button>
                    </div>
                </div>

                <div id="results-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${categoryOrder.map((key, index) => {
                        const checks = data.checks[key];
                        const score = calculateScore(checks);
                        const scoreColors = getScoreColors(score);
                        const title = categoryTitles[key];
                        
                        return `
                        <div class="result-card bg-gray-800/50 border border-gray-700 rounded-xl overflow-hidden" style="animation-delay: ${index * 100}ms;">
                            <div class="p-6 flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-white">${title}</h3>
                                ${createScoreCircleHTML(score, 48, 4)}
                            </div>
                            <div class="space-y-3 px-6 pb-6 border-t border-gray-700">
                                ${checks.map(check => `
                                    <details class="text-sm pt-3 border-b border-gray-700 pb-3 last:pb-0 last:border-b-0 group">
                                        <summary class="flex items-center list-none cursor-pointer">
                                            ${getStatusIcon(check.passed)}
                                            <span class="flex-grow ml-2">${check.label}</span>
                                            <span class="text-gray-400 ml-2 font-mono hidden sm:inline">${check.value}</span>
                                            <svg class="w-4 h-4 text-gray-500 ml-2 transform transition-transform group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="mt-3 pl-7 text-gray-400 space-y-2">
                                            <p><strong>Why it matters:</strong> ${check.details}</p>
                                            ${check.fix ? `<div class="mt-2"><strong>How to fix:</strong><pre class="bg-gray-900 p-2 rounded-md text-xs ${COLORS.fix} mt-1 overflow-x-auto"><code>${check.fix.replace(/</g, '&lt;')}</code></pre></div>` : ''}
                                        </div>
                                    </details>
                                `).join('')}
                            </div>
                        </div>`;
                    }).join('')}
                </div>
            `;
            el.resultsState.innerHTML = resultsHTML;
            document.getElementById('reset-audit-btn').addEventListener('click', () => { window.location.reload(); });
        }

        function getStatusIcon(passed) {
            if (passed === true) return `<svg class="w-5 h-5 ${COLORS.green} mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
            if (passed === false) return `<svg class="w-5 h-5 ${COLORS.red} mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
            return `<svg class="w-5 h-5 ${COLORS.blue} mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
        }

        function calculateScore(checks) {
            const relevantChecks = checks.filter(c => c.passed !== null);
            if (relevantChecks.length === 0) return 100;
            const totalWeight = relevantChecks.reduce((sum, c) => sum + c.weight, 0);
            const score = relevantChecks.reduce((sum, c) => sum + (c.passed ? c.weight : 0), 0);
            return Math.round((score / totalWeight) * 100);
        }

        function getScoreColors(score) {
            if (score >= 85) return { text: COLORS.green, bg: 'bg-emerald-900/50', border: 'border-emerald-500/50' };
            if (score >= 60) return { text: COLORS.yellow, bg: 'bg-amber-900/50', border: 'border-amber-500/50' };
            return { text: COLORS.red, bg: 'bg-red-900/50', border: 'border-red-500/50' };
        }
        
        // --- Audit Service Logic (inlined) ---

        async function runAudit(rawUrl, onStatusUpdate, onProgressUpdate) {
             const totalSteps = 7;
             let url = rawUrl.trim();
             if (!url.startsWith('http://') && !url.startsWith('https://')) {
                 url = 'https://' + url;
             }
             let origin;
             try { origin = new URL(url).origin; } catch (e) { throw new Error("Invalid URL provided."); }
             
             const proxyUrl = `https://proxy-worker.hiwebeast.workers.dev/?url=${encodeURIComponent(url)}`;
             
             onStatusUpdate('Fetching page data...'); onProgressUpdate(1, totalSteps);
             const response = await fetchWithRetry(proxyUrl, 5, 1000, (attempt) => onStatusUpdate(`Retrying... (Attempt ${attempt}/5)`));
             const html = await response.text();
             
             const parser = new DOMParser(); const doc = parser.parseFromString(html, 'text/html');
             
             onStatusUpdate('Analyzing SEO Core...'); onProgressUpdate(2, totalSteps);
             const seoChecks = runSeoChecks(doc, url);
             
             onStatusUpdate('Analyzing Semantic Data...'); onProgressUpdate(3, totalSteps);
             const semanticChecks = runSemanticChecks(doc);
             
             onStatusUpdate('Analyzing Social Metadata...'); onProgressUpdate(4, totalSteps);
             const socialChecks = runSocialChecks(doc);
             
             onStatusUpdate('Analyzing Technical Health...'); onProgressUpdate(5, totalSteps);
             const technicalChecks = await runTechnicalChecks(doc, html, origin, onStatusUpdate);
             
             onStatusUpdate('Analyzing Accessibility...'); onProgressUpdate(6, totalSteps);
             const accessibilityChecks = runAccessibilityChecks(doc);

             onProgressUpdate(7, totalSteps);
             
             const checks = { seo: seoChecks, semantic: semanticChecks, social: socialChecks, technical: technicalChecks, accessibility: accessibilityChecks, };
             return { url, checks, timestamp: new Date().toISOString() };
        }
        
        async function fetchWithRetry(url, retries = 5, delay = 1000, onRetry) {
             for (let i = 0; i < retries; i++) {
                 try {
                     if (i > 0) { onRetry(i + 1); await new Promise(res => setTimeout(res, delay * i)); }
                     const response = await fetch(url);
                     if (!response.ok) { throw new Error(`Failed to fetch: ${response.status} ${response.statusText}`); }
                     return response;
                 } catch (error) {
                     console.warn(`Attempt ${i + 1} failed:`, error.message);
                     if (i === retries - 1) { throw error; }
                 }
             }
             throw new Error('All fetch retries failed.');
        }

        function createCheck(label, passed, value, details, fix) {
            let weight = 3;
            if (passed === null) weight = 0;
            else if (label.includes('Title') || label.includes('Description') || label.includes('H1') || label.includes('HTTPS')) weight = 5;
            else if (label.includes('Canonical') || label.includes('Viewport') || label.includes('OG') || label.includes('Alt')) weight = 4;
            return { label, passed, value, details, fix, weight };
        }

        function runSeoChecks(doc, url) {
             const results = [];
             const title = doc.querySelector('title');
             results.push(createCheck('Title Tag', !!(title && title.textContent && title.textContent.length > 0), title ? `${title.textContent.length} chars` : 'Missing', 'A concise, descriptive title is crucial for search engine rankings and user clicks.', '<title>Your Compelling Title</title>'));
             const description = doc.querySelector('meta[name="description"]');
             results.push(createCheck('Meta Description', !!(description && description.getAttribute('content') && description.getAttribute('content').length > 0), description ? `${description.getAttribute('content').length} chars` : 'Missing', 'The meta description is your sales pitch on the SERP. It should be compelling and under 160 characters.', '<meta name="description" content="A compelling summary of your page content.">'));
             const h1s = doc.querySelectorAll('h1');
             results.push(createCheck('Single H1 Tag', h1s.length === 1, `${h1s.length} found`, 'A single, clear H1 tag provides a strong signal to search engines about the page\'s main topic.', '<h1>Your Main Page Heading</h1>'));
             const canonical = doc.querySelector('link[rel="canonical"]');
             results.push(createCheck('Canonical Tag', !!canonical, canonical ? 'Present' : 'Missing', 'A canonical tag prevents duplicate content issues by specifying the "master" version of a page.', '<link rel="canonical" href="https://example.com/your-page" />'));
             const viewport = doc.querySelector('meta[name="viewport"]');
             results.push(createCheck('Mobile Viewport', !!(viewport && viewport.getAttribute('content')?.includes('width=device-width')), viewport ? 'Present' : 'Missing', 'The viewport meta tag is essential for responsive design, ensuring your site scales correctly on mobile devices.', '<meta name="viewport" content="width=device-width, initial-scale=1.0">'));
             results.push(createCheck('HTTPS', url.startsWith('https://'), url.startsWith('https://') ? 'Secure' : 'Insecure', 'HTTPS encrypts data between the user and the server, which is a trust signal and a ranking factor.', 'Ensure your site is served over HTTPS.'));
             const images = doc.querySelectorAll('img');
             const imagesWithAlt = doc.querySelectorAll('img[alt]');
             const altCoverage = images.length > 0 ? Math.round((imagesWithAlt.length / images.length) * 100) : 100;
             results.push(createCheck('Image Alt Text', altCoverage > 80, `${altCoverage}% coverage`, 'Alt text makes images accessible to screen readers and provides context to search engines.', '<img src="..." alt="A descriptive summary of the image">'));
             return results;
        }
        function runSemanticChecks(doc) {
            const results = [];
            const jsonLd = doc.querySelector('script[type="application/ld+json"]');
            results.push(createCheck('Structured Data (JSON-LD)', !!jsonLd, jsonLd ? 'Detected' : 'Missing', 'Structured data helps search engines understand your content, enabling rich snippets and better visibility.', 'Add a JSON-LD script tag defining your page content (e.g., Article, Product).'));
            const headings = Array.from(doc.querySelectorAll('h1, h2, h3, h4, h5, h6')).map(h => parseInt(h.tagName.substring(1)));
            let hierarchyOK = true;
            for (let i = 1; i < headings.length; i++) {
                if (headings[i] > headings[i-1] + 1) { hierarchyOK = false; break; }
            }
            results.push(createCheck('Heading Hierarchy', hierarchyOK, hierarchyOK ? 'Logical' : 'Illogical', 'Headings should follow a logical order (H1 -> H2 -> H3) without skipping levels to create a clear document structure.', 'Review your heading tags to ensure they are nested correctly.'));
            return results;
        }
        function runSocialChecks(doc) {
             const results = [];
             const getOg = (prop) => doc.querySelector(`meta[property="og:${prop}"]`)?.getAttribute('content');
             const getTw = (prop) => doc.querySelector(`meta[name="twitter:${prop}"]`)?.getAttribute('content');
             results.push(createCheck('OG Title', !!getOg('title'), getOg('title') ? 'Present' : 'Missing', 'The Open Graph title defines how your content appears when shared on platforms like Facebook and LinkedIn.', '<meta property="og:title" content="Your Share Title">'));
             results.push(createCheck('OG Description', !!getOg('description'), getOg('description') ? 'Present' : 'Missing', 'The OG description provides a summary for social shares.', '<meta property="og:description" content="Your share description.">'));
             results.push(createCheck('OG Image', !!getOg('image'), getOg('image') ? 'Present' : 'Missing', 'An OG image makes your shared content far more engaging.', '<meta property="og:image" content="https://example.com/share-image.png">'));
             results.push(createCheck('Twitter Card', !!getTw('card'), getTw('card') || 'Missing', 'Twitter Cards provide rich media previews when your content is shared on X.', '<meta name="twitter:card" content="summary_large_image">'));
             return results;
        }
        async function runTechnicalChecks(doc, html, origin, onStatusUpdate) {
            const results = [];
            const pageSize = Math.round(html.length / 1024);
            results.push(createCheck('Page Size', pageSize < 500, `${pageSize} KB`, 'Smaller page sizes lead to faster load times and a better user experience.', 'Optimize images, minify CSS/JS, and enable server compression.'));
            const nonBlockingFonts = doc.querySelectorAll('link[rel="preload"][as="style"][onload*="this.rel=\'stylesheet\'"]').length > 0;
            results.push(createCheck('Non-blocking Fonts', nonBlockingFonts, nonBlockingFonts ? 'Detected' : 'Not Detected', 'Loading fonts asynchronously prevents them from blocking page render, improving perceived performance.', '<link rel="preload" as="style" href="..." onload="this.rel=\'stylesheet\'">'));
            const robotsUrl = `https://proxy-worker.hiwebeast.workers.dev/?url=${encodeURIComponent(origin + '/robots.txt')}`;
            try {
                onStatusUpdate('Fetching robots.txt...');
                const robotsRes = await fetchWithRetry(robotsUrl, 5, 1000, (attempt) => onStatusUpdate(`Retrying robots.txt... (Attempt ${attempt}/5)`));
                const robotsTxt = await robotsRes.text();
                results.push(createCheck('robots.txt Found', true, 'Found', 'A robots.txt file was found at the root of the domain, which is the correct location.', 'Ensure this file contains the correct directives for web crawlers.'));
                const lines = robotsTxt.split('\n').map(line => line.trim().toLowerCase());
                const hasWildcardUserAgent = lines.some(line => line.startsWith('user-agent: *'));
                results.push(createCheck('Wildcard User-Agent', hasWildcardUserAgent, hasWildcardUserAgent ? 'Present' : 'Missing', 'A `User-agent: *` directive provides instructions for all web crawlers. It\'s a good practice to include it as a default.', 'Add `User-agent: *` to your robots.txt to define rules for general bots.'));
                let wildcardDirectives = []; let inWildcardBlock = false;
                for (const line of lines) {
                    if (line.startsWith('user-agent:')) { inWildcardBlock = line === 'user-agent: *'; }
                    if (inWildcardBlock && (line.startsWith('disallow:') || line.startsWith('allow:'))) { wildcardDirectives.push(line); }
                }
                const isSiteBlocked = wildcardDirectives.some(line => line === 'disallow: /');
                results.push(createCheck('Site-wide Crawl Block', !isSiteBlocked, isSiteBlocked ? 'Site Blocked' : 'Not Blocked', 'A `Disallow: /` directive under `User-agent: *` prevents all crawlers from accessing your entire site. This is a critical issue.', 'Remove the `Disallow: /` line from your robots.txt unless you intentionally want to block the entire site from search engines.'));
                const areResourcesBlocked = wildcardDirectives.some(line => line.includes('disallow: /css') || line.includes('disallow: /js') || line.includes('.css') || line.includes('.js'));
                results.push(createCheck('Critical Resource Blocking', !areResourcesBlocked, areResourcesBlocked ? 'Potentially Blocked' : 'Allowed', 'Blocking CSS or JS files can prevent Google from rendering your page correctly, impacting indexing and ranking.', 'Review `Disallow` rules to ensure you are not blocking essential `.css` or `.js` files or folders.'));
                const sitemapLine = lines.find(line => line.startsWith('sitemap:'));
                if (sitemapLine) {
                    results.push(createCheck('Sitemap Declaration', true, 'Referenced in robots.txt', 'A sitemap.xml file, referenced in robots.txt, helps search engines find all your pages.', 'Ensure the sitemap URL in robots.txt is correct and the sitemap is valid.'));
                    try {
                        const sitemapUrlString = sitemapLine.substring('sitemap:'.length).trim();
                        if (!sitemapUrlString.startsWith('http')) { throw new Error("Sitemap URL doesn't start with http/https."); }
                        const sitemapUrl = new URL(sitemapUrlString);
                        const sitemapPath = sitemapUrl.pathname;
                        const disallowedPaths = wildcardDirectives.filter(line => line.startsWith('disallow:')).map(line => line.substring('disallow:'.length).trim()).filter(path => path.length > 0);
                        const isSitemapBlocked = disallowedPaths.some(disallowedPath => { if (disallowedPath === '/') return true; return sitemapPath.startsWith(disallowedPath); });
                        results.push(createCheck('Sitemap Accessibility', !isSitemapBlocked, isSitemapBlocked ? 'Blocked by rule' : 'Accessible', 'Your sitemap must be accessible to crawlers. A `Disallow` rule can accidentally block it, preventing search engines from discovering all your pages.', isSitemapBlocked ? `A 'Disallow' rule in your robots.txt is blocking the path to your sitemap (${sitemapPath}). Remove or modify the conflicting directive.` : 'The sitemap appears to be accessible according to your robots.txt rules.'));
                    } catch (e) { results.push(createCheck('Sitemap Accessibility', false, 'Invalid URL', 'The sitemap URL declared in robots.txt appears to be invalid or malformed.', `Correct the sitemap URL in robots.txt. The current value is: ${sitemapLine}`)); }
                } else { results.push(createCheck('Sitemap Declaration', false, 'Not in robots.txt', 'No sitemap.xml reference was found in your robots.txt. This is the recommended way to declare it.', 'Add a line to your robots.txt: `Sitemap: https://your-domain.com/sitemap.xml`')); }
            } catch (e) {
                results.push(createCheck('robots.txt Found', false, 'Not Found / Blocked', 'Could not fetch robots.txt. It may not exist or the server is blocking the proxy.', 'Ensure a robots.txt file exists at your site\'s root.'));
                results.push(createCheck('Sitemap Declaration', false, 'N/A (no robots.txt)', 'Sitemap check skipped as robots.txt could not be fetched.', 'N/A'));
            }
            return results;
        }
        function runAccessibilityChecks(doc) {
             const results = [];
             const lang = doc.documentElement.lang;
             results.push(createCheck('HTML Lang Attribute', !!lang, lang || 'Missing', 'The `lang` attribute helps screen readers and search engines understand the page\'s language.', '<html lang="en">'));
             const links = doc.querySelectorAll('a');
             const accessibleLinks = Array.from(links).every(a => a.textContent?.trim() !== '' || a.getAttribute('aria-label'));
             results.push(createCheck('Accessible Links', accessibleLinks, accessibleLinks ? 'Good' : 'Needs Review', 'Icon-only links must have an `aria-label` to be accessible to screen reader users.', '<a href="..." aria-label="Description of link purpose">...</a>'));
             return results;
        }

        // --- Event Listeners & Init ---

        el.auditBtn.addEventListener('click', startAudit);
        el.urlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') startAudit();
        });
        
        // Initial animation for idle state
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const el = entry.target;
                    const delay = parseInt(el.dataset.index || '0') * 100;
                    setTimeout(() => {
                        el.classList.remove('opacity-0', 'translate-y-5');
                    }, delay);
                    observer.unobserve(el);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('#idle-state [data-index]').forEach(elem => observer.observe(elem));
        
        populatePlaceholders();
        setState('idle-state');
    });
    </script>
</body>
</html>
