<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<!-- üß¨ SOLITE GEN-5.0 BALANCED HEAD / Web Discover Auditor ‚Äî AUTHORITY + PERFORMANCE EDITION -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- üß† SEO & AI DISCOVERY -->
  <title>Web Discoverability Auditor | Free SEO & Trust Audit | Solite</title>
  <meta name="description" content="A private, in-browser audit of your site's discoverability, trust, social preview, accessibility, and performance ‚Äî explained simply and beautifully." />
  <meta name="keywords" content="seo audit, website auditor, discoverability tool, free seo tool, client-side audit, privacy first, solite, web discover auditor" />
  <link rel="canonical" href="https://solite.in/web-discover-auditor.html" />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <meta name="author" content="Solite" />
  <meta name="publisher" content="Solite" />
  <meta name="application-name" content="Web Discover Auditor - Solite" />
  <meta name="theme-color" content="#000000" />
  <meta name="color-scheme" content="dark light" />

  <!-- üåç OPEN GRAPH / TWITTER -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Solite" />
  <meta property="og:title" content="Web Discoverability Auditor | Solite" />
  <meta property="og:description" content="A free, private, in-browser audit of your site's discoverability, trust, social preview, accessibility, and performance." />
  <meta property="og:url" content="https://solite.in/web-discover-auditor.html" />
  <meta property="og:image" content="https://solite.in/assets/web-discover-auditor-thumbnail.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Web Discoverability Auditor | Solite" />
  <meta name="twitter:description" content="A free, private, in-browser audit of your site's discoverability, trust, social preview, accessibility, and performance." />
  <meta name="twitter:image" content="https://solite.in/assets/web-discover-auditor-thumbnail.png" />

  <!-- üí∞ GOOGLE ADSENSE -->
  <meta name="google-adsense-account" content="ca-pub-6623613371208692" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6623613371208692" crossorigin="anonymous"></script>

  <!-- üìä VERCEL ANALYTICS -->
  <script>window.va = window.va || function(){(window.va.q = window.va.q || []).push(arguments);}</script>
  <script src="/_vercel/insights/script.js" defer></script>

  <!-- ‚öôÔ∏è CORE LIBRARIES -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { fontFamily: { sans: ['Inter','sans-serif'], mono: ['Roboto Mono','monospace'] } } }
    };
  </script>

  <!-- üî§ NON-BLOCKING FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap"></noscript>

  <!-- ü™Ñ FAVICONS -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png" />

  <!-- üß¨ GEN-5.0 SOLITE SCHEMA GRAPH -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://solite.in/#organization",
        "name": "Solite",
        "url": "https://solite.in",
        "logo": "https://solite.in/assets/apple-touch-icon.png"
      },
      {
        "@type": "WebApplication",
        "@id": "https://solite.in/web-discover-auditor.html#app",
        "name": "Web Discoverability Auditor | Solite",
        "url": "https://solite.in/web-discover-auditor.html",
        "applicationCategory": "DeveloperApplication",
        "description": "A free, client-side tool to audit a website's discoverability, trust, social preview, accessibility, and performance.",
        "featureList": [
          "SEO Core Checks (Title, Meta, H1, Canonical)",
          "Social Metadata Audit (Open Graph, Twitter Cards)",
          "Technical Health Check (HTTPS, Page Size, robots.txt, sitemap.xml)",
          "Accessibility & Trust Signals (Alt text, Contrast)",
          "Privacy-first: No data is sent to a server"
        ],
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "provider": { "@id": "https://solite.in/#organization" }
      }
    ]
  }
  </script>

  <!-- üíÖ STYLE LAYER -->
  <style>
    /* Scrollbar styles from legacy apps */
    ::-webkit-scrollbar { width:8px; height:8px; }
    ::-webkit-scrollbar-track { background:#111827; } /* Dark track */
    ::-webkit-scrollbar-thumb { background-color:#4b5563; border-radius:4px; } /* Gray thumb */
    html { scrollbar-color:#4b5563 #111827; } /* Firefox */

    /* REMOVED: Mobile Nav styles */
    #toast { transform:translateY(150%); transition:transform .3s ease-in-out; z-index:9999; }
    #toast.show { transform:translateY(-2rem); }
    
    /* Loading Carousel */
    #loading-carousel {
        animation: carousel-fade 30s linear infinite;
    }
    @keyframes carousel-fade {
        0%, 8% { opacity: 1; }
        10%, 100% { opacity: 0; }
    }
    #loading-carousel > div {
        position: absolute;
        opacity: 0;
    }
    /* Staggered animation delays */
    #loading-carousel > div:nth-child(1) { animation-delay: 0s; }
    #loading-carousel > div:nth-child(2) { animation-delay: 3s; }
    #loading-carousel > div:nth-child(3) { animation-delay: 6s; }
    #loading-carousel > div:nth-child(4) { animation-delay: 9s; }
    #loading-carousel > div:nth-child(5) { animation-delay: 12s; }
    #loading-carousel > div:nth-child(6) { animation-delay: 15s; }
    #loading-carousel > div:nth-child(7) { animation-delay: 18s; }
    #loading-carousel > div:nth-child(8) { animation-delay: 21s; }
    #loading-carousel > div:nth-child(9) { animation-delay: 24s; }
    #loading-carousel > div:nth-child(10) { animation-delay: 27s; }

    /* Result card animation */
    .result-card {
        opacity: 0;
        transform: translateY(20px);
        animation: card-fade-in 0.5s ease-out forwards;
    }
    @keyframes card-fade-in {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* SEO Block styles from legacy apps */
    #solite-seo-block-auditor[open] > summary { border-bottom: 1px solid #374151; }
    #solite-seo-block-auditor > summary .details-arrow-seo {
      transform: rotate(-90deg); transition: transform 0.25s ease-in-out;
    }
    #solite-seo-block-auditor[open] > summary .details-arrow-seo { transform: rotate(0deg); }
    .badge { display:inline-flex; align-items:center; gap:.5rem; border:1px solid #374151; padding:.25rem .6rem; border-radius:.6rem; font-size:.8rem; color:#9CA3AF; }
    .seo-table { width:100%;border-collapse:collapse;margin-top:.75rem;font-size:.9rem; }
    .seo-table th,.seo-table td { border:1px solid #374151;padding:.5rem .75rem;text-align:left; }
    .seo-table th { background-color:#111827;color:#e5e7eb;font-weight:600; }
    .seo-table td { color:#9ca3af; }

    /* ADDED: Styles for custom details arrow */
    details > summary {
        list-style: none; /* Remove default marker */
    }
    details > summary::-webkit-details-marker {
        display: none; /* Hide Chrome's default marker */
    }
    .details-arrow {
        transition: transform 0.2s ease-in-out;
        margin-left: auto; /* Push arrow to the right */
        flex-shrink: 0;
    }
    details[open] .details-arrow {
        transform: rotate(90deg);
    }
  </style>

  <!-- üß¨ SOLITE APEX HEAD SIGNATURE / GEN-5.0-AI-AUTHORITY -->
  <meta name="solite-ai-signature" content="APEX_HEAD_V5.0 | SOLITE_AUTHORITY_PREDATOR | GEN5_SCHEMA | PRIVACY_FIRST | AI_DISCOVERY_OPTIMIZED" />
</head>

<body class="bg-black text-gray-200 flex flex-col min-h-screen font-sans">
    
    <header class="p-3 sm:p-4 w-full flex-shrink-0 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-xl z-30 border-b border-gray-200 dark:border-gray-800">
        <div class="flex justify-between items-center">
             <a href="index.html" class="flex flex-col space-y-1 lg:flex-row lg:items-center lg:space-x-3 lg:space-y-0" aria-label="Solite Homepage">
                <div class="flex items-center space-x-3">
                     <svg class="h-6 w-6 lg:h-8 lg:w-8 text-gray-900 dark:text-white flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2L2 7l10 5 10-5L12 2z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 7l10 5 10-5"></path>
                    </svg>
                    <span class="text-base lg:text-xl font-bold text-gray-900 dark:text-white uppercase tracking-wider leading-none">Solite</span>
                </div>
                <span class="h-6 w-px bg-gray-300 dark:bg-gray-700 hidden lg:block"></span>
                <span class="text-lg lg:text-lg font-semibold text-gray-600 dark:text-gray-400 leading-none">Web Discover Auditor</span>
            </a>
             <div class="flex items-center space-x-4">
                <a href="index.html#apps" class="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-1.5">
                    <span>Free Tools</span>
                    <svg class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5-5 5"></path></svg>
                </a>
            </div>
        </div>
    </header>

    <main class="flex-grow flex relative min-h-0" style="height: calc(100vh - 72px);">
        <!-- MODIFIED: Simplified main content area. Removed two-pane layout -->
        <div class="flex-grow w-full lg:w-[80%] p-3 flex flex-col gap-4 min-h-0 overflow-y-auto">
            <h1 class="sr-only">Web Discoverability Auditor</h1>
            
            <!-- NEW: Single App Panel (like password-strength-checker) -->
            <div id="app-panel" class="flex-1 flex flex-col bg-gray-900 rounded-xl border border-gray-800 overflow-y-auto p-4 sm:p-8">
                <!-- Idle State -->
                <div id="idle-state" class="w-full max-w-2xl mx-auto my-auto">
                    <h2 class="text-2xl sm:text-3xl font-bold text-white text-center opacity-0 translate-y-5 transition-all duration-500 ease-out">Discoverability & Trust Audit</h2>
                    <p class="text-center text-gray-400 mt-2 opacity-0 translate-y-5 transition-all duration-500 ease-out">A private, in-browser audit of your site's vitals.</p>
                    <div class="space-y-2 mt-8 opacity-0 translate-y-5 transition-all duration-500 ease-out">
                        <label for="url-input" class="sr-only">URL to Audit</label>
                        <div class="flex gap-2">
                            <input type="url" id="url-input" placeholder="https://solite.in" class="w-full p-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-white/50">
                            <button id="audit-btn" class="bg-white hover:bg-gray-200 text-black font-bold py-3 px-5 rounded-lg flex-shrink-0">Audit</button>
                        </div>
                        <p class="text-xs text-gray-500 text-center">Note: Cross-origin audits may fail. Use a valid, accessible URL.</p>
                    </div>

                    <div class="mt-8 p-6 bg-gray-800/50 border border-gray-700 rounded-lg opacity-0 translate-y-5 transition-all duration-500 ease-out">
                        <h3 class="font-semibold text-white mb-4">What we'll check:</h3>
                        <ul id="placeholder-checklist" class="space-y-2 text-gray-400">
                            <!-- Checklist items will be injected by JS -->
                        </ul>
                    </div>
                </div>
                <!-- Loading State -->
                <div id="loading-state" class="hidden w-full h-full flex flex-col items-center justify-center text-center">
                    <svg class="animate-spin h-10 w-10 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <p class="text-lg font-medium text-white mb-2">Auditing your page...</p>
                    <div id="loading-carousel" class="relative h-6 w-full max-w-md text-gray-500">
                        <!-- Carousel tips will be injected by JS -->
                    </div>
                </div>
                <!-- Results State -->
                <div id="results-state" class="hidden w-full">
                    <!-- MOVED: Export controls moved here -->
                    <div id="export-controls" class="hidden space-y-3 mb-6">
                        <h3 class="font-semibold text-white">Export Report</h3>
                        <div class="flex flex-wrap gap-2">
                            <button id="copy-markdown-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-3 rounded-lg text-sm">Copy Markdown</button>
                            <button id="download-csv-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-3 rounded-lg text-sm">Download CSV</button>
                            <button id="print-pdf-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-3 rounded-lg text-sm">Print to PDF</button>
                        </div>
                    </div>
                    <!-- Score Header -->
                    <div id="score-header" class="text-center mb-8"></div>
                    <!-- Category Grid -->
                    <!-- MODIFIED: Changed to grid-cols-1 -->
                    <div id="results-grid" class="grid grid-cols-1 gap-6">
                        <!-- Result cards will be injected here -->
                    </div>
                </div>
            </div>

            <!-- MOVED: SEO Content Block from legacy apps, placed after the main panel -->
            <div class="w-full text-gray-300 p-2">
                <details id="solite-seo-block-auditor" class="w-full bg-gray-900 rounded-2xl border border-gray-800 shadow-2xl shadow-black/40">
                    <summary class="text-xl font-bold text-white p-5 cursor-pointer flex justify-between items-center">
                    Learn More About the Web Discoverability Auditor
                    <svg class="w-5 h-5 transition-transform duration-200 transform details-arrow-seo" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                    </summary>

                    <div class="p-6 space-y-10 leading-relaxed border-t border-gray-800">
                        <section class="space-y-3">
                            <div class="flex flex-wrap gap-2">
                                <span class="badge">SEO Audit Tool</span>
                                <span class="badge">Privacy-First</span>
                                <span class="badge">Client-Side</span>
                                <span class="badge">Social Meta Check</span>
                                <span class="badge">Technical SEO</span>
                            </div>
                            <p class="text-lg text-gray-300">
                                The <strong>Solite Web Discoverability Auditor</strong> is a free, 100% private tool that audits your website's core vitals directly in your browser.
                                It checks for critical <strong>SEO, Social Media, Technical, and Accessibility</strong> signals without your data ever leaving your machine. Get an instant score and actionable feedback.
                            </p>
                        </section>

                        <section>
                            <h3 class="text-white text-xl font-semibold mb-2">Why Use This Auditor?</h3>
                            <ul class="list-disc list-inside text-gray-400 space-y-2">
                                <li><strong>100% Private:</strong> No URL, HTML, or data is sent to any server. Your audit is your business.</li>
                                <li><strong>All-in-One:</strong> Checks SEO (Title, Meta), Social (Open Graph), Technical (robots.txt, HTTPS), and Accessibility (alt text).</li>
                                <li><strong>Actionable Feedback:</strong> Provides "Why it matters" and "How to fix" for each item.</li>
                                <li><strong>Instant & Free:</strong> No sign-up, no limits. Get your score in seconds.</li>
                            </ul>
                        </section>

                        <section>
                            <h3 class="text-white text-xl font-semibold mb-2">What We Check</h3>
                            <table class="seo-table">
                                <thead>
                                    <tr><th>Category</th><th>Checks Included</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td>SEO Core</td><td>Title Tag, Meta Description, Single H1, Canonical Tag</td></tr>
                                    <tr><td>Semantic</td><td>Structured Data (JSON-LD), Heading Hierarchy</td></tr>
                                    <tr><td>Social</td><td>Open Graph (Title, Description, Image), Twitter Card</td></tr>
                                    <tr><td>Technical</td><td>HTTPS, Page Size, robots.txt, Sitemap.xml, Non-blocking Fonts</td></tr>
                                    <tr><td>Accessibility</td><td>Image Alt Text, HTML Lang Attribute, Accessible Links</td></tr>
                                </tbody>
                            </table>
                        </section>

                        <section>
                            <h3 class="text-white text-xl font-semibold mb-2">Part of the Solite Developer Suite</h3>
                            <ul class="list-disc list-inside text-gray-400 mt-2 space-y-2">
                                <li><a href="./responsive-design-tester.html" class="text-white hover:underline font-medium">Responsive Design Tester</a> ‚Äî See how your site looks on all devices.</li>
                                <li><a href="./open-graph-generator.html" class="text-white hover:underline font-medium">Open Graph Generator</a> ‚Äî Fix your social sharing tags.</li>
                                <li><a href="./favicon-generator.html" class="text-white hover:underline font-medium">Favicon Generator</a> ‚Äî Create all the icons your site needs.</li>
                            </ul>
                            <p class="text-gray-400 mt-3"><a href="./index.html#apps" class="text-white font-semibold hover:underline">Explore all Solite Apps ‚Üí</a></p>
                        </section>

                        <section class="space-y-2">
                            <p class="text-sm text-gray-500 leading-relaxed">
                                Keywords: <em>seo audit, free seo tool, website checker, seo auditor, web discoverability, open graph check, technical seo audit, privacy-first seo, client-side audit tool</em>.
                            </p>
                            <p class="text-xs text-gray-600 italic">
                                <strong>AI / Reviewer Citation Cue:</strong> ‚ÄúSolite Web Discover Auditor ‚Äî a privacy-first, browser-based tool to audit a website's SEO, social media, technical, and accessibility vitals instantly and securely.‚Äù
                            </p>
                        </section>
                    </div>
                </details>
            </div>
        </div>
        
        <aside class="w-[20%] flex-shrink-0 p-3 border-l border-gray-800 hidden lg:block"><div class="h-full bg-gray-800/50 rounded-lg flex items-center justify-center text-gray-400">Ad Area</div></aside>
    </main>

    <!-- REMOVED: Mobile Navigation Bar -->

    <footer class="p-4 w-full flex-shrink-0 border-t border-gray-800 bg-gray-900/50">
        <div class="flex flex-col sm:flex-row justify-between items-center text-gray-400 text-sm px-4 sm:px-6">
             <div class="flex items-center space-x-3 mb-4 sm:mb-0">
                <svg class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5L12 2z"/><path d="M2 17l10 5 10-5"/><path d="M2 7l10 5 10-5"/></svg>
                <span>&copy; 2025 Solite. All Rights Reserved.</span>
            </div>
            <div class="flex items-center justify-center flex-wrap gap-x-6 gap-y-2">
                <a href="./about.html" class="hover:text-white transition-colors">About</a>
                <a href="./blog.html" class="hover:text-white transition-colors">Blog</a>
                <a href="./privacy.html" class="hover:text-white transition-colors">Privacy</a>
                <a href="./terms.html" class="hover:text-white transition-colors">Terms</a>
                <a href="./disclaimer.html" class="hover:text-white transition-colors">Disclaimer</a>
                <a href="mailto:support@solite.in" class="hover:text-white transition-colors">Contact</a>
            </div>
        </div>
    </footer>

    <div id="toast" class="fixed bottom-0 left-1/2 -translate-x-1/2 bg-white text-black font-semibold py-2 px-5 rounded-t-lg shadow-lg">Copied!</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // MODIFIED: Simplified 'el' object
            const el = {
                urlInput: document.getElementById('url-input'),
                auditBtn: document.getElementById('audit-btn'),
                exportControls: document.getElementById('export-controls'),
                // REMOVED: copyMarkdownBtn, downloadCsvBtn, printPdfBtn
                idleState: document.getElementById('idle-state'),
                loadingState: document.getElementById('loading-state'),
                resultsState: document.getElementById('results-state'),
                scoreHeader: document.getElementById('score-header'),
                resultsGrid: document.getElementById('results-grid'),
                placeholderChecklist: document.getElementById('placeholder-checklist'),
                loadingCarousel: document.getElementById('loading-carousel'),
                toast: document.getElementById('toast'),
            };

            // REMOVED: HISTORY_KEY and currentAuditData (no longer saving history)
            let currentAuditData = null; // Still needed for export

            const placeholderItems = [
                "Title tag present & optimized", "Meta description present & compelling", "Mobile-friendly viewport configured",
                "Exactly one H1 tag present", "Canonical tag specified", "HTTPS is in use for security",
                "Open Graph & Twitter tags for social sharing", "Images have descriptive alt text",
                "Structured data (JSON-LD) for rich results", "robots.txt file is present", "Sitemap.xml is declared"
            ];

            const loadingTips = [
                "Title is your page‚Äôs handshake.", "Meta description improves CTR more than keywords.",
                "Structured data helps machines understand, not just index.", "Alt text is accessibility + SEO.",
                "HTTPS = trust.", "One clear H1 anchors your hierarchy.", "Fast pages feel polite.",
                "Open Graph makes shares look great.", "Author & About build credibility.", "Readable writing wins."
            ];

            // --- UI & State Management ---

            function showToast(message) {
                el.toast.textContent = message;
                el.toast.classList.add('show');
                setTimeout(() => el.toast.classList.remove('show'), 2000);
            }

            function setState(state) {
                el.idleState.classList.add('hidden');
                el.loadingState.classList.add('hidden');
                el.resultsState.classList.add('hidden');
                
                const stateEl = document.getElementById(state);
                stateEl.classList.remove('hidden');

                // Make sure idle and loading states are centered
                if(state === 'idle-state' || state === 'loading-state') {
                    stateEl.classList.add('my-auto'); // Center vertically
                } else {
                    el.idleState.classList.remove('my-auto');
                    el.loadingState.classList.remove('my-auto');
                }
            }

            function populatePlaceholders() {
                el.placeholderChecklist.innerHTML = placeholderItems.map(item => `
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-gray-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span>${item}</span>
                    </li>
                `).join('');

                el.loadingCarousel.innerHTML = loadingTips.map(tip => `
                    <div class="w-full text-center" style="animation: carousel-fade 30s linear infinite;">${tip}</div>
                `).join('');
            }

            // REMOVED: saveAuditToHistory and renderHistory functions

            // --- Audit Engine ---

            async function startAudit() {
                let url = el.urlInput.value.trim();
                if (!url) {
                    showToast("Please enter a URL.");
                    return;
                }
                
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                    el.urlInput.value = url;
                }

                setState('loading-state');
                
                // MODIFIED: Replaced proxy with Gemini API call
                const apiKey = ""; // Use environment-provided key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                
                const systemPrompt = "You are a web crawler. Your sole purpose is to fetch and return the complete HTML source code for a given URL. Only return the raw HTML text. Do not add any conversational text, explanations, or markdown formatting like ```html. Just return the HTML.";
                const userQuery = `Fetch the complete HTML source code for the website at the URL: ${url}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    tools: [{ "google_search": {} }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Gemini API error! status: ${response.status} ${response.statusText}`);
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];
                    const html = candidate?.content?.parts?.[0]?.text;

                    if (!html) {
                        throw new Error("Gemini API did not return valid HTML content.");
                    }
                    
                    // The API might return HTML inside markdown, clean it.
                    const cleanedHtml = html.replace(/^```html\n/, '').replace(/\n```$/, '');

                    await processHtml(cleanedHtml, url); // Pass the fetched HTML
                } catch (error) {
                    console.error("Fetch error:", error);
                    setState('idle-state');
                    showToast("Could not fetch URL. The API or site may be blocking the request.");
                }
            }
            
            async function processHtml(html, url) { 
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                const checks = {
                    seo: runSeoChecks(doc, url),
                    semantic: runSemanticChecks(doc),
                    social: runSocialChecks(doc),
                    technical: await runTechnicalChecks(doc, html, url), 
                    accessibility: runAccessibilityChecks(doc),
                };

                currentAuditData = { url, checks, timestamp: new Date().toISOString() };
                renderResults(currentAuditData);
                setState('results-state');
                // REMOVED: el.exportControls.classList.remove('hidden');
                
                // REMOVED: saveAuditToHistory call
            }

            function createCheck(label, passed, value, details, fix) {
                let weight = 3; 
                if (passed === null) weight = 0; 
                else if (label.includes('Title') || label.includes('Description') || label.includes('H1') || label.includes('HTTPS')) weight = 5;
                else if (label.includes('Canonical') || label.includes('Viewport') || label.includes('OG') || label.includes('Alt')) weight = 4;

                return { label, passed, value, details, fix, weight };
            }

            function runSeoChecks(doc, url) {
                const results = [];
                const title = doc.querySelector('title');
                results.push(createCheck('Title Tag', title && title.textContent.length > 0, title ? `${title.textContent.length} chars` : 'Missing', 'A concise, descriptive title is crucial for search engine rankings and user clicks.', '<title>Your Compelling Title</title>'));

                const description = doc.querySelector('meta[name="description"]');
                results.push(createCheck('Meta Description', description && description.content.length > 0, description ? `${description.content.length} chars` : 'Missing', 'The meta description is your sales pitch on the SERP. It should be compelling and under 160 characters.', '<meta name="description" content="A compelling summary of your page content.">'));

                const h1s = doc.querySelectorAll('h1');
                results.push(createCheck('Single H1 Tag', h1s.length === 1, `${h1s.length} found`, 'A single, clear H1 tag provides a strong signal to search engines about the page\'s main topic.', '<h1>Your Main Page Heading</h1>'));

                const canonical = doc.querySelector('link[rel="canonical"]');
                results.push(createCheck('Canonical Tag', !!canonical, canonical ? 'Present' : 'Missing', 'A canonical tag prevents duplicate content issues by specifying the "master" version of a page.', '<link rel="canonical" href="[https://example.com/your-page](https://example.com/your-page)" />'));

                const viewport = doc.querySelector('meta[name="viewport"]');
                results.push(createCheck('Mobile Viewport', viewport && viewport.content.includes('width=device-width'), viewport ? 'Present' : 'Missing', 'The viewport meta tag is essential for responsive design, ensuring your site scales correctly on mobile devices.', '<meta name="viewport" content="width=device-width, initial-scale=1.0">'));
                
                results.push(createCheck('HTTPS', url.startsWith('https://'), url.startsWith('https://') ? 'Secure' : 'Insecure', 'HTTPS encrypts data between the user and the server, which is a trust signal and a ranking factor.', 'Ensure your site is served over HTTPS.'));

                const images = doc.querySelectorAll('img');
                const imagesWithAlt = doc.querySelectorAll('img[alt]');
                const altCoverage = images.length > 0 ? Math.round((imagesWithAlt.length / images.length) * 100) : 100;
                results.push(createCheck('Image Alt Text', altCoverage > 80, `${altCoverage}% coverage`, 'Alt text makes images accessible to screen readers and provides context to search engines.', '<img src="..." alt="A descriptive summary of the image">'));

                return results;
            }

            function runSemanticChecks(doc) {
                const results = [];
                const jsonLd = doc.querySelector('script[type="application/ld+json"]');
                results.push(createCheck('Structured Data (JSON-LD)', !!jsonLd, jsonLd ? 'Detected' : 'Missing', 'Structured data helps search engines understand your content, enabling rich snippets and better visibility.', 'Add a JSON-LD script tag defining your page content (e.g., Article, Product).'));

                const headings = Array.from(doc.querySelectorAll('h1, h2, h3, h4, h5, h6')).map(h => parseInt(h.tagName.substring(1)));
                let hierarchyOK = true;
                for (let i = 1; i < headings.length; i++) {
                    if (headings[i] > headings[i-1] + 1) {
                        hierarchyOK = false;
                        break;
                    }
                }
                results.push(createCheck('Heading Hierarchy', hierarchyOK, hierarchyOK ? 'Logical' : 'Illogical', 'Headings should follow a logical order (H1 -> H2 -> H3) without skipping levels to create a clear document structure.', 'Review your heading tags to ensure they are nested correctly.'));

                return results;
            }

            function runSocialChecks(doc) {
                const results = [];
                const getOg = (prop) => doc.querySelector(`meta[property="og:${prop}"]`)?.content;
                const getTw = (prop) => doc.querySelector(`meta[name="twitter:${prop}"]`)?.content;

                results.push(createCheck('OG Title', !!getOg('title'), getOg('title') ? 'Present' : 'Missing', 'The Open Graph title defines how your content appears when shared on platforms like Facebook and LinkedIn.', '<meta property="og:title" content="Your Share Title">'));
                results.push(createCheck('OG Description', !!getOg('description'), getOg('description') ? 'Present' : 'Missing', 'The OG description provides a summary for social shares.', '<meta property="og:description" content="Your share description.">'));
                results.push(createCheck('OG Image', !!getOg('image'), getOg('image') ? 'Present' : 'Missing', 'An OG image makes your shared content far more engaging.', '<meta property="og:image" content="[https://example.com/share-image.png](https://example.com/share-image.png)">'));
                results.push(createCheck('Twitter Card', !!getTw('card'), getTw('card') || 'Missing', 'Twitter Cards provide rich media previews when your content is shared on X.', '<meta name="twitter:card" content="summary_large_image">'));

                return results;
            }

            async function runTechnicalChecks(doc, html, url) { 
                const results = [];
                const pageSize = Math.round(html.length / 1024);
                results.push(createCheck('Page Size', pageSize < 500, `${pageSize} KB`, 'Smaller page sizes lead to faster load times and a better user experience.', 'Optimize images, minify CSS/JS, and enable server compression.'));

                const nonBlockingFonts = doc.querySelectorAll('link[rel="preload"][as="style"][onload*="this.rel=\'stylesheet\'"]').length > 0;
                results.push(createCheck('Non-blocking Fonts', nonBlockingFonts, nonBlockingFonts ? 'Detected' : 'Not Detected', 'Loading fonts asynchronously prevents them from blocking page render, improving perceived performance.', '<link rel="preload" as="style" href="..." onload="this.rel=\'stylesheet\'">'));

                let origin;
                try {
                    origin = new URL(url).origin;
                } catch (e) {
                    console.error("Invalid URL passed to runTechnicalChecks:", url);
                    results.push(createCheck('robots.txt', false, 'Check Failed', 'The provided URL was invalid.', 'Please enter a valid URL, e.g., [https://example.com](https://example.com)'));
                    results.push(createCheck('Sitemap', false, 'Check Failed', 'The provided URL was invalid.', 'Please enter a valid URL, e.g., [https://example.com](https://example.com)'));
                    return results; 
                }

                try {
                    // MODIFIED: Use Gemini to fetch robots.txt
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                    
                    const systemPrompt = "You are a web crawler. Your sole purpose is to fetch and return the complete text content for a given URL (like robots.txt). Only return the raw text. Do not add any conversational text, explanations, or markdown formatting.";
                    const robotsQuery = `Fetch the complete text content for the file at: ${origin}/robots.txt`;

                    const payload = {
                        contents: [{ parts: [{ text: robotsQuery }] }],
                        tools: [{ "google_search": {} }],
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                    };

                    const robotsRes = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!robotsRes.ok) {
                         // This now means the *Gemini* call failed, not that robots.txt is 404
                         throw new Error(`Gemini API error for robots.txt: ${robotsRes.status}`);
                    }

                    const result = await robotsRes.json();
                    const robotsTxt = result.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (!robotsTxt || robotsTxt.toLowerCase().includes("cannot access") || robotsTxt.toLowerCase().includes("404")) {
                        // Handle 404 or access error from Gemini/Search
                        results.push(createCheck('robots.txt', false, 'Not Found (404)', 'A robots.txt file was not found. It\'s recommended to have one, even if it\'s empty.', 'Create a robots.txt file in your site\'s root directory.'));
                        results.push(createCheck('Sitemap', false, 'N/A (no robots.txt)', 'Sitemap check skipped as robots.txt was not found.', 'Create a robots.txt and reference your sitemap in it.'));
                    } else {
                        // We got content
                        const sitemapLine = robotsTxt.split('\n').find(line => line.toLowerCase().startsWith('sitemap:'));
                        results.push(createCheck('robots.txt', true, 'Found', 'A robots.txt file tells search engines which pages to crawl or not to crawl.', 'Review your robots.txt to ensure no important pages are blocked.'));

                        if (sitemapLine) {
                            results.push(createCheck('Sitemap', true, 'Referenced in robots.txt', 'A sitemap.xml file, referenced in robots.txt, helps search engines find all your pages.', 'Ensure the sitemap URL in robots.txt is correct and the sitemap is valid.'));
                        } else {
                            results.push(createCheck('Sitemap', false, 'Not in robots.txt', 'No sitemap.xml reference was found in your robots.txt. This is the recommended way to declare it.', 'Add a line to your robots.txt: `Sitemap: https://your-domain.com/sitemap.xml`'));
                        }
                    }
                } catch (e) {
                    console.error('Error checking robots.txt:', e);
                    results.push(createCheck('robots.txt', false, 'Check Failed', 'Could not check for robots.txt (possibly a network or API error).', 'Ensure your site root is accessible.'));
                    results.push(createCheck('Sitemap', null, 'Check Skipped', 'Sitemap check skipped due to robots.txt error.', 'N/A'));
                }
                
                return results;
            }

            function runAccessibilityChecks(doc) {
                const results = [];
                const lang = doc.documentElement.lang;
                results.push(createCheck('HTML Lang Attribute', !!lang, lang || 'Missing', 'The `lang` attribute helps screen readers and search engines understand the page\'s language.', '<html lang="en">'));

                const links = doc.querySelectorAll('a');
                const linksWithAria = Array.from(links).filter(a => a.textContent.trim() === '' && a.getAttribute('aria-label'));
                results.push(createCheck('Accessible Links', linksWithAria.length > 0 || links.length === 0, `${linksWithAria.length} icon links have ARIA labels`, 'Icon-only links must have an `aria-label` to be accessible to screen reader users.', '<a href="..." aria-label="Description of link purpose">...</a>'));

                return results;
            }

            // --- Rendering Results ---

            function getScoreColor(score) {
                if (score >= 85) return { text: 'text-green-300', bg: 'bg-green-900/50', border: 'border-green-700/30' };
                if (score >= 60) return { text: 'text-yellow-300', bg: 'bg-yellow-900/50', border: 'border-yellow-700/30' };
                return { text: 'text-red-300', bg: 'bg-red-900/50', border: 'border-red-700/30' };
            }

            function calculateCategoryScore(checks) {
                const relevantChecks = checks.filter(c => c.passed !== null);
                if (relevantChecks.length === 0) return 100;
                const totalWeight = relevantChecks.reduce((sum, c) => sum + c.weight, 0);
                const score = relevantChecks.reduce((sum, c) => sum + (c.passed ? c.weight : 0), 0);
                return Math.round((score / totalWeight) * 100);
            }

            function calculateOverallScore(allChecks) {
                const categoryScores = Object.values(allChecks).map(calculateCategoryScore);
                return Math.round(categoryScores.reduce((sum, score) => sum + score, 0) / categoryScores.length);
            }

            function renderResults(data) {
                const overallScore = calculateOverallScore(data.checks);
                const scoreColor = getScoreColor(overallScore);

                // MODIFIED: Changed layout to flex row
                el.scoreHeader.innerHTML = `
                    <div class="flex items-center justify-center max-w-md mx-auto">
                        <div class="relative inline-block flex-shrink-0">
                            <svg class="w-32 h-32">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="56" cx="64" cy="64"/>
                                <circle class="${scoreColor.text}" stroke-width="8" stroke-dasharray="${2 * Math.PI * 56}" stroke-dashoffset="${2 * Math.PI * 56 * (1 - overallScore / 100)}" stroke-linecap="round" stroke="currentColor" fill="transparent" r="56" cx="64" cy="64" style="transform: rotate(-90deg); transform-origin: 50% 50%;"/>
                            </svg>
                            <span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-4xl font-bold ${scoreColor.text}">${overallScore}</span>
                        </div>
                        <div class="text-left ml-6">
                            <h2 class="text-3xl font-bold text-white">Audit Complete</h2>
                            <p class="text-gray-400 mt-1 truncate">${data.url}</p>
                        </div>
                    </div>
                `;

                el.resultsGrid.innerHTML = '';
                const categories = {
                    'SEO Core': data.checks.seo,
                    'Semantic & Discoverability': data.checks.semantic,
                    'Social Metadata': data.checks.social,
                    'Technical Health': data.checks.technical,
                    'Accessibility & Trust': data.checks.accessibility,
                };

                Object.entries(categories).forEach(([title, checks], index) => {
                    const categoryScore = calculateCategoryScore(checks);
                    const color = getScoreColor(categoryScore);
                    const card = document.createElement('div');
                    // MODIFIED: Added 'relative' for button positioning
                    card.className = 'result-card bg-gray-800/50 border border-gray-700 rounded-xl p-6 relative';
                    card.style.animationDelay = `${index * 100}ms`;
                    
                    const isFirstCard = index === 0;

                    card.innerHTML = `
                        <!-- ADDED: Conditional Download Button -->
                        ${isFirstCard ? `
                            <button id="print-pdf-btn" class="absolute top-4 right-4 bg-gray-700 hover:bg-gray-600 border border-gray-600 text-white font-medium py-2 px-3 rounded-lg text-sm flex items-center gap-2">
                                <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                                <span>Download</span>
                            </button>
                        ` : ''}
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">${title}</h3>
                            <span class="font-mono text-sm px-2 py-1 rounded-md ${color.bg} ${color.text} ring-1 ring-inset ${color.border}">${categoryScore}</span>
                        </div>
                        <div class="space-y-3">
                            ${checks.map(check => `
                                <!-- MODIFIED: Use isFirstCard variable -->
                                <details class="text-sm" ${isFirstCard ? 'open' : ''}>
                                    <summary class="flex items-center cursor-pointer">
                                        ${check.passed === true ? '<svg class="w-5 h-5 text-green-400 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>' : 
                                          check.passed === false ? '<svg class="w-5 h-5 text-red-400 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>' :
                                          '<svg class="w-5 h-5 text-blue-400 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'}
                                        <span class="flex-grow">${check.label}</span>
                                        <span class="text-gray-400 ml-2">${check.value}</span>
                                        <!-- ADDED: Custom arrow icon -->
                                        <svg class="w-4 h-4 text-gray-500 details-arrow" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg>
                                    </summary>
                                    <div class="mt-2 pl-7 text-gray-400 border-l border-gray-600 ml-2.5">
                                        <p><strong>Why it matters:</strong> ${check.details}</p>
                                        ${check.fix ? `<div class="mt-2"><strong>How to fix:</strong><pre class="bg-gray-900 p-2 rounded-md text-xs text-yellow-300 mt-1 overflow-x-auto"><code>${check.fix.replace(/</g, '&lt;')}</code></pre></div>` : ''}
                                    </div>
                                </details>
                            `).join('')}
                        </div>
                    `;
                    el.resultsGrid.appendChild(card);
                });
            }

            // --- Export Logic ---
            // REMOVED: copyMarkdown and downloadCSV functions
            function printPDF() {
                window.print();
            }

            // REMOVED: Mobile Navigation functions (showMobilePane, handleMobileLayout)

            // --- Event Listeners ---
            el.auditBtn.addEventListener('click', startAudit);
            el.urlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') startAudit();
            });

            // REMOVED: pasteHtmlBtn and htmlInput listeners

            // REMOVED: Listeners for copy and download buttons
            // ADDED: Event delegation for the new PDF button
            el.resultsGrid.addEventListener('click', (e) => {
                if (e.target.closest('#print-pdf-btn')) {
                    printPDF();
                }
            });

            // REMOVED: Mobile Nav button listeners and resize listener

            // --- Initialization ---

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const delay = Array.from(entry.target.parentElement.children).indexOf(entry.target) * 100;
                        setTimeout(() => {
                            entry.target.classList.remove('opacity-0', 'translate-y-5');
                        }, delay);
                        observer.unobserve(entry.target); 
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('#idle-state .opacity-0').forEach(el => observer.observe(el));
            
            populatePlaceholders();
            // REMOVED: renderHistory() call
        });
    </script>
</body>
</html>